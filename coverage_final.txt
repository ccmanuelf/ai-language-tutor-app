........................................................................ [  1%]
........................................................................ [  2%]
........................................................................ [  4%]
........................................................................ [  5%]
........................................................................ [  7%]
........................................................................ [  8%]
........................................................................ [  9%]
........................................................................ [ 11%]
........................................................................ [ 12%]
........................................................................ [ 14%]
........................................................................ [ 15%]
........................................................................ [ 17%]
........................................................................ [ 18%]
........................................................................ [ 19%]
........................................................................ [ 21%]
........................................................................ [ 22%]
........................................................................ [ 24%]
........................................................................ [ 25%]
........................................................................ [ 27%]
........................................................................ [ 28%]
........................................................................ [ 29%]
........................................................................ [ 31%]
........................................................................ [ 32%]
........................................................................ [ 34%]
........................................................................ [ 35%]
........................................................................ [ 37%]
........................................................................ [ 38%]
........................................................................ [ 39%]
........................................................................ [ 41%]
........................................................................ [ 42%]
........................................................................ [ 44%]
........................................................................ [ 45%]
........................................................................ [ 47%]
........................................................................ [ 48%]
........................................................................ [ 49%]
........................................................................ [ 51%]
........................................................................ [ 52%]
........................................................................ [ 54%]
..................................................F..................... [ 55%]
........................................................................ [ 57%]
........................................................................ [ 58%]
........................................................................ [ 59%]
........................................................................ [ 61%]
........................................................................ [ 62%]
........................................................................ [ 64%]
........................................................................ [ 65%]
........................................................................ [ 67%]
........................................................................ [ 68%]
........................................................................ [ 69%]
........................................................................ [ 71%]
........................................................................ [ 72%]
........................................................................ [ 74%]
........................................................................ [ 75%]
........................................................................ [ 77%]
........................................................................ [ 78%]
........................................................................ [ 79%]
........................................................................ [ 81%]
........................................................................ [ 82%]
........................................................................ [ 84%]
........................................................................ [ 85%]
........................................................................ [ 87%]
........................................................................ [ 88%]
........................................................................ [ 89%]
........................................................................ [ 91%]
........................................................................ [ 92%]
........................................................................ [ 94%]
........................................................................ [ 95%]
........................................................................ [ 97%]
........................................................................ [ 98%]
........................................................................ [ 99%]
....                                                                     [100%]
=================================== FAILURES ===================================
____ TestAdminRoutesImportErrors.test_ai_models_page_import_error_coverage _____

self = <tests.test_frontend_admin_routes.TestAdminRoutesImportErrors object at 0x321b9c5c0>
mock_permission = <MagicMock name='AdminPermission' id='5488327232'>
mock_auth_service = <MagicMock name='admin_auth_service' id='13514986304'>
mock_get_user = <AsyncMock name='get_current_user' id='13514995040'>

    @patch("app.frontend.admin_routes.get_current_user")
    @patch("app.frontend.admin_routes.admin_auth_service")
    @patch("app.frontend.admin_routes.AdminPermission")
    def test_ai_models_page_import_error_coverage(
        self, mock_permission, mock_auth_service, mock_get_user
    ):
        """Test that AI models page import errors are caught"""
        mock_get_user.return_value = self.mock_admin_user
        mock_auth_service.is_admin_user.return_value = True
        mock_auth_service.has_permission.return_value = True
    
        response = self.client.get("/dashboard/admin/ai-models")
    
        # Currently fails due to missing get_admin_styles import
>       assert response.status_code == 500
E       assert 200 == 500
E        +  where 200 = <Response [200 OK]>.status_code

tests/test_frontend_admin_routes.py:780: AssertionError

---------- coverage: platform darwin, python 3.12.2-final-0 ----------
Name                                                   Stmts   Miss Branch BrPart    Cover   Missing
----------------------------------------------------------------------------------------------------
app/__init__.py                                            3      0      0      0  100.00%
app/api/__init__.py                                        0      0      0      0  100.00%
app/api/admin.py                                         238      0     92      0  100.00%
app/api/ai_models.py                                     294      0    110      0  100.00%
app/api/auth.py                                           95      0     34      0  100.00%
app/api/content.py                                       207      0     66      0  100.00%
app/api/conversations.py                                 140      0     28      0  100.00%
app/api/feature_toggles.py                               215      0     73      0  100.00%
app/api/language_config.py                               214      0     56      0  100.00%
app/api/learning_analytics.py                            221      0     42      0  100.00%
app/api/ollama.py                                         44      0     16      0  100.00%
app/api/progress_analytics.py                            223      0     38      0  100.00%
app/api/realtime_analysis.py                             221      0     72      0  100.00%
app/api/scenario_management.py                           293      0     92      0  100.00%
app/api/scenarios.py                                     217      0     66      0  100.00%
app/api/tutor_modes.py                                   158      0     34      0  100.00%
app/api/visual_learning.py                               141      0     38      0  100.00%
app/core/__init__.py                                       0      0      0      0  100.00%
app/core/config.py                                        35      0      4      0  100.00%
app/core/security.py                                      64      0     16      0  100.00%
app/database/__init__.py                                   0      0      0      0  100.00%
app/database/chromadb_config.py                          115      0     26      0  100.00%
app/database/config.py                                   195      0     44      0  100.00%
app/database/local_config.py                             198      0     60      0  100.00%
app/database/migrations.py                               195      0     27      0  100.00%
app/frontend/__init__.py                                   3      0      0      0  100.00%
app/frontend/admin_ai_models.py                           24      0      2      0  100.00%
app/frontend/admin_dashboard.py                           46      0      4      0  100.00%
app/frontend/admin_feature_toggles.py                     17      0      0      0  100.00%
app/frontend/admin_language_config.py                     42      0      2      0  100.00%
app/frontend/admin_learning_analytics.py                  25      0      4      0  100.00%
app/frontend/admin_routes.py                             135      0     62      0  100.00%
app/frontend/admin_scenario_management.py                 17      0      0      0  100.00%
app/frontend/chat.py                                       8      0      2      0  100.00%
app/frontend/content_view.py                               5      0      2      0  100.00%
app/frontend/diagnostic.py                                 7      0      2      0  100.00%
app/frontend/home.py                                      20      0      4      0  100.00%
app/frontend/layout.py                                    50      0     10      0  100.00%
app/frontend/learning_analytics_dashboard.py              61      0     16      0  100.00%
app/frontend/main.py                                      25      0      0      0  100.00%
app/frontend/profile.py                                    8      0      2      0  100.00%
app/frontend/progress.py                                   6      0      2      0  100.00%
app/frontend/progress_analytics_dashboard.py              69      0     14      0  100.00%
app/frontend/server.py                                     6      0      2      0  100.00%
app/frontend/styles.py                                     9      0      0      0  100.00%
app/frontend/user_ui.py                                   36      0      0      0  100.00%
app/frontend/visual_learning.py                           33      0     10      0  100.00%
app/frontend_main.py                                      20      0      2      0  100.00%
app/main.py                                               47      0      6      0  100.00%
app/models/__init__.py                                     0      0      0      0  100.00%
app/models/database.py                                   257      0     18      0  100.00%
app/models/feature_toggle.py                             148      0      6      0  100.00%
app/models/schemas.py                                    363      0     24      0  100.00%
app/models/simple_user.py                                 27      0      0      0  100.00%
app/services/__init__.py                                   0      0      0      0  100.00%
app/services/admin_auth.py                               223      0     68      0  100.00%
app/services/ai_model_manager.py                         352      0    120      0  100.00%
app/services/ai_router.py                                329      0    104      0  100.00%
app/services/ai_service_base.py                          106      0     26      0  100.00%
app/services/ai_test_suite.py                            215      0     26      0  100.00%
app/services/auth.py                                     263      0     72      0  100.00%
app/services/budget_manager.py                           237      0     80      0  100.00%
app/services/claude_service.py                           116      0     31      0  100.00%
app/services/content_processor.py                        399      0    131      0  100.00%
app/services/conversation_analytics.py                    48      0      6      0  100.00%
app/services/conversation_manager.py                      56      0     10      0  100.00%
app/services/conversation_messages.py                     95      0     24      0  100.00%
app/services/conversation_models.py                       67      0     18      0  100.00%
app/services/conversation_persistence.py                 143      0     44      0  100.00%
app/services/conversation_prompts.py                      28      0      6      0  100.00%
app/services/conversation_state.py                       102      0     30      0  100.00%
app/services/deepseek_service.py                         101      0     22      0  100.00%
app/services/feature_toggle_manager.py                   265      0     78      0  100.00%
app/services/feature_toggle_service.py                   451      0    202      0  100.00%
app/services/mistral_service.py                          100      0     14      0  100.00%
app/services/mistral_stt_service.py                      121      0     26      0  100.00%
app/services/ollama_service.py                           274      0    114      0  100.00%
app/services/piper_tts_service.py                        164      0     54      0  100.00%
app/services/progress_analytics_service.py               469      0    144      0  100.00%
app/services/realtime_analyzer.py                        314      0     78      0  100.00%
app/services/response_cache.py                           129      0     45      0  100.00%
app/services/scenario_factory.py                          61      0     14      0  100.00%
app/services/scenario_io.py                               47      0     16      0  100.00%
app/services/scenario_manager.py                         234      0     80      0  100.00%
app/services/scenario_models.py                          104      0     24      0  100.00%
app/services/scenario_templates.py                        30      0     18      0  100.00%
app/services/scenario_templates_extended.py               96      0     62      0  100.00%
app/services/spaced_repetition_manager.py                 58      0     11      0  100.00%
app/services/spaced_repetition_manager_refactored.py      58      0     11      0  100.00%
app/services/speech_processor.py                         576      0    170      0  100.00%
app/services/sr_algorithm.py                             156      0     50      0  100.00%
app/services/sr_analytics.py                              81      0     20      0  100.00%
app/services/sr_database.py                               98      0     42      0  100.00%
app/services/sr_gamification.py                           45      0     16      0  100.00%
app/services/sr_models.py                                128      0     20      0  100.00%
app/services/sr_sessions.py                              102      0     28      0  100.00%
app/services/sync.py                                     281      0     66      0  100.00%
app/services/tutor_mode_manager.py                       149      0     38      0  100.00%
app/services/user_management.py                          310      0     72      0  100.00%
app/services/visual_learning_service.py                  253      0     66      0  100.00%
app/utils/sqlite_adapters.py                              43      0     12      0  100.00%
----------------------------------------------------------------------------------------------------
TOTAL                                                  13317      0   3639      0  100.00%
Coverage HTML written to dir htmlcov

=========================== short test summary info ============================
FAILED tests/test_frontend_admin_routes.py::TestAdminRoutesImportErrors::test_ai_models_page_import_error_coverage
1 failed, 5043 passed in 224.41s (0:03:44)
