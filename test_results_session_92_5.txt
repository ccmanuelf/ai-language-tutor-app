============================= test session starts ==============================
platform darwin -- Python 3.12.2, pytest-8.4.2, pluggy-1.6.0 -- /Users/mcampos.cerda/Documents/Programming/ai-language-tutor-app/ai-tutor-env/bin/python
cachedir: .pytest_cache
rootdir: /Users/mcampos.cerda/Documents/Programming/ai-language-tutor-app
configfile: pyproject.toml
plugins: httpx-0.35.0, cov-4.1.0, asyncio-0.21.1, Faker-37.6.0, mock-3.12.0, anyio-3.7.1
asyncio: mode=Mode.STRICT
collecting ... collected 4240 items

tests/e2e/test_ai_e2e.py::TestClaudeE2E::test_claude_real_api_conversation PASSED [  0%]
tests/e2e/test_ai_e2e.py::TestMistralE2E::test_mistral_real_api_conversation PASSED [  0%]
tests/e2e/test_ai_e2e.py::TestQwenE2E::test_qwen_real_api_conversation SKIPPED [  0%]
tests/e2e/test_ai_e2e.py::TestAIRouterE2E::test_router_real_provider_selection PASSED [  0%]
tests/e2e/test_ai_e2e.py::TestAIRouterE2E::test_router_real_multi_language FAILED [  0%]
tests/e2e/test_ai_e2e.py::TestConversationEndpointE2E::test_chat_endpoint_real_ai PASSED [  0%]
tests/integration/test_ai_integration.py::TestAIRouterIntegration::test_provider_selection_based_on_language FAILED [  0%]
tests/integration/test_ai_integration.py::TestAIRouterIntegration::test_router_failover_when_primary_fails FAILED [  0%]
tests/integration/test_ai_integration.py::TestConversationAIIntegration::test_chat_with_ai_router_integration FAILED [  0%]
tests/integration/test_ai_integration.py::TestConversationAIIntegration::test_chat_failover_to_fallback_on_all_ai_failures PASSED [  0%]
tests/integration/test_ai_integration.py::TestSpeechProcessingIntegration::test_chat_with_tts_integration FAILED [  0%]
tests/integration/test_ai_integration.py::TestMultiLanguageIntegration::test_language_switching_between_providers PASSED [  0%]
tests/test_100_percent_coverage.py::Test100PercentCoverage::test_main_py_if_name_main_exact_line PASSED [  0%]
tests/test_100_percent_coverage.py::Test100PercentCoverage::test_frontend_main_py_if_name_main_exact_line PASSED [  0%]
tests/test_100_percent_coverage.py::Test100PercentCoverage::test_simulate_python_main_py_execution PASSED [  0%]
tests/test_100_percent_coverage.py::Test100PercentCoverage::test_direct_module_execution_main PASSED [  0%]
tests/test_100_percent_coverage.py::Test100PercentCoverage::test_direct_module_execution_frontend PASSED [  0%]
tests/test_100_percent_coverage.py::Test100PercentCoverage::test_simulate_python_frontend_main_py_execution PASSED [  0%]
tests/test_admin_auth.py::TestAdminPermission::test_user_management_permissions PASSED [  0%]
tests/test_admin_auth.py::TestAdminPermission::test_configuration_management_permissions PASSED [  0%]
tests/test_admin_auth.py::TestAdminPermission::test_system_administration_permissions PASSED [  0%]
tests/test_admin_auth.py::TestAdminPermission::test_data_management_permissions PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServiceInitialization::test_service_initialization PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServiceInitialization::test_role_permissions_structure PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServiceInitialization::test_child_role_has_no_permissions PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServiceInitialization::test_parent_role_permissions PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServiceInitialization::test_admin_role_permissions PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServicePermissionChecking::test_has_permission_child_no_permissions PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServicePermissionChecking::test_has_permission_parent_view_permissions PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServicePermissionChecking::test_has_permission_parent_no_manage_permissions PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServicePermissionChecking::test_has_permission_admin_all_permissions PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServicePermissionChecking::test_has_permission_invalid_role PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServicePermissionChecking::test_get_user_permissions_child PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServicePermissionChecking::test_get_user_permissions_parent PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServicePermissionChecking::test_get_user_permissions_admin PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServicePermissionChecking::test_get_user_permissions_invalid_role PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServiceRequirePermissionDecorator::test_require_permission_success PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServiceRequirePermissionDecorator::test_require_permission_no_user PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServiceRequirePermissionDecorator::test_require_permission_insufficient_permissions PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServiceUserManagement::test_upgrade_user_to_admin_success PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServiceUserManagement::test_upgrade_user_to_admin_user_not_found PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServiceUserManagement::test_upgrade_user_to_admin_exception PASSED [  0%]
tests/test_admin_auth.py::TestAdminAuthServiceUserManagement::test_create_admin_user_new_user PASSED [  1%]
tests/test_admin_auth.py::TestAdminAuthServiceUserManagement::test_create_admin_user_existing_admin PASSED [  1%]
tests/test_admin_auth.py::TestAdminAuthServiceUserManagement::test_create_admin_user_upgrade_existing_non_admin PASSED [  1%]
tests/test_admin_auth.py::TestAdminAuthServiceUserManagement::test_create_admin_user_exception PASSED [  1%]
tests/test_admin_auth.py::TestAdminAuthServiceUserManagement::test_is_admin_user_true PASSED [  1%]
tests/test_admin_auth.py::TestAdminAuthServiceUserManagement::test_is_admin_user_false PASSED [  1%]
tests/test_admin_auth.py::TestAdminAuthServiceUserManagement::test_is_parent_or_admin_parent PASSED [  1%]
tests/test_admin_auth.py::TestAdminAuthServiceUserManagement::test_is_parent_or_admin_admin PASSED [  1%]
tests/test_admin_auth.py::TestAdminAuthServiceUserManagement::test_is_parent_or_admin_child PASSED [  1%]
tests/test_admin_auth.py::TestFastAPIDependencies::test_require_admin_access_success PASSED [  1%]
tests/test_admin_auth.py::TestFastAPIDependencies::test_require_admin_access_forbidden PASSED [  1%]
tests/test_admin_auth.py::TestFastAPIDependencies::test_require_parent_or_admin_access_parent PASSED [  1%]
tests/test_admin_auth.py::TestFastAPIDependencies::test_require_parent_or_admin_access_admin PASSED [  1%]
tests/test_admin_auth.py::TestFastAPIDependencies::test_require_parent_or_admin_access_forbidden PASSED [  1%]
tests/test_admin_auth.py::TestFastAPIDependencies::test_require_admin_dashboard_access_success PASSED [  1%]
tests/test_admin_auth.py::TestFastAPIDependencies::test_require_admin_dashboard_access_forbidden PASSED [  1%]
tests/test_admin_auth.py::TestFastAPIDependencies::test_require_permission_dependency_success PASSED [  1%]
tests/test_admin_auth.py::TestFastAPIDependencies::test_require_permission_dependency_forbidden PASSED [  1%]
tests/test_admin_auth.py::TestRouteProtectionDecorators::test_admin_required_success PASSED [  1%]
tests/test_admin_auth.py::TestRouteProtectionDecorators::test_admin_required_no_user PASSED [  1%]
tests/test_admin_auth.py::TestRouteProtectionDecorators::test_admin_required_non_admin PASSED [  1%]
tests/test_admin_auth.py::TestRouteProtectionDecorators::test_parent_or_admin_required_parent PASSED [  1%]
tests/test_admin_auth.py::TestRouteProtectionDecorators::test_parent_or_admin_required_admin PASSED [  1%]
tests/test_admin_auth.py::TestRouteProtectionDecorators::test_parent_or_admin_required_no_user PASSED [  1%]
tests/test_admin_auth.py::TestRouteProtectionDecorators::test_parent_or_admin_required_child PASSED [  1%]
tests/test_admin_auth.py::TestGuestUserManager::test_manager_initialization PASSED [  1%]
tests/test_admin_auth.py::TestGuestUserManager::test_create_guest_session_success PASSED [  1%]
tests/test_admin_auth.py::TestGuestUserManager::test_create_guest_session_without_device_info PASSED [  1%]
tests/test_admin_auth.py::TestGuestUserManager::test_create_guest_session_already_active PASSED [  1%]
tests/test_admin_auth.py::TestGuestUserManager::test_terminate_guest_session_success PASSED [  1%]
tests/test_admin_auth.py::TestGuestUserManager::test_terminate_guest_session_without_id PASSED [  1%]
tests/test_admin_auth.py::TestGuestUserManager::test_terminate_guest_session_wrong_id PASSED [  1%]
tests/test_admin_auth.py::TestGuestUserManager::test_terminate_guest_session_no_active_session PASSED [  1%]
tests/test_admin_auth.py::TestGuestUserManager::test_terminate_guest_session_no_active_session_no_id PASSED [  1%]
tests/test_admin_auth.py::TestGuestUserManager::test_is_guest_session_active_true PASSED [  1%]
tests/test_admin_auth.py::TestGuestUserManager::test_is_guest_session_active_false PASSED [  1%]
tests/test_admin_auth.py::TestGuestUserManager::test_get_guest_session_info_active PASSED [  1%]
tests/test_admin_auth.py::TestGuestUserManager::test_get_guest_session_info_not_active PASSED [  1%]
tests/test_admin_auth.py::TestGuestAccessDependency::test_allow_guest_access_authenticated_user PASSED [  1%]
tests/test_admin_auth.py::TestGuestAccessDependency::test_allow_guest_access_guest_session PASSED [  1%]
tests/test_admin_auth.py::TestGuestAccessDependency::test_allow_guest_access_no_auth PASSED [  1%]
tests/test_admin_auth.py::TestGuestAccessDependency::test_allow_guest_access_wrong_guest_session PASSED [  1%]
tests/test_admin_auth.py::TestGuestAccessDependency::test_allow_guest_access_exception_handling PASSED [  2%]
tests/test_admin_auth.py::TestBlockGuestAccessDecorator::test_block_guest_access_allows_regular_user PASSED [  2%]
tests/test_admin_auth.py::TestBlockGuestAccessDecorator::test_block_guest_access_allows_user_without_is_guest PASSED [  2%]
tests/test_admin_auth.py::TestBlockGuestAccessDecorator::test_block_guest_access_blocks_guest_user PASSED [  2%]
tests/test_admin_auth.py::TestUtilityFunctions::test_initialize_admin_system_success PASSED [  2%]
tests/test_admin_auth.py::TestUtilityFunctions::test_initialize_admin_system_failure PASSED [  2%]
tests/test_admin_auth.py::TestUtilityFunctions::test_get_admin_user_info_success PASSED [  2%]
tests/test_admin_auth.py::TestUtilityFunctions::test_get_admin_user_info_user_not_found PASSED [  2%]
tests/test_admin_auth.py::TestUtilityFunctions::test_get_admin_user_info_no_last_login PASSED [  2%]
tests/test_admin_auth.py::TestUtilityFunctions::test_get_admin_user_info_exception PASSED [  2%]
tests/test_admin_auth.py::TestUtilityFunctions::test_get_current_admin_user_admin PASSED [  2%]
tests/test_admin_auth.py::TestUtilityFunctions::test_get_current_admin_user_parent PASSED [  2%]
tests/test_admin_auth.py::TestUtilityFunctions::test_get_current_admin_user_no_user PASSED [  2%]
tests/test_admin_auth.py::TestUtilityFunctions::test_get_current_admin_user_child PASSED [  2%]
tests/test_admin_auth.py::TestCheckAdminPermissionDecorator::test_check_admin_permission_success PASSED [  2%]
tests/test_admin_auth.py::TestCheckAdminPermissionDecorator::test_check_admin_permission_no_user PASSED [  2%]
tests/test_admin_auth.py::TestCheckAdminPermissionDecorator::test_check_admin_permission_insufficient_permissions PASSED [  2%]
tests/test_admin_auth.py::TestGlobalInstances::test_admin_auth_service_singleton PASSED [  2%]
tests/test_admin_auth.py::TestGlobalInstances::test_guest_manager_singleton PASSED [  2%]
tests/test_ai_model_manager.py::TestEnums::test_model_status_values PASSED [  2%]
tests/test_ai_model_manager.py::TestEnums::test_model_category_values PASSED [  2%]
tests/test_ai_model_manager.py::TestEnums::test_model_size_values PASSED [  2%]
tests/test_ai_model_manager.py::TestModelConfiguration::test_model_configuration_creation PASSED [  2%]
tests/test_ai_model_manager.py::TestModelConfiguration::test_model_configuration_post_init_timestamps PASSED [  2%]
tests/test_ai_model_manager.py::TestModelConfiguration::test_model_configuration_with_explicit_timestamps PASSED [  2%]
tests/test_ai_model_manager.py::TestModelUsageStats::test_usage_stats_creation PASSED [  2%]
tests/test_ai_model_manager.py::TestModelUsageStats::test_usage_stats_defaults PASSED [  2%]
tests/test_ai_model_manager.py::TestModelPerformanceReport::test_performance_report_creation PASSED [  2%]
tests/test_ai_model_manager.py::TestDatabaseInitialization::test_initialize_database_creates_tables PASSED [  2%]
tests/test_ai_model_manager.py::TestDatabaseInitialization::test_initialize_database_creates_indexes PASSED [  2%]
tests/test_ai_model_manager.py::TestDatabaseInitialization::test_initialize_database_model_configurations_schema PASSED [  2%]
tests/test_ai_model_manager.py::TestDatabaseInitialization::test_initialize_database_model_usage_stats_schema PASSED [  2%]
tests/test_ai_model_manager.py::TestDefaultModelsLoading::test_load_default_models_creates_models PASSED [  2%]
tests/test_ai_model_manager.py::TestDefaultModelsLoading::test_load_default_models_creates_usage_stats PASSED [  2%]
tests/test_ai_model_manager.py::TestDefaultModelsLoading::test_load_default_models_saves_to_database PASSED [  2%]
tests/test_ai_model_manager.py::TestDefaultModelsLoading::test_load_default_models_claude_configuration PASSED [  2%]
tests/test_ai_model_manager.py::TestDefaultModelsLoading::test_load_default_models_mistral_configuration PASSED [  2%]
tests/test_ai_model_manager.py::TestDefaultModelsLoading::test_load_default_models_deepseek_configuration PASSED [  2%]
tests/test_ai_model_manager.py::TestDefaultModelsLoading::test_load_default_models_ollama_configurations PASSED [  2%]
tests/test_ai_model_manager.py::TestDatabaseOperations::test_save_model_to_db PASSED [  2%]
tests/test_ai_model_manager.py::TestDatabaseOperations::test_save_model_to_db_replaces_existing PASSED [  2%]
tests/test_ai_model_manager.py::TestDatabaseOperations::test_save_usage_stats_to_db PASSED [  2%]
tests/test_ai_model_manager.py::TestDatabaseOperations::test_log_performance PASSED [  2%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_get_all_models_empty PASSED [  3%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_get_all_models_with_data PASSED [  3%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_get_all_models_filter_by_category PASSED [  3%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_get_all_models_enabled_only PASSED [  3%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_get_all_models_sorted_by_priority PASSED [  3%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_get_model_exists PASSED [  3%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_get_model_not_exists PASSED [  3%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_update_model_success PASSED [  3%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_update_model_not_found PASSED [  3%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_update_model_status PASSED [  3%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_update_model_clears_cache PASSED [  3%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_update_model_only_updateable_fields PASSED [  3%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_enable_model PASSED [  3%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_disable_model PASSED [  3%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_set_model_priority_valid PASSED [  3%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_set_model_priority_invalid_too_low PASSED [  3%]
tests/test_ai_model_manager.py::TestModelCRUDOperations::test_set_model_priority_invalid_too_high PASSED [  3%]
tests/test_ai_model_manager.py::TestUsageTracking::test_track_model_usage_first_request PASSED [  3%]
tests/test_ai_model_manager.py::TestUsageTracking::test_track_model_usage_multiple_requests PASSED [  3%]
tests/test_ai_model_manager.py::TestUsageTracking::test_track_model_usage_failed_request PASSED [  3%]
tests/test_ai_model_manager.py::TestUsageTracking::test_track_model_usage_quality_rating_first PASSED [  3%]
tests/test_ai_model_manager.py::TestUsageTracking::test_track_model_usage_quality_rating_weighted_average PASSED [  3%]
tests/test_ai_model_manager.py::TestUsageTracking::test_track_model_usage_no_quality_rating PASSED [  3%]
tests/test_ai_model_manager.py::TestUsageTracking::test_track_model_usage_nonexistent_model PASSED [  3%]
tests/test_ai_model_manager.py::TestPerformanceReports::test_get_model_performance_report_nonexistent_model PASSED [  3%]
tests/test_ai_model_manager.py::TestPerformanceReports::test_get_model_performance_report_no_data PASSED [  3%]
tests/test_ai_model_manager.py::TestPerformanceReports::test_get_model_performance_report_with_data PASSED [  3%]
tests/test_ai_model_manager.py::TestPerformanceReports::test_fetch_performance_data_exists PASSED [  3%]
tests/test_ai_model_manager.py::TestPerformanceReports::test_fetch_performance_data_not_exists PASSED [  3%]
tests/test_ai_model_manager.py::TestPerformanceReports::test_calculate_efficiency_metrics PASSED [  3%]
tests/test_ai_model_manager.py::TestPerformanceReports::test_generate_model_recommendations_conversation PASSED [  3%]
tests/test_ai_model_manager.py::TestPerformanceReports::test_generate_model_recommendations_high_quality PASSED [  3%]
tests/test_ai_model_manager.py::TestPerformanceReports::test_generate_optimization_suggestions_high_cost PASSED [  3%]
tests/test_ai_model_manager.py::TestPerformanceReports::test_generate_optimization_suggestions_slow_response PASSED [  3%]
tests/test_ai_model_manager.py::TestPerformanceReports::test_generate_optimization_suggestions_low_reliability PASSED [  3%]
tests/test_ai_model_manager.py::TestSystemOverview::test_get_system_overview_structure PASSED [  3%]
tests/test_ai_model_manager.py::TestSystemOverview::test_get_system_overview_overview_stats PASSED [  3%]
tests/test_ai_model_manager.py::TestSystemOverview::test_calculate_overview_stats PASSED [  3%]
tests/test_ai_model_manager.py::TestSystemOverview::test_calculate_overview_stats_no_requests PASSED [  3%]
tests/test_ai_model_manager.py::TestSystemOverview::test_get_budget_status_dict PASSED [  3%]
tests/test_ai_model_manager.py::TestSystemOverview::test_get_budget_status_dict_no_alert_level PASSED [  3%]
tests/test_ai_model_manager.py::TestSystemOverview::test_calculate_provider_breakdown PASSED [  3%]
tests/test_ai_model_manager.py::TestSystemOverview::test_get_top_performing_models PASSED [  4%]
tests/test_ai_model_manager.py::TestSystemOverview::test_calculate_category_breakdown PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_optimize_model_selection_basic PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_optimize_model_selection_with_budget PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_optimize_model_selection_language_specific PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_filter_suitable_models_by_language PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_filter_suitable_models_by_budget PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_calculate_model_score PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_get_quality_score PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_get_reliability_score PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_get_language_match_score_primary PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_get_language_match_score_supported PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_get_language_match_score_not_supported PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_get_cost_efficiency_score PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_get_speed_score PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_get_category_match_score_match PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_get_category_match_score_no_match PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_get_priority_score PASSED [  4%]
tests/test_ai_model_manager.py::TestModelOptimization::test_select_top_models PASSED [  4%]
tests/test_ai_model_manager.py::TestHealthStatus::test_get_health_status_structure PASSED [  4%]
tests/test_ai_model_manager.py::TestHealthStatus::test_get_health_status_healthy_system PASSED [  4%]
tests/test_ai_model_manager.py::TestHealthStatus::test_get_health_status_degraded_system PASSED [  4%]
tests/test_ai_model_manager.py::TestHealthStatus::test_get_health_status_provider_breakdown PASSED [  4%]
tests/test_ai_model_manager.py::TestGlobalInstance::test_global_instance_exists PASSED [  4%]
tests/test_ai_model_manager.py::TestGlobalInstance::test_global_instance_has_models PASSED [  4%]
tests/test_ai_model_manager.py::TestGlobalInstance::test_global_instance_has_database PASSED [  4%]
tests/test_ai_model_manager.py::TestRealExecution::test_calculate_model_rankings_real PASSED [  4%]
tests/test_ai_model_manager.py::TestRealExecution::test_score_models_real PASSED [  4%]
tests/test_ai_model_manager.py::TestRealExecution::test_filter_suitable_models_real PASSED [  4%]
tests/test_ai_model_manager.py::TestRealExecution::test_update_model_real_field_check PASSED [  4%]
tests/test_ai_model_manager.py::TestMissingBranches::test_load_default_models_existing_usage_stats PASSED [  4%]
tests/test_ai_model_manager.py::TestMissingBranches::test_update_model_field_without_hasattr PASSED [  4%]
tests/test_ai_model_manager.py::TestMissingBranches::test_calculate_model_rankings_model_not_found PASSED [  4%]
tests/test_ai_model_manager.py::TestMissingBranches::test_generate_model_recommendations_low_quality PASSED [  4%]
tests/test_ai_model_manager.py::TestMissingBranches::test_update_model_field_not_on_model PASSED [  4%]
tests/test_ai_model_manager.py::TestMissingBranches::test_calculate_provider_breakdown_inactive_model PASSED [  4%]
tests/test_ai_router.py::TestRouterInitialization::test_router_initialization PASSED [  4%]
tests/test_ai_router.py::TestRouterInitialization::test_language_preferences_initialized PASSED [  4%]
tests/test_ai_router.py::TestProviderRegistration::test_register_provider PASSED [  4%]
tests/test_ai_router.py::TestProviderHealthCheck::test_check_provider_health_not_registered PASSED [  4%]
tests/test_ai_router.py::TestProviderHealthCheck::test_check_provider_health_success PASSED [  4%]
tests/test_ai_router.py::TestProviderHealthCheck::test_check_provider_health_cached PASSED [  4%]
tests/test_ai_router.py::TestProviderHealthCheck::test_check_provider_health_no_method PASSED [  5%]
tests/test_ai_router.py::TestProviderHealthCheck::test_check_provider_health_error PASSED [  5%]
tests/test_ai_router.py::TestBudgetChecks::test_check_budget_status PASSED [  5%]
tests/test_ai_router.py::TestBudgetChecks::test_should_use_local_only_force PASSED [  5%]
tests/test_ai_router.py::TestBudgetChecks::test_should_use_local_only_preferences PASSED [  5%]
tests/test_ai_router.py::TestBudgetChecks::test_should_use_local_only_false PASSED [  5%]
tests/test_ai_router.py::TestBudgetChecks::test_should_use_budget_fallback_critical PASSED [  5%]
tests/test_ai_router.py::TestBudgetChecks::test_should_use_budget_fallback_red PASSED [  5%]
tests/test_ai_router.py::TestBudgetChecks::test_should_use_budget_fallback_green PASSED [  5%]
tests/test_ai_router.py::TestProviderSelection::test_get_cloud_providers_english PASSED [  5%]
tests/test_ai_router.py::TestProviderSelection::test_get_cloud_providers_french PASSED [  5%]
tests/test_ai_router.py::TestProviderSelection::test_get_cloud_providers_chinese PASSED [  5%]
tests/test_ai_router.py::TestProviderSelection::test_get_model_for_provider_claude PASSED [  5%]
tests/test_ai_router.py::TestProviderSelection::test_get_model_for_provider_mistral PASSED [  5%]
tests/test_ai_router.py::TestProviderSelection::test_get_model_for_provider_qwen PASSED [  5%]
tests/test_ai_router.py::TestProviderSelection::test_get_model_for_provider_ollama PASSED [  5%]
tests/test_ai_router.py::TestProviderSelection::test_get_model_for_provider_unknown PASSED [  5%]
tests/test_ai_router.py::TestProviderSelection::test_try_cloud_provider_not_registered PASSED [  5%]
tests/test_ai_router.py::TestProviderSelection::test_try_cloud_provider_unhealthy PASSED [  5%]
tests/test_ai_router.py::TestProviderSelection::test_try_cloud_provider_too_expensive PASSED [  5%]
tests/test_ai_router.py::TestProviderSelection::test_try_cloud_provider_success PASSED [  5%]
tests/test_ai_router.py::TestProviderSelection::test_try_cloud_provider_error PASSED [  5%]
tests/test_ai_router.py::TestProviderSelection::test_select_best_cloud_provider_success PASSED [  5%]
tests/test_ai_router.py::TestProviderSelection::test_select_best_cloud_provider_none_available PASSED [  5%]
tests/test_ai_router.py::TestLocalProviderSelection::test_select_local_provider_success PASSED [  5%]
tests/test_ai_router.py::TestLocalProviderSelection::test_select_local_provider_unavailable PASSED [  5%]
tests/test_ai_router.py::TestSelectProvider::test_select_provider_force_local PASSED [  5%]
tests/test_ai_router.py::TestSelectProvider::test_select_provider_user_preference_local PASSED [  5%]
tests/test_ai_router.py::TestSelectProvider::test_select_provider_budget_exceeded PASSED [  5%]
tests/test_ai_router.py::TestSelectProvider::test_select_provider_cloud_success PASSED [  5%]
tests/test_ai_router.py::TestSelectProvider::test_select_provider_fallback_on_failure PASSED [  5%]
tests/test_ai_router.py::TestCostEstimation::test_estimate_request_cost_ollama PASSED [  5%]
tests/test_ai_router.py::TestCostEstimation::test_estimate_request_cost_claude PASSED [  5%]
tests/test_ai_router.py::TestCostEstimation::test_estimate_request_cost_translation PASSED [  5%]
tests/test_ai_router.py::TestCostEstimation::test_estimate_request_cost_complex PASSED [  5%]
tests/test_ai_router.py::TestCostEstimation::test_estimate_request_cost_unregistered PASSED [  5%]
tests/test_ai_router.py::TestCostEstimation::test_estimate_request_cost_no_pricing PASSED [  5%]
tests/test_ai_router.py::TestSortProvidersByCost::test_sort_providers_low_budget PASSED [  5%]
tests/test_ai_router.py::TestSortProvidersByCost::test_sort_providers_simple_use_case PASSED [  5%]
tests/test_ai_router.py::TestSortProvidersByCost::test_sort_providers_complex_use_case PASSED [  5%]
tests/test_ai_router.py::TestSortProvidersByCost::test_sort_providers_unknown PASSED [  5%]
tests/test_ai_router.py::TestGenerateResponse::test_generate_response_success PASSED [  5%]
tests/test_ai_router.py::TestGenerateResponse::test_generate_response_with_fallback PASSED [  5%]
tests/test_ai_router.py::TestGenerateResponse::test_generate_response_all_fail PASSED [  6%]
tests/test_ai_router.py::TestGenerateResponse::test_generate_response_local_no_cost_tracking PASSED [  6%]
tests/test_ai_router.py::TestGenerateStreamingResponse::test_generate_streaming_response_supported PASSED [  6%]
tests/test_ai_router.py::TestGenerateStreamingResponse::test_generate_streaming_response_not_supported PASSED [  6%]
tests/test_ai_router.py::TestGenerateStreamingResponse::test_generate_streaming_response_with_fallback PASSED [  6%]
tests/test_ai_router.py::TestRouterModes::test_set_router_mode_cost_optimized PASSED [  6%]
tests/test_ai_router.py::TestRouterModes::test_set_router_mode_quality_optimized PASSED [  6%]
tests/test_ai_router.py::TestRouterModes::test_enable_fallback_true PASSED [  6%]
tests/test_ai_router.py::TestRouterModes::test_enable_fallback_false PASSED [  6%]
tests/test_ai_router.py::TestRouterStatus::test_get_router_status PASSED [  6%]
tests/test_ai_router.py::TestCaching::test_should_use_cache_short_conversation PASSED [  6%]
tests/test_ai_router.py::TestCaching::test_should_use_cache_long_conversation PASSED [  6%]
tests/test_ai_router.py::TestCaching::test_should_use_cache_cacheable_pattern PASSED [  6%]
tests/test_ai_router.py::TestCaching::test_should_use_cache_non_cacheable PASSED [  6%]
tests/test_ai_router.py::TestLegacyCostEstimation::test_estimate_request_cost_legacy_claude PASSED [  6%]
tests/test_ai_router.py::TestLegacyCostEstimation::test_estimate_request_cost_legacy_ollama PASSED [  6%]
tests/test_ai_router.py::TestLegacyCostEstimation::test_estimate_request_cost_legacy_use_cases PASSED [  6%]
tests/test_ai_router.py::TestGlobalInstance::test_global_router_exists PASSED [  6%]
tests/test_ai_router.py::TestGlobalInstance::test_global_router_has_providers PASSED [  6%]
tests/test_ai_router.py::TestConvenienceFunctions::test_generate_ai_response_cached PASSED [  6%]
tests/test_ai_router.py::TestConvenienceFunctions::test_generate_ai_response_not_cached PASSED [  6%]
tests/test_ai_router.py::TestConvenienceFunctions::test_generate_ai_response_fallback PASSED [  6%]
tests/test_ai_router.py::TestConvenienceFunctions::test_generate_streaming_ai_response PASSED [  6%]
tests/test_ai_router.py::TestConvenienceFunctions::test_get_ai_router_status PASSED [  6%]
tests/test_ai_router.py::TestConvenienceFunctions::test_register_ai_provider PASSED [  6%]
tests/test_ai_router.py::TestDataclasses::test_provider_selection_creation PASSED [  6%]
tests/test_ai_router.py::TestDataclasses::test_provider_selection_with_fallback PASSED [  6%]
tests/test_ai_router.py::TestEnums::test_router_mode_values PASSED       [  6%]
tests/test_ai_router.py::TestEnums::test_fallback_reason_values PASSED   [  6%]
tests/test_ai_router.py::TestEdgeCaseCoverage::test_try_cloud_provider_exception_handling PASSED [  6%]
tests/test_ai_router.py::TestEdgeCaseCoverage::test_streaming_all_providers_fail_raises_exception PASSED [  6%]
tests/test_ai_router.py::TestEdgeCaseCoverage::test_cost_optimization_default_balanced_scoring PASSED [  6%]
tests/test_ai_router.py::TestMissingBranchCoverage::test_select_local_provider_ollama_already_registered PASSED [  6%]
tests/test_ai_router.py::TestMissingBranchCoverage::test_generate_ai_response_fallback_no_content PASSED [  6%]
tests/test_ai_router.py::TestMissingBranchCoverage::test_generate_ai_response_fallback_none_response PASSED [  6%]
tests/test_ai_router.py::TestMissingBranchCoverage::test_get_ai_router_status_no_alert_level PASSED [  6%]
tests/test_ai_router.py::TestMissingBranchCoverage::test_generate_ai_response_try_block_no_content PASSED [  6%]
tests/test_ai_router.py::TestMissingBranchCoverage::test_get_ai_router_status_with_alert_level PASSED [  6%]
tests/test_ai_router.py::TestMissingBranchCoverage::test_get_ai_router_status_zero_cache_hits PASSED [  6%]
tests/test_ai_service_base.py::TestAIResponseStatus::test_enum_values_exist PASSED [  6%]
tests/test_ai_service_base.py::TestAIResponseStatus::test_enum_value_strings PASSED [  6%]
tests/test_ai_service_base.py::TestAIResponseStatus::test_enum_comparison PASSED [  6%]
tests/test_ai_service_base.py::TestAIResponseStatus::test_enum_membership PASSED [  7%]
tests/test_ai_service_base.py::TestAIResponseStatus::test_enum_iteration PASSED [  7%]
tests/test_ai_service_base.py::TestAIResponse::test_creation_with_all_fields PASSED [  7%]
tests/test_ai_service_base.py::TestAIResponse::test_creation_with_minimal_fields PASSED [  7%]
tests/test_ai_service_base.py::TestAIResponse::test_post_init_metadata_none PASSED [  7%]
tests/test_ai_service_base.py::TestAIResponse::test_post_init_metadata_provided PASSED [  7%]
tests/test_ai_service_base.py::TestAIResponse::test_status_default_value PASSED [  7%]
tests/test_ai_service_base.py::TestAIResponse::test_different_status_values PASSED [  7%]
tests/test_ai_service_base.py::TestAIResponse::test_error_message_optional PASSED [  7%]
tests/test_ai_service_base.py::TestAIResponse::test_float_cost_and_time PASSED [  7%]
tests/test_ai_service_base.py::TestStreamingResponse::test_creation_with_all_fields PASSED [  7%]
tests/test_ai_service_base.py::TestStreamingResponse::test_creation_with_minimal_fields PASSED [  7%]
tests/test_ai_service_base.py::TestStreamingResponse::test_post_init_metadata_none PASSED [  7%]
tests/test_ai_service_base.py::TestStreamingResponse::test_post_init_metadata_provided PASSED [  7%]
tests/test_ai_service_base.py::TestStreamingResponse::test_is_final_true PASSED [  7%]
tests/test_ai_service_base.py::TestStreamingResponse::test_is_final_false PASSED [  7%]
tests/test_ai_service_base.py::TestStreamingResponse::test_different_languages PASSED [  7%]
tests/test_ai_service_base.py::TestStreamingResponse::test_status_values PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceInit::test_cannot_instantiate_abstract_class PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceInit::test_mock_service_initialization PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceInit::test_mock_service_default_values PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceInit::test_mock_service_languages PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceInit::test_last_health_check_none_default PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceInit::test_is_available_true_default PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_generate_streaming_response_default_implementation PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_generate_streaming_response_metadata_flag PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_generate_streaming_response_preserves_data PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_get_health_status_healthy PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_get_health_status_unhealthy PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_get_health_status_with_last_check_none PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_get_health_status_with_last_check_set PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_get_health_status_cost_per_1k_tokens PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_estimate_cost_calculation PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_estimate_cost_zero_tokens PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_estimate_cost_only_input PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_estimate_cost_only_output PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_supports_language_empty_list PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_supports_language_in_list PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_supports_language_not_in_list PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_format_error_response_structure PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_format_error_response_content PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_format_error_response_metadata PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_format_error_response_zero_cost PASSED [  7%]
tests/test_ai_service_base.py::TestBaseAIServiceMethods::test_format_error_response_different_languages PASSED [  8%]
tests/test_ai_service_base.py::TestGetLanguageSpecificPrompt::test_english_prompt PASSED [  8%]
tests/test_ai_service_base.py::TestGetLanguageSpecificPrompt::test_french_prompt PASSED [  8%]
tests/test_ai_service_base.py::TestGetLanguageSpecificPrompt::test_spanish_prompt PASSED [  8%]
tests/test_ai_service_base.py::TestGetLanguageSpecificPrompt::test_german_prompt PASSED [  8%]
tests/test_ai_service_base.py::TestGetLanguageSpecificPrompt::test_italian_prompt PASSED [  8%]
tests/test_ai_service_base.py::TestGetLanguageSpecificPrompt::test_portuguese_prompt PASSED [  8%]
tests/test_ai_service_base.py::TestGetLanguageSpecificPrompt::test_chinese_prompt PASSED [  8%]
tests/test_ai_service_base.py::TestGetLanguageSpecificPrompt::test_japanese_prompt PASSED [  8%]
tests/test_ai_service_base.py::TestGetLanguageSpecificPrompt::test_korean_prompt PASSED [  8%]
tests/test_ai_service_base.py::TestGetLanguageSpecificPrompt::test_unknown_language_fallback PASSED [  8%]
tests/test_ai_service_base.py::TestGetLanguageSpecificPrompt::test_with_existing_system_message PASSED [  8%]
tests/test_ai_service_base.py::TestGetLanguageSpecificPrompt::test_without_system_message PASSED [  8%]
tests/test_ai_service_base.py::TestGetLanguageSpecificPrompt::test_message_list_not_mutated PASSED [  8%]
tests/test_ai_service_base.py::TestValidateRequest::test_valid_request_no_errors PASSED [  8%]
tests/test_ai_service_base.py::TestValidateRequest::test_empty_messages_error PASSED [  8%]
tests/test_ai_service_base.py::TestValidateRequest::test_unsupported_language_warning PASSED [  8%]
tests/test_ai_service_base.py::TestValidateRequest::test_token_limit_exceeded_error PASSED [  8%]
tests/test_ai_service_base.py::TestValidateRequest::test_max_tokens_exceeds_limit_warning PASSED [  8%]
tests/test_ai_service_base.py::TestValidateRequest::test_invalid_temperature_below_zero_error PASSED [  8%]
tests/test_ai_service_base.py::TestValidateRequest::test_invalid_temperature_above_two_error PASSED [  8%]
tests/test_ai_service_base.py::TestValidateRequest::test_valid_temperature_range PASSED [  8%]
tests/test_ai_service_base.py::TestValidateRequest::test_multiple_errors PASSED [  8%]
tests/test_ai_service_base.py::TestValidateRequest::test_multiple_warnings PASSED [  8%]
tests/test_ai_service_base.py::TestValidateRequest::test_estimated_tokens_calculation PASSED [  8%]
tests/test_ai_service_base.py::TestMockAIService::test_initialization_service_name PASSED [  8%]
tests/test_ai_service_base.py::TestMockAIService::test_initialization_supported_languages PASSED [  8%]
tests/test_ai_service_base.py::TestMockAIService::test_initialization_cost_values PASSED [  8%]
tests/test_ai_service_base.py::TestMockAIService::test_generate_response_english PASSED [  8%]
tests/test_ai_service_base.py::TestMockAIService::test_generate_response_french PASSED [  8%]
tests/test_ai_service_base.py::TestMockAIService::test_generate_response_spanish PASSED [  8%]
tests/test_ai_service_base.py::TestMockAIService::test_generate_response_chinese PASSED [  8%]
tests/test_ai_service_base.py::TestMockAIService::test_generate_response_unknown_language_fallback PASSED [  8%]
tests/test_ai_service_base.py::TestMockAIService::test_generate_response_async_behavior PASSED [  8%]
tests/test_ai_service_base.py::TestMockAIService::test_generate_response_structure PASSED [  8%]
tests/test_ai_service_base.py::TestMockAIService::test_generate_response_metadata PASSED [  8%]
tests/test_ai_service_base.py::TestMockAIService::test_generate_response_empty_messages PASSED [  8%]
tests/test_ai_service_base.py::TestMockAIService::test_generate_response_model_parameter PASSED [  8%]
tests/test_ai_service_base.py::TestMockAIService::test_generate_response_model_default PASSED [  8%]
tests/test_ai_test_suite.py::TestSafeMean::test_safe_mean_with_values PASSED [  8%]
tests/test_ai_test_suite.py::TestSafeMean::test_safe_mean_with_empty_list PASSED [  8%]
tests/test_ai_test_suite.py::TestSafeMean::test_safe_mean_custom_default PASSED [  8%]
tests/test_ai_test_suite.py::TestSafeMean::test_safe_mean_single_value PASSED [  9%]
tests/test_ai_test_suite.py::TestSafeMean::test_safe_mean_integers PASSED [  9%]
tests/test_ai_test_suite.py::TestEnumsAndDataClasses::test_test_result_enum_values PASSED [  9%]
tests/test_ai_test_suite.py::TestEnumsAndDataClasses::test_test_report_creation PASSED [  9%]
tests/test_ai_test_suite.py::TestEnumsAndDataClasses::test_test_report_with_error PASSED [  9%]
tests/test_ai_test_suite.py::TestAIServicesTestSuiteInit::test_initialization PASSED [  9%]
tests/test_ai_test_suite.py::TestIndividualTestMethods::test_ai_service_base_method_exists PASSED [  9%]
tests/test_ai_test_suite.py::TestIndividualTestMethods::test_budget_manager_method_exists PASSED [  9%]
tests/test_ai_test_suite.py::TestIndividualTestMethods::test_ollama_service_method_exists PASSED [  9%]
tests/test_ai_test_suite.py::TestIndividualTestMethods::test_conversation_manager_method_exists PASSED [  9%]
tests/test_ai_test_suite.py::TestIndividualTestMethods::test_all_12_test_methods_exist PASSED [  9%]
tests/test_ai_test_suite.py::TestRunAllTests::test_run_all_tests_all_pass FAILED [  9%]
tests/test_ai_test_suite.py::TestRunAllTests::test_run_all_tests_all_fail PASSED [  9%]
tests/test_ai_test_suite.py::TestRunAllTests::test_run_all_tests_mixed_results PASSED [  9%]
tests/test_ai_test_suite.py::TestRunAllTests::test_run_all_tests_assertion_error_handling PASSED [  9%]
tests/test_ai_test_suite.py::TestRunAllTests::test_run_all_tests_not_configured_skip PASSED [  9%]
tests/test_ai_test_suite.py::TestRunAllTests::test_run_all_tests_not_available_skip PASSED [  9%]
tests/test_ai_test_suite.py::TestRunAllTests::test_run_all_tests_other_exception_error PASSED [  9%]
tests/test_ai_test_suite.py::TestRunAllTests::test_run_all_tests_success_rate_boundary_80_percent PASSED [  9%]
tests/test_ai_test_suite.py::TestRunAllTests::test_run_all_tests_success_rate_below_80_percent PASSED [  9%]
tests/test_ai_test_suite.py::TestRunAllTests::test_run_all_tests_zero_tests_division_protection PASSED [  9%]
tests/test_ai_test_suite.py::TestRunAllTests::test_run_all_tests_execution_time_tracking PASSED [  9%]
tests/test_ai_test_suite.py::TestPrintSummary::test_print_summary_with_performance_metrics PASSED [  9%]
tests/test_ai_test_suite.py::TestPrintSummary::test_print_summary_without_performance_metrics PASSED [  9%]
tests/test_ai_test_suite.py::TestPrintSummary::test_print_summary_success_message PASSED [  9%]
tests/test_ai_test_suite.py::TestPrintSummary::test_print_summary_needs_attention_message PASSED [  9%]
tests/test_ai_test_suite.py::TestModuleLevelFunctions::test_run_ai_tests_function PASSED [  9%]
tests/test_ai_test_suite.py::TestModuleLevelFunctions::test_main_function PASSED [  9%]
tests/test_ai_test_suite.py::TestMainExecution::test_main_execution_block PASSED [  9%]
tests/test_ai_test_suite.py::TestIntegrationRealExecution::test_full_suite_execution_simulation PASSED [  9%]
tests/test_ai_test_suite.py::TestIntegrationRealExecution::test_performance_metrics_collection PASSED [  9%]
tests/test_ai_test_suite.py::TestIntegrationRealExecution::test_actual_run_all_tests_execution PASSED [  9%]
tests/test_ai_test_suite.py::TestEdgeCases::test_empty_performance_metrics_in_summary PASSED [  9%]
tests/test_ai_test_suite.py::TestEdgeCases::test_performance_metrics_without_average_time PASSED [  9%]
tests/test_ai_test_suite.py::TestEdgeCases::test_test_result_enum_completeness PASSED [  9%]
tests/test_ai_test_suite.py::TestEdgeCases::test_test_report_execution_time_precision PASSED [  9%]
tests/test_ai_test_suite.py::TestEdgeCases::test_safe_mean_with_negative_values PASSED [  9%]
tests/test_ai_test_suite.py::TestEdgeCases::test_safe_mean_with_mixed_values PASSED [  9%]
tests/test_ai_test_suite.py::TestIntegrationTestMethodCoverage::test_budget_manager_assertions PASSED [  9%]
tests/test_ai_test_suite.py::TestIntegrationTestMethodCoverage::test_speech_processor_assertions PASSED [  9%]
tests/test_ai_test_suite.py::TestIntegrationTestMethodCoverage::test_ai_router_integration_assertions PASSED [  9%]
tests/test_ai_test_suite.py::TestIntegrationTestMethodCoverage::test_conversation_flow_assertions PASSED [  9%]
tests/test_ai_test_suite.py::TestIntegrationTestMethodCoverage::test_multi_language_support_assertions PASSED [ 10%]
tests/test_ai_test_suite.py::TestIntegrationTestMethodCoverage::test_performance_assertions PASSED [ 10%]
tests/test_ai_test_suite.py::TestIntegrationTestMethodCoverage::test_budget_fallback_assertions PASSED [ 10%]
tests/test_ai_test_suite.py::TestIntegrationTestMethodCoverage::test_cost_estimation_assertions PASSED [ 10%]
tests/test_ai_test_suite.py::TestLoopExitBranch::test_multi_language_loop_exit PASSED [ 10%]
tests/test_ai_test_suite.py::TestMainExecutionBlock::test_main_block_subprocess PASSED [ 10%]
tests/test_api_admin.py::TestPydanticModels::test_create_user_request_valid PASSED [ 10%]
tests/test_api_admin.py::TestPydanticModels::test_create_user_request_default_role PASSED [ 10%]
tests/test_api_admin.py::TestPydanticModels::test_create_user_request_invalid_email PASSED [ 10%]
tests/test_api_admin.py::TestPydanticModels::test_update_user_request_all_optional PASSED [ 10%]
tests/test_api_admin.py::TestPydanticModels::test_update_user_request_partial PASSED [ 10%]
tests/test_api_admin.py::TestPydanticModels::test_user_response_model PASSED [ 10%]
tests/test_api_admin.py::TestPydanticModels::test_standard_response_success PASSED [ 10%]
tests/test_api_admin.py::TestPydanticModels::test_standard_response_no_data PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_get_user_or_404_success PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_get_user_or_404_not_found PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_validate_self_modification_not_self PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_validate_self_modification_self_same_role PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_validate_self_modification_self_demotion PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_validate_self_modification_no_role_change PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_check_username_uniqueness_unique PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_check_username_uniqueness_conflict PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_check_email_uniqueness_unique PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_check_email_uniqueness_conflict PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_update_user_role_admin PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_update_user_role_parent PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_update_user_role_child PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_validate_self_deactivation_not_self PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_validate_self_deactivation_activating_self PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_validate_self_deactivation_self_deactivation PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_update_user_fields_username_only PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_update_user_fields_email_only PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_update_user_fields_first_name PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_update_user_fields_last_name PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_update_user_fields_role PASSED [ 10%]
tests/test_api_admin.py::TestHelperFunctions::test_update_user_fields_is_active PASSED [ 10%]
tests/test_api_admin.py::TestListUsersEndpoint::test_list_users_success PASSED [ 10%]
tests/test_api_admin.py::TestListUsersEndpoint::test_list_users_empty PASSED [ 10%]
tests/test_api_admin.py::TestListUsersEndpoint::test_list_users_database_error PASSED [ 10%]
tests/test_api_admin.py::TestCreateUserEndpoint::test_create_user_success PASSED [ 10%]
tests/test_api_admin.py::TestCreateUserEndpoint::test_create_user_duplicate_email PASSED [ 10%]
tests/test_api_admin.py::TestCreateUserEndpoint::test_create_user_with_admin_role PASSED [ 10%]
tests/test_api_admin.py::TestCreateUserEndpoint::test_create_user_with_parent_role PASSED [ 10%]
tests/test_api_admin.py::TestCreateUserEndpoint::test_create_user_database_error PASSED [ 11%]
tests/test_api_admin.py::TestGetUserEndpoint::test_get_user_success PASSED [ 11%]
tests/test_api_admin.py::TestGetUserEndpoint::test_get_user_not_found PASSED [ 11%]
tests/test_api_admin.py::TestGetUserEndpoint::test_get_user_database_error PASSED [ 11%]
tests/test_api_admin.py::TestUpdateUserEndpoint::test_update_user_success PASSED [ 11%]
tests/test_api_admin.py::TestUpdateUserEndpoint::test_update_user_not_found PASSED [ 11%]
tests/test_api_admin.py::TestUpdateUserEndpoint::test_update_user_self_demotion PASSED [ 11%]
tests/test_api_admin.py::TestUpdateUserEndpoint::test_update_user_database_error PASSED [ 11%]
tests/test_api_admin.py::TestToggleUserStatusEndpoint::test_toggle_user_status_activate PASSED [ 11%]
tests/test_api_admin.py::TestToggleUserStatusEndpoint::test_toggle_user_status_deactivate PASSED [ 11%]
tests/test_api_admin.py::TestToggleUserStatusEndpoint::test_toggle_user_status_not_found PASSED [ 11%]
tests/test_api_admin.py::TestToggleUserStatusEndpoint::test_toggle_user_status_self_deactivation PASSED [ 11%]
tests/test_api_admin.py::TestToggleUserStatusEndpoint::test_toggle_user_status_database_error PASSED [ 11%]
tests/test_api_admin.py::TestDeleteUserEndpoint::test_delete_user_success PASSED [ 11%]
tests/test_api_admin.py::TestDeleteUserEndpoint::test_delete_user_not_found PASSED [ 11%]
tests/test_api_admin.py::TestDeleteUserEndpoint::test_delete_user_self_deletion PASSED [ 11%]
tests/test_api_admin.py::TestDeleteUserEndpoint::test_delete_user_admin_protection PASSED [ 11%]
tests/test_api_admin.py::TestDeleteUserEndpoint::test_delete_user_database_error PASSED [ 11%]
tests/test_api_admin.py::TestGuestSessionEndpoints::test_get_guest_session_active PASSED [ 11%]
tests/test_api_admin.py::TestGuestSessionEndpoints::test_get_guest_session_inactive PASSED [ 11%]
tests/test_api_admin.py::TestGuestSessionEndpoints::test_get_guest_session_error PASSED [ 11%]
tests/test_api_admin.py::TestGuestSessionEndpoints::test_create_guest_session_success PASSED [ 11%]
tests/test_api_admin.py::TestGuestSessionEndpoints::test_create_guest_session_already_active PASSED [ 11%]
tests/test_api_admin.py::TestGuestSessionEndpoints::test_create_guest_session_error PASSED [ 11%]
tests/test_api_admin.py::TestGuestSessionEndpoints::test_terminate_guest_session_success PASSED [ 11%]
tests/test_api_admin.py::TestGuestSessionEndpoints::test_terminate_guest_session_not_active PASSED [ 11%]
tests/test_api_admin.py::TestGuestSessionEndpoints::test_terminate_guest_session_error PASSED [ 11%]
tests/test_api_admin.py::TestSystemStatsEndpoint::test_get_system_stats_success PASSED [ 11%]
tests/test_api_admin.py::TestSystemStatsEndpoint::test_get_system_stats_zero_users PASSED [ 11%]
tests/test_api_admin.py::TestSystemStatsEndpoint::test_get_system_stats_database_error PASSED [ 11%]
tests/test_api_admin.py::TestRouterConfiguration::test_admin_router_prefix PASSED [ 11%]
tests/test_api_admin.py::TestRouterConfiguration::test_admin_router_tags PASSED [ 11%]
tests/test_api_admin.py::TestRouterConfiguration::test_admin_router_includes_language_config PASSED [ 11%]
tests/test_api_ai_models.py::TestPydanticModels::test_model_update_request_valid PASSED [ 11%]
tests/test_api_ai_models.py::TestPydanticModels::test_model_update_request_partial PASSED [ 11%]
tests/test_api_ai_models.py::TestPydanticModels::test_model_update_request_priority_validation PASSED [ 11%]
tests/test_api_ai_models.py::TestPydanticModels::test_model_optimization_request_valid PASSED [ 11%]
tests/test_api_ai_models.py::TestPydanticModels::test_model_optimization_request_defaults PASSED [ 11%]
tests/test_api_ai_models.py::TestPydanticModels::test_performance_report_request_valid PASSED [ 11%]
tests/test_api_ai_models.py::TestPydanticModels::test_performance_report_request_defaults PASSED [ 11%]
tests/test_api_ai_models.py::TestFilterFunctions::test_filter_by_provider_with_provider PASSED [ 11%]
tests/test_api_ai_models.py::TestFilterFunctions::test_filter_by_provider_no_provider PASSED [ 11%]
tests/test_api_ai_models.py::TestFilterFunctions::test_filter_by_provider_case_insensitive PASSED [ 12%]
tests/test_api_ai_models.py::TestFilterFunctions::test_filter_by_status_with_status PASSED [ 12%]
tests/test_api_ai_models.py::TestFilterFunctions::test_filter_by_status_no_status PASSED [ 12%]
tests/test_api_ai_models.py::TestFilterFunctions::test_filter_by_status_case_insensitive PASSED [ 12%]
tests/test_api_ai_models.py::TestFilterFunctions::test_filter_by_search_display_name PASSED [ 12%]
tests/test_api_ai_models.py::TestFilterFunctions::test_filter_by_search_model_name PASSED [ 12%]
tests/test_api_ai_models.py::TestFilterFunctions::test_filter_by_search_provider PASSED [ 12%]
tests/test_api_ai_models.py::TestFilterFunctions::test_filter_by_search_no_search PASSED [ 12%]
tests/test_api_ai_models.py::TestFilterFunctions::test_filter_by_search_case_insensitive PASSED [ 12%]
tests/test_api_ai_models.py::TestFilterFunctions::test_filter_by_search_no_matches PASSED [ 12%]
tests/test_api_ai_models.py::TestFilterFunctions::test_apply_all_filters_combined PASSED [ 12%]
tests/test_api_ai_models.py::TestFilterFunctions::test_apply_all_filters_no_filters PASSED [ 12%]
tests/test_api_ai_models.py::TestStatisticsFunctions::test_set_default_date_range_both_provided PASSED [ 12%]
tests/test_api_ai_models.py::TestStatisticsFunctions::test_set_default_date_range_no_dates PASSED [ 12%]
tests/test_api_ai_models.py::TestStatisticsFunctions::test_set_default_date_range_only_end PASSED [ 12%]
tests/test_api_ai_models.py::TestStatisticsFunctions::test_filter_models_by_provider PASSED [ 12%]
tests/test_api_ai_models.py::TestStatisticsFunctions::test_filter_models_by_model_id PASSED [ 12%]
tests/test_api_ai_models.py::TestStatisticsFunctions::test_filter_models_both_filters PASSED [ 12%]
tests/test_api_ai_models.py::TestStatisticsFunctions::test_filter_models_no_filters PASSED [ 12%]
tests/test_api_ai_models.py::TestStatisticsFunctions::test_calculate_summary_stats PASSED [ 12%]
tests/test_api_ai_models.py::TestStatisticsFunctions::test_calculate_summary_stats_empty_models PASSED [ 12%]
tests/test_api_ai_models.py::TestStatisticsFunctions::test_calculate_provider_breakdown PASSED [ 12%]
tests/test_api_ai_models.py::TestStatisticsFunctions::test_calculate_provider_breakdown_averages PASSED [ 12%]
tests/test_api_ai_models.py::TestStatisticsFunctions::test_build_statistics_response PASSED [ 12%]
tests/test_api_ai_models.py::TestGetSystemOverview::test_get_system_overview_success PASSED [ 12%]
tests/test_api_ai_models.py::TestGetSystemOverview::test_get_system_overview_error PASSED [ 12%]
tests/test_api_ai_models.py::TestGetModels::test_get_models_no_filters PASSED [ 12%]
tests/test_api_ai_models.py::TestGetModels::test_get_models_with_category PASSED [ 12%]
tests/test_api_ai_models.py::TestGetModels::test_get_models_enabled_only PASSED [ 12%]
tests/test_api_ai_models.py::TestGetModels::test_get_models_with_provider_filter PASSED [ 12%]
tests/test_api_ai_models.py::TestGetModels::test_get_models_with_search PASSED [ 12%]
tests/test_api_ai_models.py::TestGetModels::test_get_models_error PASSED [ 12%]
tests/test_api_ai_models.py::TestGetModel::test_get_model_success PASSED [ 12%]
tests/test_api_ai_models.py::TestGetModel::test_get_model_not_found PASSED [ 12%]
tests/test_api_ai_models.py::TestGetModel::test_get_model_with_no_performance_report PASSED [ 12%]
tests/test_api_ai_models.py::TestGetModel::test_get_model_service_error PASSED [ 12%]
tests/test_api_ai_models.py::TestUpdateModel::test_update_model_success PASSED [ 12%]
tests/test_api_ai_models.py::TestUpdateModel::test_update_model_not_found PASSED [ 12%]
tests/test_api_ai_models.py::TestUpdateModel::test_update_model_invalid_status PASSED [ 12%]
tests/test_api_ai_models.py::TestUpdateModel::test_update_model_valid_status PASSED [ 12%]
tests/test_api_ai_models.py::TestUpdateModel::test_update_model_update_fails PASSED [ 12%]
tests/test_api_ai_models.py::TestUpdateModel::test_update_model_service_error PASSED [ 12%]
tests/test_api_ai_models.py::TestToggleModel::test_toggle_model_enable PASSED [ 12%]
tests/test_api_ai_models.py::TestToggleModel::test_toggle_model_disable PASSED [ 13%]
tests/test_api_ai_models.py::TestToggleModel::test_toggle_model_not_found PASSED [ 13%]
tests/test_api_ai_models.py::TestToggleModel::test_toggle_model_fails PASSED [ 13%]
tests/test_api_ai_models.py::TestToggleModel::test_toggle_model_service_error PASSED [ 13%]
tests/test_api_ai_models.py::TestSetModelPriority::test_set_priority_success PASSED [ 13%]
tests/test_api_ai_models.py::TestSetModelPriority::test_set_priority_fails PASSED [ 13%]
tests/test_api_ai_models.py::TestSetModelPriority::test_set_priority_service_error PASSED [ 13%]
tests/test_api_ai_models.py::TestGetPerformanceReport::test_get_performance_report_success PASSED [ 13%]
tests/test_api_ai_models.py::TestGetPerformanceReport::test_get_performance_report_not_found PASSED [ 13%]
tests/test_api_ai_models.py::TestGetPerformanceReport::test_get_performance_report_service_error PASSED [ 13%]
tests/test_api_ai_models.py::TestOptimizeModelSelection::test_optimize_success PASSED [ 13%]
tests/test_api_ai_models.py::TestOptimizeModelSelection::test_optimize_no_recommendations PASSED [ 13%]
tests/test_api_ai_models.py::TestOptimizeModelSelection::test_optimize_service_error PASSED [ 13%]
tests/test_api_ai_models.py::TestGetHealthStatus::test_get_health_status_success PASSED [ 13%]
tests/test_api_ai_models.py::TestGetHealthStatus::test_get_health_status_error PASSED [ 13%]
tests/test_api_ai_models.py::TestRunHealthCheck::test_run_health_check_success PASSED [ 13%]
tests/test_api_ai_models.py::TestRunHealthCheck::test_run_health_check_provider_error PASSED [ 13%]
tests/test_api_ai_models.py::TestRunHealthCheck::test_run_health_check_service_error PASSED [ 13%]
tests/test_api_ai_models.py::TestGetUsageStatistics::test_get_usage_stats_default_dates PASSED [ 13%]
tests/test_api_ai_models.py::TestGetUsageStatistics::test_get_usage_stats_with_dates PASSED [ 13%]
tests/test_api_ai_models.py::TestGetUsageStatistics::test_get_usage_stats_with_provider_filter PASSED [ 13%]
tests/test_api_ai_models.py::TestGetUsageStatistics::test_get_usage_stats_with_model_filter PASSED [ 13%]
tests/test_api_ai_models.py::TestGetUsageStatistics::test_get_usage_stats_error PASSED [ 13%]
tests/test_api_ai_models.py::TestResetUsageStatistics::test_reset_stats_without_confirmation PASSED [ 13%]
tests/test_api_ai_models.py::TestResetUsageStatistics::test_reset_stats_specific_model PASSED [ 13%]
tests/test_api_ai_models.py::TestResetUsageStatistics::test_reset_stats_all_models PASSED [ 13%]
tests/test_api_ai_models.py::TestResetUsageStatistics::test_reset_stats_model_not_found PASSED [ 13%]
tests/test_api_ai_models.py::TestResetUsageStatistics::test_reset_stats_service_error PASSED [ 13%]
tests/test_api_ai_models.py::TestExportModelData::test_export_json_with_stats PASSED [ 13%]
tests/test_api_ai_models.py::TestExportModelData::test_export_json_without_stats PASSED [ 13%]
tests/test_api_ai_models.py::TestExportModelData::test_export_csv_format PASSED [ 13%]
tests/test_api_ai_models.py::TestExportModelData::test_export_service_error PASSED [ 13%]
tests/test_api_ai_models.py::TestGetModelCategories::test_get_categories_success PASSED [ 13%]
tests/test_api_ai_models.py::TestGetModelCategories::test_get_categories_error PASSED [ 13%]
tests/test_api_ai_models.py::TestGetProviders::test_get_providers_success PASSED [ 13%]
tests/test_api_ai_models.py::TestGetProviders::test_get_providers_with_counts PASSED [ 13%]
tests/test_api_ai_models.py::TestGetProviders::test_get_providers_service_error PASSED [ 13%]
tests/test_api_ai_models.py::TestMissingBranchCoverage::test_optimize_model_not_found PASSED [ 13%]
tests/test_api_ai_models.py::TestMissingBranchCoverage::test_calculate_provider_breakdown_existing_provider PASSED [ 13%]
tests/test_api_ai_models.py::TestMissingBranchCoverage::test_calculate_provider_breakdown_zero_models PASSED [ 13%]
tests/test_api_ai_models.py::TestMissingBranchCoverage::test_calculate_provider_breakdown_multiple_providers PASSED [ 13%]
tests/test_api_ai_models.py::TestMissingBranchCoverage::test_export_csv_complete_flow PASSED [ 13%]
tests/test_api_ai_models.py::TestMissingBranchCoverage::test_export_invalid_format_fallback PASSED [ 14%]
tests/test_api_auth.py::TestLoginSuccess::test_login_valid_credentials PASSED [ 14%]
tests/test_api_auth.py::TestLoginSuccess::test_login_no_password PASSED  [ 14%]
tests/test_api_auth.py::TestLoginSuccess::test_login_user_with_null_role PASSED [ 14%]
tests/test_api_auth.py::TestLoginFailure::test_login_invalid_credentials PASSED [ 14%]
tests/test_api_auth.py::TestLoginFailure::test_login_nonexistent_user PASSED [ 14%]
tests/test_api_auth.py::TestRegisterSuccess::test_register_with_password PASSED [ 14%]
tests/test_api_auth.py::TestRegisterSuccess::test_register_without_password PASSED [ 14%]
tests/test_api_auth.py::TestRegisterSuccess::test_register_with_parent_role PASSED [ 14%]
tests/test_api_auth.py::TestRegisterSuccess::test_register_with_invalid_role_defaults_to_child PASSED [ 14%]
tests/test_api_auth.py::TestRegisterFailure::test_register_duplicate_user_id PASSED [ 14%]
tests/test_api_auth.py::TestGetProfile::test_get_profile_success PASSED  [ 14%]
tests/test_api_auth.py::TestGetProfile::test_get_profile_null_role PASSED [ 14%]
tests/test_api_auth.py::TestUpdateProfile::test_update_profile_all_fields PASSED [ 14%]
tests/test_api_auth.py::TestUpdateProfile::test_update_profile_partial_fields PASSED [ 14%]
tests/test_api_auth.py::TestUpdateProfile::test_update_profile_no_fields PASSED [ 14%]
tests/test_api_auth.py::TestListUsers::test_list_users_as_parent PASSED  [ 14%]
tests/test_api_auth.py::TestListUsers::test_list_users_as_admin PASSED   [ 14%]
tests/test_api_auth.py::TestListUsers::test_list_users_as_child_forbidden PASSED [ 14%]
tests/test_api_auth.py::TestListUsers::test_list_users_with_null_role PASSED [ 14%]
tests/test_api_auth.py::TestLogout::test_logout_success PASSED           [ 14%]
tests/test_api_auth.py::TestGetMe::test_get_me_authenticated PASSED      [ 14%]
tests/test_api_auth.py::TestGetMe::test_get_me_unauthenticated PASSED    [ 14%]
tests/test_api_auth.py::TestGetMe::test_get_me_with_null_role PASSED     [ 14%]
tests/test_api_content.py::TestContentTypeEnum::test_content_type_enum_values PASSED [ 14%]
tests/test_api_content.py::TestContentTypeEnum::test_content_type_enum_from_string PASSED [ 14%]
tests/test_api_content.py::TestMaterialTypeEnum::test_material_type_enum_values PASSED [ 14%]
tests/test_api_content.py::TestMaterialTypeEnum::test_material_type_enum_from_string PASSED [ 14%]
tests/test_api_content.py::TestProcessContentRequest::test_process_content_request_valid PASSED [ 14%]
tests/test_api_content.py::TestProcessContentRequest::test_process_content_request_defaults PASSED [ 14%]
tests/test_api_content.py::TestProcessContentRequest::test_process_content_request_invalid_url PASSED [ 14%]
tests/test_api_content.py::TestProcessingStatusResponse::test_processing_status_response_valid PASSED [ 14%]
tests/test_api_content.py::TestProcessingStatusResponse::test_processing_status_response_with_error PASSED [ 14%]
tests/test_api_content.py::TestContentLibraryItem::test_content_library_item_valid PASSED [ 14%]
tests/test_api_content.py::TestLearningMaterialResponse::test_learning_material_response_valid PASSED [ 14%]
tests/test_api_content.py::TestProcessedContentResponse::test_processed_content_response_valid PASSED [ 14%]
tests/test_api_content.py::TestHelperFunctions::test_apply_content_type_filter_with_filter PASSED [ 14%]
tests/test_api_content.py::TestHelperFunctions::test_apply_content_type_filter_without_filter PASSED [ 14%]
tests/test_api_content.py::TestHelperFunctions::test_apply_difficulty_filter_with_filter PASSED [ 14%]
tests/test_api_content.py::TestHelperFunctions::test_apply_difficulty_filter_without_filter PASSED [ 14%]
tests/test_api_content.py::TestHelperFunctions::test_apply_language_filter_with_filter PASSED [ 14%]
tests/test_api_content.py::TestHelperFunctions::test_apply_language_filter_without_filter PASSED [ 14%]
tests/test_api_content.py::TestHelperFunctions::test_apply_language_filter_missing_language_field PASSED [ 15%]
tests/test_api_content.py::TestHelperFunctions::test_apply_pagination PASSED [ 15%]
tests/test_api_content.py::TestHelperFunctions::test_apply_pagination_offset_zero PASSED [ 15%]
tests/test_api_content.py::TestHelperFunctions::test_apply_pagination_beyond_length PASSED [ 15%]
tests/test_api_content.py::TestHelperFunctions::test_convert_to_response_items PASSED [ 15%]
tests/test_api_content.py::TestHelperFunctions::test_convert_to_response_items_empty PASSED [ 15%]
tests/test_api_content.py::TestProcessContentFromUrl::test_process_content_from_url_success PASSED [ 15%]
tests/test_api_content.py::TestProcessContentFromUrl::test_process_content_from_url_error PASSED [ 15%]
tests/test_api_content.py::TestProcessUploadedFile::test_process_uploaded_file_success_pdf PASSED [ 15%]
tests/test_api_content.py::TestProcessUploadedFile::test_process_uploaded_file_success_docx PASSED [ 15%]
tests/test_api_content.py::TestProcessUploadedFile::test_process_uploaded_file_success_txt PASSED [ 15%]
tests/test_api_content.py::TestProcessUploadedFile::test_process_uploaded_file_invalid_extension PASSED [ 15%]
tests/test_api_content.py::TestProcessUploadedFile::test_process_uploaded_file_processing_error PASSED [ 15%]
tests/test_api_content.py::TestGetProcessingStatus::test_get_processing_status_success PASSED [ 15%]
tests/test_api_content.py::TestGetProcessingStatus::test_get_processing_status_not_found PASSED [ 15%]
tests/test_api_content.py::TestGetProcessingStatus::test_get_processing_status_reraises_http_exception PASSED [ 15%]
tests/test_api_content.py::TestGetProcessingStatus::test_get_processing_status_general_error PASSED [ 15%]
tests/test_api_content.py::TestGetProcessedContent::test_get_processed_content_success PASSED [ 15%]
tests/test_api_content.py::TestGetProcessedContent::test_get_processed_content_not_found PASSED [ 15%]
tests/test_api_content.py::TestGetProcessedContent::test_get_processed_content_reraises_http_exception PASSED [ 15%]
tests/test_api_content.py::TestGetProcessedContent::test_get_processed_content_general_error PASSED [ 15%]
tests/test_api_content.py::TestGetContentLibrary::test_get_content_library_success PASSED [ 15%]
tests/test_api_content.py::TestGetContentLibrary::test_get_content_library_with_content_type_filter PASSED [ 15%]
tests/test_api_content.py::TestGetContentLibrary::test_get_content_library_with_difficulty_filter PASSED [ 15%]
tests/test_api_content.py::TestGetContentLibrary::test_get_content_library_with_language_filter PASSED [ 15%]
tests/test_api_content.py::TestGetContentLibrary::test_get_content_library_with_pagination PASSED [ 15%]
tests/test_api_content.py::TestGetContentLibrary::test_get_content_library_error PASSED [ 15%]
tests/test_api_content.py::TestSearchContent::test_search_content_success PASSED [ 15%]
tests/test_api_content.py::TestSearchContent::test_search_content_with_content_type_filter PASSED [ 15%]
tests/test_api_content.py::TestSearchContent::test_search_content_with_all_filters PASSED [ 15%]
tests/test_api_content.py::TestSearchContent::test_search_content_with_limit PASSED [ 15%]
tests/test_api_content.py::TestSearchContent::test_search_content_error PASSED [ 15%]
tests/test_api_content.py::TestGetLearningMaterial::test_get_learning_material_success PASSED [ 15%]
tests/test_api_content.py::TestGetLearningMaterial::test_get_learning_material_not_found PASSED [ 15%]
tests/test_api_content.py::TestGetLearningMaterial::test_get_learning_material_reraises_http_exception PASSED [ 15%]
tests/test_api_content.py::TestGetLearningMaterial::test_get_learning_material_general_error PASSED [ 15%]
tests/test_api_content.py::TestGetLearningMaterial::test_get_learning_material_search_multiple_contents PASSED [ 15%]
tests/test_api_content.py::TestDeleteContent::test_delete_content_success PASSED [ 15%]
tests/test_api_content.py::TestDeleteContent::test_delete_content_not_in_library PASSED [ 15%]
tests/test_api_content.py::TestDeleteContent::test_delete_content_without_progress PASSED [ 15%]
tests/test_api_content.py::TestDeleteContent::test_delete_content_reraises_http_exception PASSED [ 15%]
tests/test_api_content.py::TestDeleteContent::test_delete_content_general_error PASSED [ 15%]
tests/test_api_content.py::TestGetContentStats::test_get_content_stats_success PASSED [ 15%]
tests/test_api_content.py::TestGetContentStats::test_get_content_stats_empty_library PASSED [ 16%]
tests/test_api_content.py::TestGetContentStats::test_get_content_stats_error PASSED [ 16%]
tests/test_api_content.py::TestContentServiceHealth::test_content_service_health_healthy PASSED [ 16%]
tests/test_api_content.py::TestContentServiceHealth::test_content_service_health_multiple_active_statuses PASSED [ 16%]
tests/test_api_content.py::TestContentServiceHealth::test_content_service_health_unhealthy PASSED [ 16%]
tests/test_api_content.py::TestRouterConfiguration::test_router_exists PASSED [ 16%]
tests/test_api_content.py::TestRouterConfiguration::test_router_has_expected_routes PASSED [ 16%]
tests/test_api_conversations.py::TestGetSupportedLanguages::test_get_languages_success PASSED [ 16%]
tests/test_api_conversations.py::TestGetSupportedLanguages::test_get_languages_includes_all_major_languages PASSED [ 16%]
tests/test_api_conversations.py::TestGetSupportedLanguages::test_all_advertised_languages_have_fallbacks PASSED [ 16%]
tests/test_api_conversations.py::TestGetConversationHistory::test_get_history_requires_auth PASSED [ 16%]
tests/test_api_conversations.py::TestGetConversationHistory::test_get_history_success PASSED [ 16%]
tests/test_api_conversations.py::TestGetConversationHistory::test_get_history_returns_demo_data PASSED [ 16%]
tests/test_api_conversations.py::TestGetConversationStats::test_get_stats_requires_auth PASSED [ 16%]
tests/test_api_conversations.py::TestGetConversationStats::test_get_stats_success PASSED [ 16%]
tests/test_api_conversations.py::TestGetConversationStats::test_get_stats_returns_demo_statistics PASSED [ 16%]
tests/test_api_conversations.py::TestClearConversation::test_clear_conversation_requires_auth PASSED [ 16%]
tests/test_api_conversations.py::TestClearConversation::test_clear_conversation_success PASSED [ 16%]
tests/test_api_conversations.py::TestClearConversation::test_clear_conversation_with_special_characters PASSED [ 16%]
tests/test_api_conversations.py::TestHelperFunctions::test_parse_language_and_provider_with_provider PASSED [ 16%]
tests/test_api_conversations.py::TestHelperFunctions::test_parse_language_and_provider_without_provider PASSED [ 16%]
tests/test_api_conversations.py::TestHelperFunctions::test_parse_language_and_provider_empty_string PASSED [ 16%]
tests/test_api_conversations.py::TestHelperFunctions::test_generate_conversation_ids PASSED [ 16%]
tests/test_api_conversations.py::TestHelperFunctions::test_get_fallback_texts_contains_all_languages PASSED [ 16%]
tests/test_api_conversations.py::TestHelperFunctions::test_get_demo_fallback_responses_contains_all_languages PASSED [ 16%]
tests/test_api_conversations.py::TestSpeechToText::test_speech_to_text_requires_auth PASSED [ 16%]
tests/test_api_conversations.py::TestSpeechToText::test_speech_to_text_success PASSED [ 16%]
tests/test_api_conversations.py::TestSpeechToText::test_speech_to_text_no_audio_data PASSED [ 16%]
tests/test_api_conversations.py::TestSpeechToText::test_speech_to_text_with_different_language PASSED [ 16%]
tests/test_api_conversations.py::TestSpeechToText::test_speech_to_text_processing_error PASSED [ 16%]
tests/test_api_conversations.py::TestSpeechToText::test_speech_to_text_default_language PASSED [ 16%]
tests/test_api_conversations.py::TestTextToSpeech::test_text_to_speech_requires_auth PASSED [ 16%]
tests/test_api_conversations.py::TestTextToSpeech::test_text_to_speech_success PASSED [ 16%]
tests/test_api_conversations.py::TestTextToSpeech::test_text_to_speech_no_text PASSED [ 16%]
tests/test_api_conversations.py::TestTextToSpeech::test_text_to_speech_with_different_language PASSED [ 16%]
tests/test_api_conversations.py::TestTextToSpeech::test_text_to_speech_default_values PASSED [ 16%]
tests/test_api_conversations.py::TestTextToSpeech::test_text_to_speech_empty_text PASSED [ 16%]
tests/test_api_conversations.py::TestTextToSpeech::test_text_to_speech_with_standard_voice PASSED [ 16%]
tests/test_api_conversations.py::TestChatHelperFunctionsAdvanced::test_get_ai_response_no_service_available PASSED [ 16%]
tests/test_api_conversations.py::TestChatHelperFunctionsAdvanced::test_generate_speech_if_requested_success PASSED [ 16%]
tests/test_api_conversations.py::TestChatHelperFunctionsAdvanced::test_generate_speech_if_requested_failure PASSED [ 16%]
tests/test_api_conversations.py::TestChatHelperFunctionsAdvanced::test_generate_speech_when_not_requested PASSED [ 16%]
tests/test_api_conversations.py::TestChatEndpoint::test_chat_requires_auth PASSED [ 17%]
tests/test_api_conversations.py::TestChatEndpoint::test_chat_basic_message PASSED [ 17%]
tests/test_api_conversations.py::TestChatEndpoint::test_chat_with_different_languages PASSED [ 17%]
tests/test_api_conversations.py::TestChatEndpoint::test_chat_with_conversation_history PASSED [ 17%]
tests/test_api_conversations.py::TestChatEndpoint::test_chat_with_speech_enabled PASSED [ 17%]
tests/test_api_conversations.py::TestChatEndpoint::test_chat_language_only_without_provider PASSED [ 17%]
tests/test_api_conversations.py::TestChatEndpoint::test_chat_empty_message PASSED [ 17%]
tests/test_api_conversations.py::TestChatEndpoint::test_chat_default_language PASSED [ 17%]
tests/test_api_conversations.py::TestChatEndpoint::test_chat_response_structure PASSED [ 17%]
tests/test_api_conversations.py::TestChatEndpoint::test_chat_generates_unique_message_ids PASSED [ 17%]
tests/test_api_conversations.py::TestChatEndpoint::test_chat_with_special_characters PASSED [ 17%]
tests/test_api_conversations.py::TestChatEndpoint::test_chat_cost_estimate PASSED [ 17%]
tests/test_api_conversations.py::TestChatEndpoint::test_chat_uses_fallback_on_ai_failure PASSED [ 17%]
tests/test_api_conversations.py::TestChatEndpoint::test_chat_outer_exception_handler PASSED [ 17%]
tests/test_api_conversations.py::TestSTTExceptionHandler::test_speech_to_text_exception_with_error_field PASSED [ 17%]
tests/test_api_conversations.py::TestGetAvailableVoices::test_get_available_voices_all PASSED [ 17%]
tests/test_api_conversations.py::TestGetAvailableVoices::test_get_available_voices_filtered_by_language PASSED [ 17%]
tests/test_api_conversations.py::TestGetAvailableVoices::test_get_available_voices_empty_result PASSED [ 17%]
tests/test_api_conversations.py::TestGetAvailableVoices::test_get_available_voices_no_service PASSED [ 17%]
tests/test_api_conversations.py::TestGetAvailableVoices::test_get_available_voices_service_error PASSED [ 17%]
tests/test_api_conversations.py::TestGetAvailableVoices::test_get_available_voices_includes_all_metadata PASSED [ 17%]
tests/test_api_conversations.py::TestGetAvailableVoices::test_get_available_voices_multiple_languages PASSED [ 17%]
tests/test_api_conversations.py::TestTextToSpeechWithVoiceSelection::test_tts_with_specific_voice_persona PASSED [ 17%]
tests/test_api_conversations.py::TestTextToSpeechWithVoiceSelection::test_tts_with_female_voice_spanish PASSED [ 17%]
tests/test_api_conversations.py::TestTextToSpeechWithVoiceSelection::test_tts_with_male_voice_spanish PASSED [ 17%]
tests/test_api_conversations.py::TestTextToSpeechWithVoiceSelection::test_tts_with_female_voice_italian PASSED [ 17%]
tests/test_api_conversations.py::TestTextToSpeechWithVoiceSelection::test_tts_with_male_voice_italian PASSED [ 17%]
tests/test_api_conversations.py::TestTextToSpeechWithVoiceSelection::test_tts_backwards_compatibility_no_voice PASSED [ 17%]
tests/test_api_conversations.py::TestTextToSpeechWithVoiceSelection::test_tts_voice_with_all_parameters PASSED [ 17%]
tests/test_api_conversations.py::TestTextToSpeechWithVoiceSelection::test_tts_voice_different_accents_spanish PASSED [ 17%]
tests/test_api_conversations.py::TestTextToSpeechWithVoiceSelection::test_tts_voice_parameter_none_explicitly PASSED [ 17%]
tests/test_api_conversations.py::TestTextToSpeechWithVoiceSelection::test_tts_with_voice_error_handling PASSED [ 17%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_parse_user_roles_with_roles PASSED [ 17%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_parse_user_roles_single_role PASSED [ 17%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_parse_user_roles_none PASSED [ 17%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_parse_user_roles_empty_string PASSED [ 17%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_get_feature_or_404_success PASSED [ 17%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_get_feature_or_404_not_found PASSED [ 17%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_check_global_disabled_true PASSED [ 17%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_check_global_disabled_false PASSED [ 17%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_check_global_disabled_experimental_status PASSED [ 17%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_check_admin_required_with_admin_role PASSED [ 17%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_check_admin_required_without_admin_role PASSED [ 17%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_check_admin_required_no_roles PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_check_admin_required_not_required PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_check_user_specific_access_user_in_list PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_check_user_specific_access_user_not_in_list PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_check_user_specific_access_non_user_specific_scope PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_check_role_based_access_role_targeted PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_check_role_based_access_role_not_targeted PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_check_role_based_access_no_roles PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_check_role_based_access_non_role_based_scope PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_get_default_status_enabled PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_get_default_status_disabled PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_determine_status_reason_globally_disabled PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_determine_status_reason_admin_required PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_determine_status_reason_not_in_target_users PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_determine_status_reason_role_not_targeted PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_determine_status_reason_default_enabled PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_determine_status_reason_default_disabled PASSED [ 18%]
tests/test_api_feature_toggles.py::TestHelperFunctions::test_build_status_response PASSED [ 18%]
tests/test_api_feature_toggles.py::TestListFeaturesEndpoint::test_list_features_success_no_filters PASSED [ 18%]
tests/test_api_feature_toggles.py::TestListFeaturesEndpoint::test_list_features_with_filters PASSED [ 18%]
tests/test_api_feature_toggles.py::TestListFeaturesEndpoint::test_list_features_pagination PASSED [ 18%]
tests/test_api_feature_toggles.py::TestListFeaturesEndpoint::test_list_features_empty_result PASSED [ 18%]
tests/test_api_feature_toggles.py::TestListFeaturesEndpoint::test_list_features_service_exception PASSED [ 18%]
tests/test_api_feature_toggles.py::TestGetFeatureEndpoint::test_get_feature_success PASSED [ 18%]
tests/test_api_feature_toggles.py::TestGetFeatureEndpoint::test_get_feature_not_found PASSED [ 18%]
tests/test_api_feature_toggles.py::TestGetFeatureEndpoint::test_get_feature_service_exception PASSED [ 18%]
tests/test_api_feature_toggles.py::TestGetUserFeaturesEndpoint::test_get_user_features_success PASSED [ 18%]
tests/test_api_feature_toggles.py::TestGetUserFeaturesEndpoint::test_get_user_features_no_roles PASSED [ 18%]
tests/test_api_feature_toggles.py::TestGetUserFeaturesEndpoint::test_get_user_features_exception PASSED [ 18%]
tests/test_api_feature_toggles.py::TestGetFeatureStatisticsEndpoint::test_get_feature_statistics_success PASSED [ 18%]
tests/test_api_feature_toggles.py::TestGetFeatureStatisticsEndpoint::test_get_feature_statistics_exception PASSED [ 18%]
tests/test_api_feature_toggles.py::TestCheckUserFeatureStatusEndpoint::test_check_user_feature_status_enabled PASSED [ 18%]
tests/test_api_feature_toggles.py::TestCheckUserFeatureStatusEndpoint::test_check_user_feature_status_disabled PASSED [ 18%]
tests/test_api_feature_toggles.py::TestCheckUserFeatureStatusEndpoint::test_check_user_feature_status_not_found PASSED [ 18%]
tests/test_api_feature_toggles.py::TestCheckUserFeatureStatusEndpoint::test_check_user_feature_status_exception PASSED [ 18%]
tests/test_api_feature_toggles.py::TestPublicCheckFeatureEndpoint::test_public_check_feature_authenticated_user PASSED [ 18%]
tests/test_api_feature_toggles.py::TestPublicCheckFeatureEndpoint::test_public_check_feature_unauthenticated_user PASSED [ 18%]
tests/test_api_feature_toggles.py::TestPublicCheckFeatureEndpoint::test_public_check_feature_exception PASSED [ 18%]
tests/test_api_feature_toggles.py::TestCreateFeatureEndpoint::test_create_feature_success PASSED [ 18%]
tests/test_api_feature_toggles.py::TestCreateFeatureEndpoint::test_create_feature_validation_error PASSED [ 18%]
tests/test_api_feature_toggles.py::TestCreateFeatureEndpoint::test_create_feature_service_exception PASSED [ 18%]
tests/test_api_feature_toggles.py::TestUpdateFeatureEndpoint::test_update_feature_success PASSED [ 18%]
tests/test_api_feature_toggles.py::TestUpdateFeatureEndpoint::test_update_feature_not_found PASSED [ 19%]
tests/test_api_feature_toggles.py::TestUpdateFeatureEndpoint::test_update_feature_validation_error PASSED [ 19%]
tests/test_api_feature_toggles.py::TestUpdateFeatureEndpoint::test_update_feature_service_exception PASSED [ 19%]
tests/test_api_feature_toggles.py::TestDeleteFeatureEndpoint::test_delete_feature_success PASSED [ 19%]
tests/test_api_feature_toggles.py::TestDeleteFeatureEndpoint::test_delete_feature_not_found PASSED [ 19%]
tests/test_api_feature_toggles.py::TestDeleteFeatureEndpoint::test_delete_feature_service_exception PASSED [ 19%]
tests/test_api_feature_toggles.py::TestEnableFeatureEndpoint::test_enable_feature_success PASSED [ 19%]
tests/test_api_feature_toggles.py::TestEnableFeatureEndpoint::test_enable_feature_not_found PASSED [ 19%]
tests/test_api_feature_toggles.py::TestEnableFeatureEndpoint::test_enable_feature_service_exception PASSED [ 19%]
tests/test_api_feature_toggles.py::TestDisableFeatureEndpoint::test_disable_feature_success PASSED [ 19%]
tests/test_api_feature_toggles.py::TestDisableFeatureEndpoint::test_disable_feature_not_found PASSED [ 19%]
tests/test_api_feature_toggles.py::TestDisableFeatureEndpoint::test_disable_feature_service_exception PASSED [ 19%]
tests/test_api_feature_toggles.py::TestSetUserFeatureAccessEndpoint::test_set_user_feature_access_grant PASSED [ 19%]
tests/test_api_feature_toggles.py::TestSetUserFeatureAccessEndpoint::test_set_user_feature_access_revoke PASSED [ 19%]
tests/test_api_feature_toggles.py::TestSetUserFeatureAccessEndpoint::test_set_user_feature_access_with_expiry PASSED [ 19%]
tests/test_api_feature_toggles.py::TestSetUserFeatureAccessEndpoint::test_set_user_feature_access_not_found PASSED [ 19%]
tests/test_api_feature_toggles.py::TestSetUserFeatureAccessEndpoint::test_set_user_feature_access_service_exception PASSED [ 19%]
tests/test_api_feature_toggles.py::TestBulkUpdateFeaturesEndpoint::test_bulk_update_features_all_success PASSED [ 19%]
tests/test_api_feature_toggles.py::TestBulkUpdateFeaturesEndpoint::test_bulk_update_features_partial_success PASSED [ 19%]
tests/test_api_feature_toggles.py::TestBulkUpdateFeaturesEndpoint::test_bulk_update_features_with_exceptions PASSED [ 19%]
tests/test_api_feature_toggles.py::TestBulkUpdateFeaturesEndpoint::test_bulk_update_features_service_exception PASSED [ 19%]
tests/test_api_feature_toggles.py::TestFeatureToggleWorkflows::test_complete_feature_lifecycle PASSED [ 19%]
tests/test_api_feature_toggles.py::TestFeatureToggleWorkflows::test_feature_access_management_workflow PASSED [ 19%]
tests/test_api_feature_toggles.py::TestFeatureToggleWorkflows::test_feature_statistics_workflow PASSED [ 19%]
tests/test_api_language_config.py::TestPydanticModels::test_voice_model_response_creation PASSED [ 19%]
tests/test_api_language_config.py::TestPydanticModels::test_language_config_response_creation PASSED [ 19%]
tests/test_api_language_config.py::TestPydanticModels::test_language_config_update_all_fields PASSED [ 19%]
tests/test_api_language_config.py::TestPydanticModels::test_language_config_update_partial_fields PASSED [ 19%]
tests/test_api_language_config.py::TestPydanticModels::test_voice_model_update_all_fields PASSED [ 19%]
tests/test_api_language_config.py::TestPydanticModels::test_voice_model_update_partial_fields PASSED [ 19%]
tests/test_api_language_config.py::TestPydanticModels::test_feature_toggle_response_creation PASSED [ 19%]
tests/test_api_language_config.py::TestPydanticModels::test_feature_toggle_update_all_fields PASSED [ 19%]
tests/test_api_language_config.py::TestPydanticModels::test_feature_toggle_update_partial_fields PASSED [ 19%]
tests/test_api_language_config.py::TestPydanticModels::test_language_config_response_optional_native_name PASSED [ 19%]
tests/test_api_language_config.py::TestPydanticModels::test_feature_toggle_response_optional_description PASSED [ 19%]
tests/test_api_language_config.py::TestHelperFunctions::test_validate_language_exists_success PASSED [ 19%]
tests/test_api_language_config.py::TestHelperFunctions::test_validate_language_exists_not_found PASSED [ 19%]
tests/test_api_language_config.py::TestHelperFunctions::test_check_config_exists_true PASSED [ 19%]
tests/test_api_language_config.py::TestHelperFunctions::test_check_config_exists_false PASSED [ 19%]
tests/test_api_language_config.py::TestHelperFunctions::test_build_update_fields_all_fields PASSED [ 19%]
tests/test_api_language_config.py::TestHelperFunctions::test_build_update_fields_partial_fields PASSED [ 19%]
tests/test_api_language_config.py::TestHelperFunctions::test_build_update_fields_no_fields PASSED [ 19%]
tests/test_api_language_config.py::TestHelperFunctions::test_execute_config_update_existing_config PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_execute_config_update_new_config PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_build_config_response_with_update_data PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_build_config_response_with_none_values PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_validate_voices_directory_exists PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_validate_voices_directory_not_exists PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_get_existing_models_with_models PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_get_existing_models_empty PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_get_language_mapping PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_determine_quality_level_high PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_determine_quality_level_low PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_determine_quality_level_medium_default PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_insert_voice_model_with_config_file PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_insert_voice_model_without_config_file PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_insert_voice_model_unknown_language_defaults_to_en PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_process_voice_models_new_models PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_process_voice_models_skip_existing PASSED [ 20%]
tests/test_api_language_config.py::TestHelperFunctions::test_process_voice_models_skip_corrupt_files PASSED [ 20%]
tests/test_api_language_config.py::TestGetAllLanguageConfigurations::test_get_all_configurations_success PASSED [ 20%]
tests/test_api_language_config.py::TestGetAllLanguageConfigurations::test_get_all_configurations_multiple_languages PASSED [ 20%]
tests/test_api_language_config.py::TestGetAllLanguageConfigurations::test_get_all_configurations_with_invalid_json_metadata PASSED [ 20%]
tests/test_api_language_config.py::TestGetAllLanguageConfigurations::test_get_all_configurations_with_none_metadata PASSED [ 20%]
tests/test_api_language_config.py::TestGetAllLanguageConfigurations::test_get_all_configurations_database_error PASSED [ 20%]
tests/test_api_language_config.py::TestGetAllLanguageConfigurations::test_get_all_configurations_empty_result PASSED [ 20%]
tests/test_api_language_config.py::TestGetFeatureToggles::test_get_feature_toggles_all PASSED [ 20%]
tests/test_api_language_config.py::TestGetFeatureToggles::test_get_feature_toggles_filtered_by_category PASSED [ 20%]
tests/test_api_language_config.py::TestGetFeatureToggles::test_get_feature_toggles_invalid_json_configuration PASSED [ 20%]
tests/test_api_language_config.py::TestGetFeatureToggles::test_get_feature_toggles_none_configuration PASSED [ 20%]
tests/test_api_language_config.py::TestGetFeatureToggles::test_get_feature_toggles_database_error PASSED [ 20%]
tests/test_api_language_config.py::TestGetFeatureToggles::test_get_feature_toggles_empty_result PASSED [ 20%]
tests/test_api_language_config.py::TestUpdateLanguageConfiguration::test_update_configuration_success_existing PASSED [ 20%]
tests/test_api_language_config.py::TestUpdateLanguageConfiguration::test_update_configuration_success_new PASSED [ 20%]
tests/test_api_language_config.py::TestUpdateLanguageConfiguration::test_update_configuration_language_not_found PASSED [ 20%]
tests/test_api_language_config.py::TestUpdateLanguageConfiguration::test_update_configuration_no_fields_to_update PASSED [ 20%]
tests/test_api_language_config.py::TestUpdateLanguageConfiguration::test_update_configuration_database_error PASSED [ 20%]
tests/test_api_language_config.py::TestSyncVoiceModels::test_sync_voice_models_success PASSED [ 20%]
tests/test_api_language_config.py::TestSyncVoiceModels::test_sync_voice_models_directory_not_found PASSED [ 20%]
tests/test_api_language_config.py::TestSyncVoiceModels::test_sync_voice_models_database_error PASSED [ 20%]
tests/test_api_language_config.py::TestSyncVoiceModels::test_sync_voice_models_no_new_models PASSED [ 20%]
tests/test_api_language_config.py::TestIntegrationWorkflows::test_complete_language_management_workflow PASSED [ 20%]
tests/test_api_language_config.py::TestIntegrationWorkflows::test_feature_toggle_retrieval_workflow PASSED [ 20%]
tests/test_api_language_config.py::TestIntegrationWorkflows::test_voice_model_sync_workflow PASSED [ 20%]
tests/test_api_language_config.py::TestRouterConfiguration::test_router_prefix PASSED [ 20%]
tests/test_api_language_config.py::TestRouterConfiguration::test_router_tags PASSED [ 21%]
tests/test_api_learning_analytics.py::TestPydanticEnums::test_item_type_enum_values PASSED [ 21%]
tests/test_api_learning_analytics.py::TestPydanticEnums::test_session_type_enum_values PASSED [ 21%]
tests/test_api_learning_analytics.py::TestPydanticEnums::test_review_result_enum_values PASSED [ 21%]
tests/test_api_learning_analytics.py::TestPydanticModels::test_create_learning_item_request_valid PASSED [ 21%]
tests/test_api_learning_analytics.py::TestPydanticModels::test_create_learning_item_request_defaults PASSED [ 21%]
tests/test_api_learning_analytics.py::TestPydanticModels::test_review_item_request_valid PASSED [ 21%]
tests/test_api_learning_analytics.py::TestPydanticModels::test_review_item_request_defaults PASSED [ 21%]
tests/test_api_learning_analytics.py::TestPydanticModels::test_start_session_request_valid PASSED [ 21%]
tests/test_api_learning_analytics.py::TestPydanticModels::test_start_session_request_defaults PASSED [ 21%]
tests/test_api_learning_analytics.py::TestPydanticModels::test_end_session_request_valid PASSED [ 21%]
tests/test_api_learning_analytics.py::TestPydanticModels::test_end_session_request_defaults PASSED [ 21%]
tests/test_api_learning_analytics.py::TestPydanticModels::test_create_goal_request_valid PASSED [ 21%]
tests/test_api_learning_analytics.py::TestPydanticModels::test_create_goal_request_defaults PASSED [ 21%]
tests/test_api_learning_analytics.py::TestPydanticModels::test_update_config_request_all_fields PASSED [ 21%]
tests/test_api_learning_analytics.py::TestPydanticModels::test_update_config_request_none_values PASSED [ 21%]
tests/test_api_learning_analytics.py::TestSpacedRepetitionEndpoints::test_create_learning_item_success PASSED [ 21%]
tests/test_api_learning_analytics.py::TestSpacedRepetitionEndpoints::test_create_learning_item_exception PASSED [ 21%]
tests/test_api_learning_analytics.py::TestSpacedRepetitionEndpoints::test_review_item_success PASSED [ 21%]
tests/test_api_learning_analytics.py::TestSpacedRepetitionEndpoints::test_review_item_not_found PASSED [ 21%]
tests/test_api_learning_analytics.py::TestSpacedRepetitionEndpoints::test_review_item_exception PASSED [ 21%]
tests/test_api_learning_analytics.py::TestSpacedRepetitionEndpoints::test_get_due_items_success PASSED [ 21%]
tests/test_api_learning_analytics.py::TestSpacedRepetitionEndpoints::test_get_due_items_empty PASSED [ 21%]
tests/test_api_learning_analytics.py::TestSpacedRepetitionEndpoints::test_get_due_items_exception PASSED [ 21%]
tests/test_api_learning_analytics.py::TestLearningSessionEndpoints::test_start_learning_session_success PASSED [ 21%]
tests/test_api_learning_analytics.py::TestLearningSessionEndpoints::test_start_learning_session_exception PASSED [ 21%]
tests/test_api_learning_analytics.py::TestLearningSessionEndpoints::test_end_learning_session_success PASSED [ 21%]
tests/test_api_learning_analytics.py::TestLearningSessionEndpoints::test_end_learning_session_not_found PASSED [ 21%]
tests/test_api_learning_analytics.py::TestLearningSessionEndpoints::test_end_learning_session_exception PASSED [ 21%]
tests/test_api_learning_analytics.py::TestAnalyticsEndpoints::test_get_user_analytics_success PASSED [ 21%]
tests/test_api_learning_analytics.py::TestAnalyticsEndpoints::test_get_user_analytics_exception PASSED [ 21%]
tests/test_api_learning_analytics.py::TestAnalyticsEndpoints::test_get_system_analytics_success PASSED [ 21%]
tests/test_api_learning_analytics.py::TestAnalyticsEndpoints::test_get_system_analytics_exception PASSED [ 21%]
tests/test_api_learning_analytics.py::TestGoalsManagementEndpoints::test_create_learning_goal_success PASSED [ 21%]
tests/test_api_learning_analytics.py::TestGoalsManagementEndpoints::test_create_learning_goal_exception PASSED [ 21%]
tests/test_api_learning_analytics.py::TestGoalsManagementEndpoints::test_get_user_goals_success PASSED [ 21%]
tests/test_api_learning_analytics.py::TestGoalsManagementEndpoints::test_get_user_goals_exception PASSED [ 21%]
tests/test_api_learning_analytics.py::TestAchievementsEndpoints::test_get_user_achievements_with_language PASSED [ 21%]
tests/test_api_learning_analytics.py::TestAchievementsEndpoints::test_get_user_achievements_without_language PASSED [ 21%]
tests/test_api_learning_analytics.py::TestAchievementsEndpoints::test_get_user_achievements_exception PASSED [ 21%]
tests/test_api_learning_analytics.py::TestAdminConfigurationEndpoints::test_get_algorithm_config_success PASSED [ 21%]
tests/test_api_learning_analytics.py::TestAdminConfigurationEndpoints::test_get_algorithm_config_exception PASSED [ 21%]
tests/test_api_learning_analytics.py::TestAdminConfigurationEndpoints::test_update_algorithm_config_success PASSED [ 22%]
tests/test_api_learning_analytics.py::TestAdminConfigurationEndpoints::test_update_algorithm_config_no_updates PASSED [ 22%]
tests/test_api_learning_analytics.py::TestAdminConfigurationEndpoints::test_update_algorithm_config_failed PASSED [ 22%]
tests/test_api_learning_analytics.py::TestAdminConfigurationEndpoints::test_update_algorithm_config_exception PASSED [ 22%]
tests/test_api_learning_analytics.py::TestUtilityEndpoints::test_health_check_success PASSED [ 22%]
tests/test_api_learning_analytics.py::TestUtilityEndpoints::test_get_api_stats_success PASSED [ 22%]
tests/test_api_learning_analytics.py::TestUtilityEndpoints::test_get_api_stats_exception PASSED [ 22%]
tests/test_api_learning_analytics.py::TestRouter::test_router_prefix PASSED [ 22%]
tests/test_api_learning_analytics.py::TestRouter::test_router_tags PASSED [ 22%]
tests/test_api_learning_analytics.py::TestModuleLevel::test_sr_manager_exists PASSED [ 22%]
tests/test_api_learning_analytics.py::TestModuleLevel::test_all_exports PASSED [ 22%]
tests/test_api_learning_analytics.py::TestEnumConversion::test_create_item_enum_conversion_vocabulary PASSED [ 22%]
tests/test_api_learning_analytics.py::TestEnumConversion::test_create_item_enum_conversion_phrase PASSED [ 22%]
tests/test_api_learning_analytics.py::TestEnumConversion::test_review_item_enum_conversion_again PASSED [ 22%]
tests/test_api_learning_analytics.py::TestEnumConversion::test_review_item_enum_conversion_hard PASSED [ 22%]
tests/test_api_learning_analytics.py::TestEnumConversion::test_review_item_enum_conversion_easy PASSED [ 22%]
tests/test_api_learning_analytics.py::TestEnumConversion::test_start_session_enum_conversion_conversation PASSED [ 22%]
tests/test_api_learning_analytics.py::TestEnumConversion::test_start_session_enum_conversion_scenario PASSED [ 22%]
tests/test_api_learning_analytics.py::TestIntegrationWorkflows::test_complete_learning_workflow PASSED [ 22%]
tests/test_api_learning_analytics.py::TestIntegrationWorkflows::test_complete_session_workflow PASSED [ 22%]
tests/test_api_learning_analytics.py::TestIntegrationWorkflows::test_admin_config_workflow PASSED [ 22%]
tests/test_api_progress_analytics.py::TestEnums::test_skill_type_enum_values PASSED [ 22%]
tests/test_api_progress_analytics.py::TestEnums::test_learning_path_type_enum_values PASSED [ 22%]
tests/test_api_progress_analytics.py::TestEnums::test_confidence_level_enum_values PASSED [ 22%]
tests/test_api_progress_analytics.py::TestPydanticModels::test_conversation_tracking_request_valid PASSED [ 22%]
tests/test_api_progress_analytics.py::TestPydanticModels::test_conversation_tracking_request_minimal PASSED [ 22%]
tests/test_api_progress_analytics.py::TestPydanticModels::test_conversation_tracking_request_validation_language_code_too_short PASSED [ 22%]
tests/test_api_progress_analytics.py::TestPydanticModels::test_conversation_tracking_request_validation_negative_duration PASSED [ 22%]
tests/test_api_progress_analytics.py::TestPydanticModels::test_conversation_tracking_request_validation_score_out_of_range PASSED [ 22%]
tests/test_api_progress_analytics.py::TestPydanticModels::test_skill_progress_update_request_valid PASSED [ 22%]
tests/test_api_progress_analytics.py::TestPydanticModels::test_skill_progress_update_request_minimal PASSED [ 22%]
tests/test_api_progress_analytics.py::TestPydanticModels::test_skill_progress_update_request_validation_level_out_of_range PASSED [ 22%]
tests/test_api_progress_analytics.py::TestPydanticModels::test_skill_progress_update_request_field_validator PASSED [ 22%]
tests/test_api_progress_analytics.py::TestPydanticModels::test_learning_path_generation_request_valid PASSED [ 22%]
tests/test_api_progress_analytics.py::TestPydanticModels::test_learning_path_generation_request_defaults PASSED [ 22%]
tests/test_api_progress_analytics.py::TestPydanticModels::test_learning_path_generation_request_validation_time_commitment PASSED [ 22%]
tests/test_api_progress_analytics.py::TestPydanticModels::test_learning_path_generation_request_validation_duration_weeks PASSED [ 22%]
tests/test_api_progress_analytics.py::TestPydanticModels::test_memory_retention_analysis_request_valid PASSED [ 22%]
tests/test_api_progress_analytics.py::TestPydanticModels::test_memory_retention_analysis_request_defaults PASSED [ 22%]
tests/test_api_progress_analytics.py::TestPydanticModels::test_memory_retention_analysis_request_validation_period_days PASSED [ 22%]
tests/test_api_progress_analytics.py::TestConversationTrackingEndpoints::test_track_conversation_session_success PASSED [ 22%]
tests/test_api_progress_analytics.py::TestConversationTrackingEndpoints::test_track_conversation_session_failure PASSED [ 22%]
tests/test_api_progress_analytics.py::TestConversationTrackingEndpoints::test_track_conversation_session_exception PASSED [ 22%]
tests/test_api_progress_analytics.py::TestConversationTrackingEndpoints::test_get_conversation_analytics_success PASSED [ 23%]
tests/test_api_progress_analytics.py::TestConversationTrackingEndpoints::test_get_conversation_analytics_exception PASSED [ 23%]
tests/test_api_progress_analytics.py::TestMultiSkillProgressEndpoints::test_update_skill_progress_success PASSED [ 23%]
tests/test_api_progress_analytics.py::TestMultiSkillProgressEndpoints::test_update_skill_progress_with_no_initial_assessment PASSED [ 23%]
tests/test_api_progress_analytics.py::TestMultiSkillProgressEndpoints::test_update_skill_progress_failure PASSED [ 23%]
tests/test_api_progress_analytics.py::TestMultiSkillProgressEndpoints::test_update_skill_progress_exception PASSED [ 23%]
tests/test_api_progress_analytics.py::TestMultiSkillProgressEndpoints::test_get_multi_skill_analytics_success PASSED [ 23%]
tests/test_api_progress_analytics.py::TestMultiSkillProgressEndpoints::test_get_multi_skill_analytics_exception PASSED [ 23%]
tests/test_api_progress_analytics.py::TestMultiSkillProgressEndpoints::test_get_skill_comparison_success PASSED [ 23%]
tests/test_api_progress_analytics.py::TestMultiSkillProgressEndpoints::test_get_skill_comparison_exception PASSED [ 23%]
tests/test_api_progress_analytics.py::TestLearningPathRecommendationEndpoints::test_generate_learning_path_success PASSED [ 23%]
tests/test_api_progress_analytics.py::TestLearningPathRecommendationEndpoints::test_generate_learning_path_with_minimal_request PASSED [ 23%]
tests/test_api_progress_analytics.py::TestLearningPathRecommendationEndpoints::test_generate_learning_path_exception PASSED [ 23%]
tests/test_api_progress_analytics.py::TestLearningPathRecommendationEndpoints::test_get_learning_path_recommendations_success PASSED [ 23%]
tests/test_api_progress_analytics.py::TestLearningPathRecommendationEndpoints::test_get_learning_path_recommendations_exception PASSED [ 23%]
tests/test_api_progress_analytics.py::TestMemoryRetentionAnalyticsEndpoints::test_analyze_memory_retention_success PASSED [ 23%]
tests/test_api_progress_analytics.py::TestMemoryRetentionAnalyticsEndpoints::test_analyze_memory_retention_with_all_options PASSED [ 23%]
tests/test_api_progress_analytics.py::TestMemoryRetentionAnalyticsEndpoints::test_analyze_memory_retention_exception PASSED [ 23%]
tests/test_api_progress_analytics.py::TestMemoryRetentionAnalyticsEndpoints::test_get_memory_retention_trends_success PASSED [ 23%]
tests/test_api_progress_analytics.py::TestMemoryRetentionAnalyticsEndpoints::test_get_memory_retention_trends_exception PASSED [ 23%]
tests/test_api_progress_analytics.py::TestEnhancedDashboardEndpoints::test_get_comprehensive_dashboard_success PASSED [ 23%]
tests/test_api_progress_analytics.py::TestEnhancedDashboardEndpoints::test_get_comprehensive_dashboard_exception PASSED [ 23%]
tests/test_api_progress_analytics.py::TestAdminEndpoints::test_get_system_progress_analytics_success PASSED [ 23%]
tests/test_api_progress_analytics.py::TestAdminEndpoints::test_get_system_progress_analytics_exception PASSED [ 23%]
tests/test_api_progress_analytics.py::TestUtilityEndpoints::test_health_check_success PASSED [ 23%]
tests/test_api_progress_analytics.py::TestUtilityEndpoints::test_get_api_stats_success PASSED [ 23%]
tests/test_api_progress_analytics.py::TestUtilityEndpoints::test_get_api_stats_exception PASSED [ 23%]
tests/test_api_progress_analytics.py::TestModuleLevel::test_router_initialization PASSED [ 23%]
tests/test_api_progress_analytics.py::TestModuleLevel::test_progress_service_initialization PASSED [ 23%]
tests/test_api_progress_analytics.py::TestIntegration::test_conversation_to_dashboard_workflow PASSED [ 23%]
tests/test_api_progress_analytics.py::TestIntegration::test_skill_update_to_analytics_workflow PASSED [ 23%]
tests/test_api_progress_analytics.py::TestIntegration::test_learning_path_generation_workflow PASSED [ 23%]
tests/test_api_realtime_analysis.py::TestPydanticModels::test_start_analysis_request_minimal PASSED [ 23%]
tests/test_api_realtime_analysis.py::TestPydanticModels::test_start_analysis_request_full PASSED [ 23%]
tests/test_api_realtime_analysis.py::TestPydanticModels::test_start_analysis_response_creation PASSED [ 23%]
tests/test_api_realtime_analysis.py::TestPydanticModels::test_start_analysis_response_default_status PASSED [ 23%]
tests/test_api_realtime_analysis.py::TestPydanticModels::test_analyze_audio_request_minimal PASSED [ 23%]
tests/test_api_realtime_analysis.py::TestPydanticModels::test_analyze_audio_request_with_timestamp PASSED [ 23%]
tests/test_api_realtime_analysis.py::TestPydanticModels::test_analyze_audio_request_confidence_validation_min PASSED [ 23%]
tests/test_api_realtime_analysis.py::TestPydanticModels::test_analyze_audio_request_confidence_validation_max PASSED [ 23%]
tests/test_api_realtime_analysis.py::TestPydanticModels::test_feedback_response_minimal PASSED [ 23%]
tests/test_api_realtime_analysis.py::TestPydanticModels::test_feedback_response_with_pronunciation PASSED [ 23%]
tests/test_api_realtime_analysis.py::TestPydanticModels::test_feedback_response_with_grammar_errors PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestPydanticModels::test_feedback_response_with_fluency_metrics PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestPydanticModels::test_analytics_response_creation PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestWebSocketManager::test_connect_new_session PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestWebSocketManager::test_connect_existing_session PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestWebSocketManager::test_disconnect_removes_connection PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestWebSocketManager::test_disconnect_removes_session_when_empty PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestWebSocketManager::test_disconnect_keeps_other_connections PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestWebSocketManager::test_disconnect_nonexistent_connection PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestWebSocketManager::test_send_feedback_success PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestWebSocketManager::test_send_feedback_multiple_connections PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestWebSocketManager::test_send_feedback_handles_errors PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestWebSocketManager::test_send_feedback_no_session PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestWebSocketManager::test_send_feedback_connection_not_in_active PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestHelperFunctions::test_decode_audio_data_success PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestHelperFunctions::test_decode_audio_data_invalid_base64 PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestHelperFunctions::test_get_session_data_success PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestHelperFunctions::test_get_session_data_not_found PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestHelperFunctions::test_create_base_feedback_response PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestHelperFunctions::test_add_specific_feedback_data_with_pronunciation PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestHelperFunctions::test_add_specific_feedback_data_with_grammar PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestHelperFunctions::test_add_specific_feedback_data_with_fluency PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestHelperFunctions::test_add_specific_feedback_data_no_data PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestHelperFunctions::test_convert_feedback_to_responses_empty_list PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestHelperFunctions::test_convert_feedback_to_responses_single_item PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestHelperFunctions::test_convert_feedback_to_responses_multiple_items PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestHelperFunctions::test_send_websocket_feedback_with_feedback PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestHelperFunctions::test_send_websocket_feedback_empty_list PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_start_analysis_session_success PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_start_analysis_session_invalid_analysis_type PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_start_analysis_session_service_error PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_analyze_audio_segment_success PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_analyze_audio_segment_invalid_audio PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_analyze_audio_segment_session_not_found PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_analyze_audio_segment_service_error PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_get_session_analytics_success PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_get_session_analytics_access_denied PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_get_session_analytics_service_error PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_end_analysis_session_success PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_end_analysis_session_access_denied PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_end_analysis_session_service_error PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_get_recent_feedback_success PASSED [ 24%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_get_recent_feedback_session_not_found PASSED [ 25%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_get_recent_feedback_access_denied PASSED [ 25%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_get_recent_feedback_service_error PASSED [ 25%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_websocket_endpoint_connect_success PASSED [ 25%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_websocket_endpoint_ping_pong PASSED [ 25%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_websocket_endpoint_request_analytics_success PASSED [ 25%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_websocket_endpoint_request_analytics_error PASSED [ 25%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_websocket_endpoint_message_error_handling PASSED [ 25%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_websocket_endpoint_connection_error PASSED [ 25%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_websocket_endpoint_unknown_message_type PASSED [ 25%]
tests/test_api_realtime_analysis.py::TestAPIEndpoints::test_health_check PASSED [ 25%]
tests/test_api_realtime_analysis.py::TestIntegrationWorkflows::test_complete_analysis_workflow PASSED [ 25%]
tests/test_api_realtime_analysis.py::TestIntegrationWorkflows::test_websocket_with_realtime_feedback PASSED [ 25%]
tests/test_api_realtime_analysis.py::TestIntegrationWorkflows::test_multiple_analyses_same_session PASSED [ 25%]
tests/test_api_realtime_analysis.py::TestModuleLevel::test_global_websocket_manager_exists PASSED [ 25%]
tests/test_api_realtime_analysis.py::TestModuleLevel::test_router_configuration PASSED [ 25%]
tests/test_api_realtime_analysis.py::TestModuleLevel::test_router_has_all_endpoints PASSED [ 25%]
tests/test_api_scenario_management.py::TestApplyScenarioFilters::test_filter_by_category PASSED [ 25%]
tests/test_api_scenario_management.py::TestApplyScenarioFilters::test_filter_by_difficulty PASSED [ 25%]
tests/test_api_scenario_management.py::TestApplyScenarioFilters::test_filter_by_active_status PASSED [ 25%]
tests/test_api_scenario_management.py::TestApplyScenarioFilters::test_combined_filters PASSED [ 25%]
tests/test_api_scenario_management.py::TestConvertScenarios::test_build_scenario_dict PASSED [ 25%]
tests/test_api_scenario_management.py::TestConvertScenarios::test_build_scenario_dict_missing_optional_fields PASSED [ 25%]
tests/test_api_scenario_management.py::TestConvertScenarios::test_convert_scenarios_to_models PASSED [ 25%]
tests/test_api_scenario_management.py::TestScenarioUpdates::test_convert_phase_data_to_objects PASSED [ 25%]
tests/test_api_scenario_management.py::TestScenarioUpdates::test_update_enum_field_category PASSED [ 25%]
tests/test_api_scenario_management.py::TestScenarioUpdates::test_update_enum_field_difficulty PASSED [ 25%]
tests/test_api_scenario_management.py::TestScenarioUpdates::test_update_enum_field_user_role PASSED [ 25%]
tests/test_api_scenario_management.py::TestScenarioUpdates::test_update_enum_field_ai_role PASSED [ 25%]
tests/test_api_scenario_management.py::TestScenarioUpdates::test_update_enum_field_unknown_field PASSED [ 25%]
tests/test_api_scenario_management.py::TestScenarioUpdates::test_apply_scenario_updates_simple_fields PASSED [ 25%]
tests/test_api_scenario_management.py::TestScenarioUpdates::test_apply_scenario_updates_enum_fields PASSED [ 25%]
tests/test_api_scenario_management.py::TestScenarioUpdates::test_apply_scenario_updates_phases PASSED [ 25%]
tests/test_api_scenario_management.py::TestScenarioUpdates::test_apply_scenario_updates_phases_none PASSED [ 25%]
tests/test_api_scenario_management.py::TestGetScenarioOr404::test_get_scenario_success PASSED [ 25%]
tests/test_api_scenario_management.py::TestGetScenarioOr404::test_get_scenario_not_found PASSED [ 25%]
tests/test_api_scenario_management.py::TestListScenariosEndpoint::test_list_scenarios_success PASSED [ 25%]
tests/test_api_scenario_management.py::TestListScenariosEndpoint::test_list_scenarios_error_handling PASSED [ 25%]
tests/test_api_scenario_management.py::TestGetScenarioEndpoint::test_get_scenario_success PASSED [ 25%]
tests/test_api_scenario_management.py::TestGetScenarioEndpoint::test_get_scenario_not_found PASSED [ 25%]
tests/test_api_scenario_management.py::TestGetScenarioEndpoint::test_get_scenario_error_handling PASSED [ 25%]
tests/test_api_scenario_management.py::TestCreateScenarioEndpoint::test_create_scenario_success PASSED [ 25%]
tests/test_api_scenario_management.py::TestCreateScenarioEndpoint::test_create_scenario_error_handling PASSED [ 25%]
tests/test_api_scenario_management.py::TestUpdateScenarioEndpoint::test_update_scenario_success PASSED [ 26%]
tests/test_api_scenario_management.py::TestUpdateScenarioEndpoint::test_update_scenario_not_found PASSED [ 26%]
tests/test_api_scenario_management.py::TestUpdateScenarioEndpoint::test_update_scenario_error_handling PASSED [ 26%]
tests/test_api_scenario_management.py::TestDeleteScenarioEndpoint::test_delete_scenario_success PASSED [ 26%]
tests/test_api_scenario_management.py::TestDeleteScenarioEndpoint::test_delete_scenario_not_found PASSED [ 26%]
tests/test_api_scenario_management.py::TestDeleteScenarioEndpoint::test_delete_scenario_error_handling PASSED [ 26%]
tests/test_api_scenario_management.py::TestContentConfigEndpoints::test_get_content_config_success PASSED [ 26%]
tests/test_api_scenario_management.py::TestContentConfigEndpoints::test_get_content_config_error_handling PASSED [ 26%]
tests/test_api_scenario_management.py::TestContentConfigEndpoints::test_update_content_config_success PASSED [ 26%]
tests/test_api_scenario_management.py::TestContentConfigEndpoints::test_update_content_config_error_handling PASSED [ 26%]
tests/test_api_scenario_management.py::TestBulkOperationsEndpoint::test_bulk_activate_scenarios PASSED [ 26%]
tests/test_api_scenario_management.py::TestBulkOperationsEndpoint::test_bulk_deactivate_scenarios PASSED [ 26%]
tests/test_api_scenario_management.py::TestBulkOperationsEndpoint::test_bulk_delete_scenarios PASSED [ 26%]
tests/test_api_scenario_management.py::TestBulkOperationsEndpoint::test_bulk_export_scenarios PASSED [ 26%]
tests/test_api_scenario_management.py::TestBulkOperationsEndpoint::test_bulk_operations_partial_failure PASSED [ 26%]
tests/test_api_scenario_management.py::TestBulkOperationsEndpoint::test_bulk_operations_error_handling PASSED [ 26%]
tests/test_api_scenario_management.py::TestBulkOperationsEndpoint::test_bulk_operations_invalid_operation PASSED [ 26%]
tests/test_api_scenario_management.py::TestTemplatesEndpoint::test_get_scenario_templates_success PASSED [ 26%]
tests/test_api_scenario_management.py::TestTemplatesEndpoint::test_get_scenario_templates_error_handling PASSED [ 26%]
tests/test_api_scenario_management.py::TestStatisticsEndpoint::test_get_scenario_statistics_success PASSED [ 26%]
tests/test_api_scenario_management.py::TestStatisticsEndpoint::test_get_scenario_statistics_error_handling PASSED [ 26%]
tests/test_api_scenario_management.py::TestEnsureScenarioManagerInitialized::test_ensure_scenario_manager_initialized PASSED [ 26%]
tests/test_api_scenario_management.py::TestPydanticModels::test_scenario_model_category_validation PASSED [ 26%]
tests/test_api_scenario_management.py::TestPydanticModels::test_scenario_model_difficulty_validation PASSED [ 26%]
tests/test_api_scenario_management.py::TestPydanticModels::test_scenario_model_role_validation PASSED [ 26%]
tests/test_api_scenario_management_integration.py::TestListScenariosEndpoint::test_list_all_scenarios PASSED [ 26%]
tests/test_api_scenario_management_integration.py::TestListScenariosEndpoint::test_list_scenarios_filter_by_category PASSED [ 26%]
tests/test_api_scenario_management_integration.py::TestListScenariosEndpoint::test_list_scenarios_filter_by_difficulty PASSED [ 26%]
tests/test_api_scenario_management_integration.py::TestListScenariosEndpoint::test_list_scenarios_filter_active_only PASSED [ 26%]
tests/test_api_scenario_management_integration.py::TestListScenariosEndpoint::test_list_scenarios_combined_filters PASSED [ 26%]
tests/test_api_scenario_management_integration.py::TestGetScenarioEndpoint::test_get_scenario_success FAILED [ 26%]
tests/test_api_scenario_management_integration.py::TestGetScenarioEndpoint::test_get_scenario_not_found FAILED [ 26%]
tests/test_api_scenario_management_integration.py::TestCreateScenarioEndpoint::test_create_scenario_success FAILED [ 26%]
tests/test_api_scenario_management_integration.py::TestCreateScenarioEndpoint::test_create_scenario_validation_error FAILED [ 26%]
tests/test_api_scenario_management_integration.py::TestUpdateScenarioEndpoint::test_update_scenario_success FAILED [ 26%]
tests/test_api_scenario_management_integration.py::TestUpdateScenarioEndpoint::test_update_scenario_not_found FAILED [ 26%]
tests/test_api_scenario_management_integration.py::TestUpdateScenarioEndpoint::test_update_scenario_with_phases FAILED [ 26%]
tests/test_api_scenario_management_integration.py::TestDeleteScenarioEndpoint::test_delete_scenario_success FAILED [ 26%]
tests/test_api_scenario_management_integration.py::TestDeleteScenarioEndpoint::test_delete_scenario_not_found FAILED [ 26%]
tests/test_api_scenario_management_integration.py::TestContentConfigEndpoints::test_get_content_config FAILED [ 26%]
tests/test_api_scenario_management_integration.py::TestContentConfigEndpoints::test_update_content_config FAILED [ 26%]
tests/test_api_scenario_management_integration.py::TestBulkOperationsEndpoint::test_bulk_activate FAILED [ 26%]
tests/test_api_scenario_management_integration.py::TestBulkOperationsEndpoint::test_bulk_deactivate FAILED [ 27%]
tests/test_api_scenario_management_integration.py::TestBulkOperationsEndpoint::test_bulk_delete FAILED [ 27%]
tests/test_api_scenario_management_integration.py::TestBulkOperationsEndpoint::test_bulk_export FAILED [ 27%]
tests/test_api_scenario_management_integration.py::TestTemplatesEndpoint::test_get_templates_all FAILED [ 27%]
tests/test_api_scenario_management_integration.py::TestTemplatesEndpoint::test_get_templates_by_category FAILED [ 27%]
tests/test_api_scenario_management_integration.py::TestStatisticsEndpoint::test_get_statistics FAILED [ 27%]
tests/test_api_scenarios.py::TestPydanticModels::test_scenario_list_request_all_fields PASSED [ 27%]
tests/test_api_scenarios.py::TestPydanticModels::test_scenario_list_request_defaults PASSED [ 27%]
tests/test_api_scenarios.py::TestPydanticModels::test_start_scenario_request_all_fields PASSED [ 27%]
tests/test_api_scenarios.py::TestPydanticModels::test_start_scenario_request_defaults PASSED [ 27%]
tests/test_api_scenarios.py::TestPydanticModels::test_scenario_message_request_all_fields PASSED [ 27%]
tests/test_api_scenarios.py::TestPydanticModels::test_scenario_message_request_defaults PASSED [ 27%]
tests/test_api_scenarios.py::TestPydanticModels::test_create_from_template_request_all_fields PASSED [ 27%]
tests/test_api_scenarios.py::TestPydanticModels::test_create_from_template_request_defaults PASSED [ 27%]
tests/test_api_scenarios.py::TestPydanticModels::test_scenario_response_success PASSED [ 27%]
tests/test_api_scenarios.py::TestPydanticModels::test_scenario_response_error PASSED [ 27%]
tests/test_api_scenarios.py::TestPydanticModels::test_scenario_response_minimal PASSED [ 27%]
tests/test_api_scenarios.py::TestHelperFunctions::test_validate_scenario_filters_valid_category PASSED [ 27%]
tests/test_api_scenarios.py::TestHelperFunctions::test_validate_scenario_filters_valid_difficulty PASSED [ 27%]
tests/test_api_scenarios.py::TestHelperFunctions::test_validate_scenario_filters_both_valid PASSED [ 27%]
tests/test_api_scenarios.py::TestHelperFunctions::test_validate_scenario_filters_both_none PASSED [ 27%]
tests/test_api_scenarios.py::TestHelperFunctions::test_validate_scenario_filters_invalid_category PASSED [ 27%]
tests/test_api_scenarios.py::TestHelperFunctions::test_validate_scenario_filters_invalid_difficulty PASSED [ 27%]
tests/test_api_scenarios.py::TestHelperFunctions::test_add_user_recommendations_exact_match PASSED [ 27%]
tests/test_api_scenarios.py::TestHelperFunctions::test_add_user_recommendations_beginner_intermediate PASSED [ 27%]
tests/test_api_scenarios.py::TestHelperFunctions::test_add_user_recommendations_intermediate_no_extra PASSED [ 27%]
tests/test_api_scenarios.py::TestHelperFunctions::test_add_user_recommendations_advanced PASSED [ 27%]
tests/test_api_scenarios.py::TestHelperFunctions::test_build_scenarios_response_empty_list PASSED [ 27%]
tests/test_api_scenarios.py::TestHelperFunctions::test_build_scenarios_response_multiple_scenarios PASSED [ 27%]
tests/test_api_scenarios.py::TestHelperFunctions::test_get_category_description_all_categories PASSED [ 27%]
tests/test_api_scenarios.py::TestHelperFunctions::test_get_category_description_unknown_category PASSED [ 27%]
tests/test_api_scenarios.py::TestListScenariosEndpoint::test_list_scenarios_success_no_filters PASSED [ 27%]
tests/test_api_scenarios.py::TestListScenariosEndpoint::test_list_scenarios_with_category_filter PASSED [ 27%]
tests/test_api_scenarios.py::TestListScenariosEndpoint::test_list_scenarios_with_difficulty_filter PASSED [ 27%]
tests/test_api_scenarios.py::TestListScenariosEndpoint::test_list_scenarios_with_user_level PASSED [ 27%]
tests/test_api_scenarios.py::TestListScenariosEndpoint::test_list_scenarios_invalid_category PASSED [ 27%]
tests/test_api_scenarios.py::TestListScenariosEndpoint::test_list_scenarios_invalid_difficulty PASSED [ 27%]
tests/test_api_scenarios.py::TestListScenariosEndpoint::test_list_scenarios_service_exception PASSED [ 27%]
tests/test_api_scenarios.py::TestGetScenarioDetailsEndpoint::test_get_scenario_details_success PASSED [ 27%]
tests/test_api_scenarios.py::TestGetScenarioDetailsEndpoint::test_get_scenario_details_not_found PASSED [ 27%]
tests/test_api_scenarios.py::TestGetScenarioDetailsEndpoint::test_get_scenario_details_service_exception PASSED [ 27%]
tests/test_api_scenarios.py::TestStartScenarioConversationEndpoint::test_start_scenario_conversation_success PASSED [ 27%]
tests/test_api_scenarios.py::TestStartScenarioConversationEndpoint::test_start_scenario_conversation_no_progress_id PASSED [ 27%]
tests/test_api_scenarios.py::TestStartScenarioConversationEndpoint::test_start_scenario_conversation_invalid_learning_focus PASSED [ 28%]
tests/test_api_scenarios.py::TestStartScenarioConversationEndpoint::test_start_scenario_conversation_service_exception PASSED [ 28%]
tests/test_api_scenarios.py::TestSendScenarioMessageEndpoint::test_send_scenario_message_success PASSED [ 28%]
tests/test_api_scenarios.py::TestSendScenarioMessageEndpoint::test_send_scenario_message_conversation_not_found PASSED [ 28%]
tests/test_api_scenarios.py::TestSendScenarioMessageEndpoint::test_send_scenario_message_access_denied PASSED [ 28%]
tests/test_api_scenarios.py::TestSendScenarioMessageEndpoint::test_send_scenario_message_service_exception PASSED [ 28%]
tests/test_api_scenarios.py::TestGetScenarioProgressEndpoint::test_get_scenario_progress_success_with_scenario PASSED [ 28%]
tests/test_api_scenarios.py::TestGetScenarioProgressEndpoint::test_get_scenario_progress_non_scenario_conversation PASSED [ 28%]
tests/test_api_scenarios.py::TestGetScenarioProgressEndpoint::test_get_scenario_progress_conversation_not_found PASSED [ 28%]
tests/test_api_scenarios.py::TestGetScenarioProgressEndpoint::test_get_scenario_progress_access_denied PASSED [ 28%]
tests/test_api_scenarios.py::TestGetScenarioProgressEndpoint::test_get_scenario_progress_service_exception PASSED [ 28%]
tests/test_api_scenarios.py::TestCompleteScenarioConversationEndpoint::test_complete_scenario_conversation_success_with_scenario PASSED [ 28%]
tests/test_api_scenarios.py::TestCompleteScenarioConversationEndpoint::test_complete_scenario_conversation_non_scenario PASSED [ 28%]
tests/test_api_scenarios.py::TestCompleteScenarioConversationEndpoint::test_complete_scenario_conversation_scenario_finish_fails PASSED [ 28%]
tests/test_api_scenarios.py::TestCompleteScenarioConversationEndpoint::test_complete_scenario_conversation_not_found PASSED [ 28%]
tests/test_api_scenarios.py::TestCompleteScenarioConversationEndpoint::test_complete_scenario_conversation_access_denied PASSED [ 28%]
tests/test_api_scenarios.py::TestCompleteScenarioConversationEndpoint::test_complete_scenario_conversation_service_exception PASSED [ 28%]
tests/test_api_scenarios.py::TestGetScenarioCategoriesEndpoint::test_get_scenario_categories_success PASSED [ 28%]
tests/test_api_scenarios.py::TestGetScenarioCategoriesEndpoint::test_get_scenario_categories_exception PASSED [ 28%]
tests/test_api_scenarios.py::TestGetUniversalTemplatesEndpoint::test_get_universal_templates_no_filter PASSED [ 28%]
tests/test_api_scenarios.py::TestGetUniversalTemplatesEndpoint::test_get_universal_templates_with_tier_filter PASSED [ 28%]
tests/test_api_scenarios.py::TestGetUniversalTemplatesEndpoint::test_get_universal_templates_exception PASSED [ 28%]
tests/test_api_scenarios.py::TestGetTier1ScenariosEndpoint::test_get_tier1_scenarios_success PASSED [ 28%]
tests/test_api_scenarios.py::TestGetTier1ScenariosEndpoint::test_get_tier1_scenarios_exception PASSED [ 28%]
tests/test_api_scenarios.py::TestCreateScenarioFromTemplateEndpoint::test_create_scenario_from_template_success PASSED [ 28%]
tests/test_api_scenarios.py::TestCreateScenarioFromTemplateEndpoint::test_create_scenario_from_template_with_variation PASSED [ 28%]
tests/test_api_scenarios.py::TestCreateScenarioFromTemplateEndpoint::test_create_scenario_from_template_invalid_difficulty PASSED [ 28%]
tests/test_api_scenarios.py::TestCreateScenarioFromTemplateEndpoint::test_create_scenario_from_template_invalid_user_role PASSED [ 28%]
tests/test_api_scenarios.py::TestCreateScenarioFromTemplateEndpoint::test_create_scenario_from_template_invalid_ai_role PASSED [ 28%]
tests/test_api_scenarios.py::TestCreateScenarioFromTemplateEndpoint::test_create_scenario_from_template_not_found PASSED [ 28%]
tests/test_api_scenarios.py::TestCreateScenarioFromTemplateEndpoint::test_create_scenario_from_template_exception PASSED [ 28%]
tests/test_api_scenarios.py::TestGetScenariosByCategoryEndpoint::test_get_scenarios_by_category_success PASSED [ 28%]
tests/test_api_scenarios.py::TestGetScenariosByCategoryEndpoint::test_get_scenarios_by_category_invalid_category PASSED [ 28%]
tests/test_api_scenarios.py::TestGetScenariosByCategoryEndpoint::test_get_scenarios_by_category_exception PASSED [ 28%]
tests/test_api_scenarios.py::TestGetScenariosRouter::test_get_scenarios_router_returns_router PASSED [ 28%]
tests/test_api_scenarios.py::TestScenarioWorkflows::test_complete_scenario_workflow PASSED [ 28%]
tests/test_api_scenarios.py::TestScenarioWorkflows::test_template_creation_workflow PASSED [ 28%]
tests/test_api_scenarios.py::TestScenarioWorkflows::test_category_browsing_workflow PASSED [ 28%]
tests/test_audio_integration.py::TestSTTTTSIntegration::test_basic_round_trip_english PASSED [ 28%]
tests/test_audio_integration.py::TestSTTTTSIntegration::test_round_trip_with_longer_text PASSED [ 28%]
tests/test_audio_integration.py::TestSTTTTSIntegration::test_tts_then_stt_workflow PASSED [ 28%]
tests/test_audio_integration.py::TestSTTTTSIntegration::test_empty_text_handling PASSED [ 28%]
tests/test_audio_integration.py::TestSTTTTSIntegration::test_special_characters_in_text PASSED [ 29%]
tests/test_audio_integration.py::TestMultiLanguageAudio::test_english_audio_workflow PASSED [ 29%]
tests/test_audio_integration.py::TestMultiLanguageAudio::test_spanish_audio_workflow PASSED [ 29%]
tests/test_audio_integration.py::TestMultiLanguageAudio::test_french_audio_workflow PASSED [ 29%]
tests/test_audio_integration.py::TestMultiLanguageAudio::test_german_audio_workflow PASSED [ 29%]
tests/test_audio_integration.py::TestMultiLanguageAudio::test_multiple_languages_sequential PASSED [ 29%]
tests/test_audio_integration.py::TestMultiLanguageAudio::test_consistent_audio_format_across_languages PASSED [ 29%]
tests/test_audio_integration.py::TestErrorRecovery::test_corrupted_audio_handling PASSED [ 29%]
tests/test_audio_integration.py::TestErrorRecovery::test_empty_audio_data PASSED [ 29%]
tests/test_audio_integration.py::TestErrorRecovery::test_api_timeout_handling PASSED [ 29%]
tests/test_audio_integration.py::TestErrorRecovery::test_api_network_error PASSED [ 29%]
tests/test_audio_integration.py::TestErrorRecovery::test_api_rate_limit PASSED [ 29%]
tests/test_audio_integration.py::TestErrorRecovery::test_unsupported_language PASSED [ 29%]
tests/test_audio_integration.py::TestErrorRecovery::test_very_long_text PASSED [ 29%]
tests/test_audio_integration.py::TestErrorRecovery::test_concurrent_tts_requests PASSED [ 29%]
tests/test_audio_integration.py::TestPerformance::test_tts_synthesis_performance PASSED [ 29%]
tests/test_audio_integration.py::TestPerformance::test_stt_transcription_performance PASSED [ 29%]
tests/test_audio_integration.py::TestPerformance::test_round_trip_performance PASSED [ 29%]
tests/test_audio_integration.py::TestPerformance::test_memory_usage_large_audio PASSED [ 29%]
tests/test_auth.py::TestAuthConfig::test_auth_config_initialization PASSED [ 29%]
tests/test_auth.py::TestAuthConfig::test_auth_config_has_secret_key PASSED [ 29%]
tests/test_auth.py::TestPydanticModels::test_token_data_creation PASSED  [ 29%]
tests/test_auth.py::TestPydanticModels::test_session_data_creation PASSED [ 29%]
tests/test_auth.py::TestPydanticModels::test_session_data_default_values PASSED [ 29%]
tests/test_auth.py::TestPasswordManagement::test_validate_password_strength_valid PASSED [ 29%]
tests/test_auth.py::TestPasswordManagement::test_validate_password_strength_too_short PASSED [ 29%]
tests/test_auth.py::TestPasswordManagement::test_validate_password_strength_too_long PASSED [ 29%]
tests/test_auth.py::TestPasswordManagement::test_validate_password_strength_no_letter PASSED [ 29%]
tests/test_auth.py::TestPasswordManagement::test_validate_password_strength_no_number PASSED [ 29%]
tests/test_auth.py::TestPasswordManagement::test_validate_password_strength_empty PASSED [ 29%]
tests/test_auth.py::TestPasswordManagement::test_hash_password_success PASSED [ 29%]
tests/test_auth.py::TestPasswordManagement::test_hash_password_invalid_raises_error PASSED [ 29%]
tests/test_auth.py::TestPasswordManagement::test_verify_password_correct PASSED [ 29%]
tests/test_auth.py::TestPasswordManagement::test_verify_password_incorrect PASSED [ 29%]
tests/test_auth.py::TestPasswordManagement::test_verify_password_exception_handling PASSED [ 29%]
tests/test_auth.py::TestPasswordManagement::test_generate_secure_password_default_length PASSED [ 29%]
tests/test_auth.py::TestPasswordManagement::test_generate_secure_password_custom_length PASSED [ 29%]
tests/test_auth.py::TestPINManagement::test_generate_child_pin PASSED    [ 29%]
tests/test_auth.py::TestPINManagement::test_hash_pin PASSED              [ 29%]
tests/test_auth.py::TestPINManagement::test_verify_pin_correct PASSED    [ 29%]
tests/test_auth.py::TestPINManagement::test_verify_pin_incorrect PASSED  [ 29%]
tests/test_auth.py::TestJWTTokenCreation::test_create_access_token_default_expiry PASSED [ 29%]
tests/test_auth.py::TestJWTTokenCreation::test_create_access_token_custom_expiry PASSED [ 30%]
tests/test_auth.py::TestJWTTokenCreation::test_create_access_token_encoding_error PASSED [ 30%]
tests/test_auth.py::TestJWTTokenCreation::test_create_refresh_token PASSED [ 30%]
tests/test_auth.py::TestJWTTokenCreation::test_create_refresh_token_encoding_error PASSED [ 30%]
tests/test_auth.py::TestJWTTokenVerification::test_verify_token_valid PASSED [ 30%]
tests/test_auth.py::TestJWTTokenVerification::test_verify_token_expired PASSED [ 30%]
tests/test_auth.py::TestJWTTokenVerification::test_verify_token_invalid PASSED [ 30%]
tests/test_auth.py::TestTokenRefreshAndRevocation::test_refresh_access_token_success PASSED [ 30%]
tests/test_auth.py::TestTokenRefreshAndRevocation::test_refresh_access_token_invalid_type PASSED [ 30%]
tests/test_auth.py::TestTokenRefreshAndRevocation::test_refresh_access_token_revoked PASSED [ 30%]
tests/test_auth.py::TestTokenRefreshAndRevocation::test_refresh_access_token_missing_jti PASSED [ 30%]
tests/test_auth.py::TestTokenRefreshAndRevocation::test_refresh_access_token_expired PASSED [ 30%]
tests/test_auth.py::TestTokenRefreshAndRevocation::test_revoke_refresh_token_success PASSED [ 30%]
tests/test_auth.py::TestTokenRefreshAndRevocation::test_revoke_refresh_token_nonexistent PASSED [ 30%]
tests/test_auth.py::TestTokenRefreshAndRevocation::test_revoke_refresh_token_exception PASSED [ 30%]
tests/test_auth.py::TestSessionManagement::test_create_session_basic PASSED [ 30%]
tests/test_auth.py::TestSessionManagement::test_create_session_with_details PASSED [ 30%]
tests/test_auth.py::TestSessionManagement::test_create_session_max_sessions_limit PASSED [ 30%]
tests/test_auth.py::TestSessionManagement::test_get_session_active PASSED [ 30%]
tests/test_auth.py::TestSessionManagement::test_get_session_nonexistent PASSED [ 30%]
tests/test_auth.py::TestSessionManagement::test_get_session_inactive PASSED [ 30%]
tests/test_auth.py::TestSessionManagement::test_get_session_expired PASSED [ 30%]
tests/test_auth.py::TestSessionManagement::test_update_session_activity_success PASSED [ 30%]
tests/test_auth.py::TestSessionManagement::test_update_session_activity_nonexistent PASSED [ 30%]
tests/test_auth.py::TestSessionManagement::test_update_session_activity_inactive PASSED [ 30%]
tests/test_auth.py::TestSessionManagement::test_revoke_session_success PASSED [ 30%]
tests/test_auth.py::TestSessionManagement::test_revoke_session_nonexistent PASSED [ 30%]
tests/test_auth.py::TestSessionManagement::test_revoke_all_user_sessions PASSED [ 30%]
tests/test_auth.py::TestSessionManagement::test_cleanup_expired_sessions PASSED [ 30%]
tests/test_auth.py::TestAuthenticationMethods::test_authenticate_user_success PASSED [ 30%]
tests/test_auth.py::TestAuthenticationMethods::test_authenticate_user_wrong_password PASSED [ 30%]
tests/test_auth.py::TestAuthenticationMethods::test_authenticate_child_pin_success PASSED [ 30%]
tests/test_auth.py::TestAuthenticationMethods::test_authenticate_child_pin_wrong_pin PASSED [ 30%]
tests/test_auth.py::TestAuthenticationMethods::test_authenticate_child_pin_no_pin_hash PASSED [ 30%]
tests/test_auth.py::TestAuthenticationMethods::test_get_current_user_from_token_success PASSED [ 30%]
tests/test_auth.py::TestAuthenticationMethods::test_get_current_user_from_token_refresh_type PASSED [ 30%]
tests/test_auth.py::TestAuthenticationMethods::test_get_current_user_from_token_expired_session PASSED [ 30%]
tests/test_auth.py::TestAuthenticationMethods::test_get_current_user_from_token_no_session_id PASSED [ 30%]
tests/test_auth.py::TestFastAPIDependencies::test_get_current_user_with_credentials PASSED [ 30%]
tests/test_auth.py::TestFastAPIDependencies::test_get_current_user_no_credentials PASSED [ 30%]
tests/test_auth.py::TestFastAPIDependencies::test_get_current_active_user PASSED [ 30%]
tests/test_auth.py::TestFastAPIDependencies::test_require_role_success PASSED [ 30%]
tests/test_auth.py::TestFastAPIDependencies::test_require_role_wrong_role PASSED [ 30%]
tests/test_auth.py::TestConvenienceFunctions::test_hash_password_convenience PASSED [ 31%]
tests/test_auth.py::TestConvenienceFunctions::test_verify_password_convenience PASSED [ 31%]
tests/test_auth.py::TestConvenienceFunctions::test_create_access_token_convenience PASSED [ 31%]
tests/test_auth.py::TestConvenienceFunctions::test_verify_token_convenience PASSED [ 31%]
tests/test_auth.py::TestSecurityUtilities::test_generate_secure_token_default_length PASSED [ 31%]
tests/test_auth.py::TestSecurityUtilities::test_generate_secure_token_custom_length PASSED [ 31%]
tests/test_auth.py::TestSecurityUtilities::test_generate_api_key PASSED  [ 31%]
tests/test_auth.py::TestSecurityUtilities::test_hash_api_key PASSED      [ 31%]
tests/test_auth.py::TestSecurityUtilities::test_verify_api_key_correct PASSED [ 31%]
tests/test_auth.py::TestSecurityUtilities::test_verify_api_key_incorrect PASSED [ 31%]
tests/test_auth.py::TestRateLimiting::test_rate_limiter_allows_within_limit PASSED [ 31%]
tests/test_auth.py::TestRateLimiting::test_rate_limiter_blocks_over_limit PASSED [ 31%]
tests/test_auth.py::TestRateLimiting::test_rate_limiter_resets_after_window PASSED [ 31%]
tests/test_auth.py::TestRateLimiting::test_rate_limiter_different_keys_independent PASSED [ 31%]
tests/test_auth.py::TestRateLimiting::test_check_rate_limit_within_limit PASSED [ 31%]
tests/test_auth.py::TestRateLimiting::test_check_rate_limit_over_limit PASSED [ 31%]
tests/test_auth.py::TestGlobalInstances::test_global_auth_config_exists PASSED [ 31%]
tests/test_auth.py::TestGlobalInstances::test_global_auth_service_exists PASSED [ 31%]
tests/test_auth.py::TestGlobalInstances::test_global_security_bearer_exists PASSED [ 31%]
tests/test_auth.py::TestGlobalInstances::test_global_rate_limiter_exists PASSED [ 31%]
tests/test_auth.py::TestEdgeCasesAndErrorHandling::test_validate_password_strength_boundary_min_length PASSED [ 31%]
tests/test_auth.py::TestEdgeCasesAndErrorHandling::test_validate_password_strength_boundary_max_length PASSED [ 31%]
tests/test_auth.py::TestEdgeCasesAndErrorHandling::test_session_data_model_empty_device_info PASSED [ 31%]
tests/test_auth.py::TestEdgeCasesAndErrorHandling::test_cleanup_no_expired_items PASSED [ 31%]
tests/test_auth.py::TestEdgeCasesAndErrorHandling::test_token_data_model_with_all_fields PASSED [ 31%]
tests/test_auth.py::TestEdgeCasesAndErrorHandling::test_multiple_cleanup_calls_idempotent PASSED [ 31%]
tests/test_auth.py::TestMissingCoverageLines::test_refresh_access_token_invalid_token_error PASSED [ 31%]
tests/test_auth.py::TestMissingCoverageLines::test_cleanup_expired_refresh_tokens PASSED [ 31%]
tests/test_auth.py::TestMissingCoverageLines::test_cleanup_no_refresh_tokens_to_clean PASSED [ 31%]
tests/test_auth_service.py::TestPasswordValidation::test_validate_password_strength_empty PASSED [ 31%]
tests/test_auth_service.py::TestPasswordValidation::test_validate_password_strength_too_short PASSED [ 31%]
tests/test_auth_service.py::TestPasswordValidation::test_validate_password_strength_too_long PASSED [ 31%]
tests/test_auth_service.py::TestPasswordValidation::test_validate_password_strength_no_letter PASSED [ 31%]
tests/test_auth_service.py::TestPasswordValidation::test_validate_password_strength_no_number PASSED [ 31%]
tests/test_auth_service.py::TestPasswordValidation::test_validate_password_strength_valid PASSED [ 31%]
tests/test_auth_service.py::TestPasswordValidation::test_hash_password_weak_raises_error PASSED [ 31%]
tests/test_auth_service.py::TestPasswordValidation::test_verify_password_exception_handling PASSED [ 31%]
tests/test_auth_service.py::TestSecurePasswordGeneration::test_generate_secure_password_default_length PASSED [ 31%]
tests/test_auth_service.py::TestSecurePasswordGeneration::test_generate_secure_password_custom_length PASSED [ 31%]
tests/test_auth_service.py::TestSecurePasswordGeneration::test_generate_child_pin PASSED [ 31%]
tests/test_auth_service.py::TestSecurePasswordGeneration::test_pin_hashing_and_verification PASSED [ 31%]
tests/test_auth_service.py::TestJWTTokenManagement::test_create_access_token_with_custom_expiry PASSED [ 31%]
tests/test_auth_service.py::TestJWTTokenManagement::test_create_refresh_token PASSED [ 32%]
tests/test_auth_service.py::TestJWTTokenManagement::test_verify_token_expired PASSED [ 32%]
tests/test_auth_service.py::TestJWTTokenManagement::test_verify_token_invalid PASSED [ 32%]
tests/test_auth_service.py::TestJWTTokenManagement::test_refresh_access_token_success PASSED [ 32%]
tests/test_auth_service.py::TestJWTTokenManagement::test_refresh_access_token_wrong_type PASSED [ 32%]
tests/test_auth_service.py::TestJWTTokenManagement::test_refresh_access_token_revoked PASSED [ 32%]
tests/test_auth_service.py::TestJWTTokenManagement::test_revoke_refresh_token_success PASSED [ 32%]
tests/test_auth_service.py::TestJWTTokenManagement::test_revoke_refresh_token_invalid PASSED [ 32%]
tests/test_auth_service.py::TestSessionManagement::test_create_session_basic PASSED [ 32%]
tests/test_auth_service.py::TestSessionManagement::test_create_session_with_device_info PASSED [ 32%]
tests/test_auth_service.py::TestSessionManagement::test_create_session_max_sessions_limit PASSED [ 32%]
tests/test_auth_service.py::TestSessionManagement::test_get_session_valid PASSED [ 32%]
tests/test_auth_service.py::TestSessionManagement::test_get_session_nonexistent PASSED [ 32%]
tests/test_auth_service.py::TestSessionManagement::test_get_session_expired PASSED [ 32%]
tests/test_auth_service.py::TestSessionManagement::test_update_session_activity_success PASSED [ 32%]
tests/test_auth_service.py::TestSessionManagement::test_update_session_activity_inactive PASSED [ 32%]
tests/test_auth_service.py::TestSessionManagement::test_revoke_session_success PASSED [ 32%]
tests/test_auth_service.py::TestSessionManagement::test_revoke_session_nonexistent PASSED [ 32%]
tests/test_auth_service.py::TestSessionManagement::test_revoke_all_user_sessions PASSED [ 32%]
tests/test_auth_service.py::TestSessionManagement::test_revoke_all_user_sessions_no_active_sessions PASSED [ 32%]
tests/test_auth_service.py::TestAuthenticationMethods::test_authenticate_user_success PASSED [ 32%]
tests/test_auth_service.py::TestAuthenticationMethods::test_authenticate_user_wrong_password PASSED [ 32%]
tests/test_auth_service.py::TestAuthenticationMethods::test_authenticate_child_pin_success PASSED [ 32%]
tests/test_auth_service.py::TestAuthenticationMethods::test_authenticate_child_pin_wrong_pin PASSED [ 32%]
tests/test_auth_service.py::TestAuthenticationMethods::test_authenticate_child_pin_missing_hash PASSED [ 32%]
tests/test_auth_service.py::TestHelperFunctions::test_hash_password_function PASSED [ 32%]
tests/test_auth_service.py::TestHelperFunctions::test_verify_password_function PASSED [ 32%]
tests/test_auth_service.py::TestHelperFunctions::test_create_access_token_function PASSED [ 32%]
tests/test_auth_service.py::TestHelperFunctions::test_verify_token_function PASSED [ 32%]
tests/test_auth_service.py::TestHelperFunctions::test_generate_secure_token PASSED [ 32%]
tests/test_auth_service.py::TestHelperFunctions::test_generate_api_key PASSED [ 32%]
tests/test_auth_service.py::TestAuthConfigDataclasses::test_token_data_creation PASSED [ 32%]
tests/test_auth_service.py::TestAuthConfigDataclasses::test_session_data_creation PASSED [ 32%]
tests/test_auth_service.py::TestAuthConfigDataclasses::test_session_data_default_device_info PASSED [ 32%]
tests/test_auth_service.py::TestAuthConfig::test_auth_config_initialization PASSED [ 32%]
tests/test_auth_service.py::TestGetCurrentUserFromToken::test_get_current_user_from_token_success PASSED [ 32%]
tests/test_auth_service.py::TestGetCurrentUserFromToken::test_get_current_user_from_token_refresh_token_rejected PASSED [ 32%]
tests/test_auth_service.py::TestGetCurrentUserFromToken::test_get_current_user_expired_session PASSED [ 32%]
tests/test_auth_service.py::TestCleanupExpiredSessions::test_cleanup_expired_sessions_none_expired PASSED [ 32%]
tests/test_auth_service.py::TestCleanupExpiredSessions::test_cleanup_expired_sessions_with_expired PASSED [ 32%]
tests/test_auth_service.py::TestCleanupExpiredSessions::test_cleanup_expired_refresh_tokens PASSED [ 32%]
tests/test_auth_service.py::TestCleanupExpiredSessions::test_cleanup_expired_sessions_with_fresh_refresh_tokens PASSED [ 32%]
tests/test_auth_service.py::TestFastAPIDependencies::test_get_current_user_success PASSED [ 32%]
tests/test_auth_service.py::TestFastAPIDependencies::test_get_current_user_no_credentials PASSED [ 33%]
tests/test_auth_service.py::TestFastAPIDependencies::test_get_current_active_user PASSED [ 33%]
tests/test_auth_service.py::TestFastAPIDependencies::test_require_role_success PASSED [ 33%]
tests/test_auth_service.py::TestFastAPIDependencies::test_require_role_forbidden PASSED [ 33%]
tests/test_auth_service.py::TestRateLimiting::test_rate_limiter_allows_requests PASSED [ 33%]
tests/test_auth_service.py::TestRateLimiting::test_rate_limiter_blocks_excess_requests PASSED [ 33%]
tests/test_auth_service.py::TestRateLimiting::test_rate_limiter_cleans_old_entries PASSED [ 33%]
tests/test_auth_service.py::TestRateLimiting::test_check_rate_limit_function PASSED [ 33%]
tests/test_auth_service.py::TestRateLimiting::test_check_rate_limit_exceeds_limit PASSED [ 33%]
tests/test_auth_service.py::TestZZZCompleteCoverage::test_create_access_token_exception_handling PASSED [ 33%]
tests/test_auth_service.py::TestZZZCompleteCoverage::test_create_refresh_token_exception_handling PASSED [ 33%]
tests/test_auth_service.py::TestZZZCompleteCoverage::test_refresh_access_token_expired_signature PASSED [ 33%]
tests/test_auth_service.py::TestZZZCompleteCoverage::test_refresh_access_token_invalid_token PASSED [ 33%]
tests/test_auth_service.py::TestZZZCompleteCoverage::test_revoke_refresh_token_exception_handling PASSED [ 33%]
tests/test_auth_service.py::TestZZZCompleteCoverage::test_hash_api_key_function PASSED [ 33%]
tests/test_auth_service.py::TestZZZCompleteCoverage::test_verify_api_key_function PASSED [ 33%]
tests/test_budget_manager.py::TestBudgetAlert::test_alert_values PASSED  [ 33%]
tests/test_budget_manager.py::TestBudgetAlert::test_alert_count PASSED   [ 33%]
tests/test_budget_manager.py::TestCostOptimizationStrategy::test_strategy_values PASSED [ 33%]
tests/test_budget_manager.py::TestCostOptimizationStrategy::test_strategy_count PASSED [ 33%]
tests/test_budget_manager.py::TestBudgetStatus::test_budget_status_creation PASSED [ 33%]
tests/test_budget_manager.py::TestBudgetStatus::test_budget_status_over_budget PASSED [ 33%]
tests/test_budget_manager.py::TestCostEstimate::test_cost_estimate_creation PASSED [ 33%]
tests/test_budget_manager.py::TestCostEstimate::test_cost_estimate_zero_tokens PASSED [ 33%]
tests/test_budget_manager.py::TestBudgetManagerInit::test_init_default_budget PASSED [ 33%]
tests/test_budget_manager.py::TestBudgetManagerInit::test_init_provider_costs_anthropic PASSED [ 33%]
tests/test_budget_manager.py::TestBudgetManagerInit::test_init_provider_costs_mistral PASSED [ 33%]
tests/test_budget_manager.py::TestBudgetManagerInit::test_init_provider_costs_watson PASSED [ 33%]
tests/test_budget_manager.py::TestGetCurrentBudgetStatus::test_budget_status_no_usage PASSED [ 33%]
tests/test_budget_manager.py::TestGetCurrentBudgetStatus::test_budget_status_green_alert PASSED [ 33%]
tests/test_budget_manager.py::TestGetCurrentBudgetStatus::test_budget_status_yellow_alert PASSED [ 33%]
tests/test_budget_manager.py::TestGetCurrentBudgetStatus::test_budget_status_orange_alert PASSED [ 33%]
tests/test_budget_manager.py::TestGetCurrentBudgetStatus::test_budget_status_red_alert PASSED [ 33%]
tests/test_budget_manager.py::TestGetCurrentBudgetStatus::test_budget_status_critical_alert PASSED [ 33%]
tests/test_budget_manager.py::TestGetCurrentBudgetStatus::test_budget_status_days_remaining_december PASSED [ 33%]
tests/test_budget_manager.py::TestGetCurrentBudgetStatus::test_budget_status_days_remaining_regular_month PASSED [ 33%]
tests/test_budget_manager.py::TestGetCurrentBudgetStatus::test_budget_status_projected_cost PASSED [ 33%]
tests/test_budget_manager.py::TestGetCurrentBudgetStatus::test_budget_status_exception_handling PASSED [ 33%]
tests/test_budget_manager.py::TestDetermineAlertLevel::test_determine_alert_green PASSED [ 33%]
tests/test_budget_manager.py::TestDetermineAlertLevel::test_determine_alert_yellow PASSED [ 33%]
tests/test_budget_manager.py::TestDetermineAlertLevel::test_determine_alert_orange PASSED [ 33%]
tests/test_budget_manager.py::TestDetermineAlertLevel::test_determine_alert_red PASSED [ 33%]
tests/test_budget_manager.py::TestDetermineAlertLevel::test_determine_alert_critical PASSED [ 34%]
tests/test_budget_manager.py::TestConvenienceFunctions::test_get_budget_status PASSED [ 34%]
tests/test_budget_manager.py::TestConvenienceFunctions::test_can_afford PASSED [ 34%]
tests/test_budget_manager.py::TestConvenienceFunctions::test_record_usage PASSED [ 34%]
tests/test_budget_manager.py::TestConvenienceFunctions::test_estimate_cost_function PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_estimate_cost_llm_anthropic_haiku PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_estimate_cost_llm_mistral_tiny PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_estimate_cost_stt_watson PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_estimate_cost_tts_watson PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_estimate_cost_unknown_provider_fallback PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_estimate_cost_unknown_model_fallback PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_estimate_cost_unknown_service_type PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_estimate_cost_exception_handling PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_calculate_llm_cost_input_only PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_calculate_llm_cost_output_only PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_calculate_llm_cost_no_tokens PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_calculate_stt_cost PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_calculate_stt_cost_no_pricing PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_calculate_tts_cost PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_calculate_tts_cost_no_pricing PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_fallback_cost_estimate_llm PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_fallback_cost_estimate_stt PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_fallback_cost_estimate_tts PASSED [ 34%]
tests/test_budget_manager.py::TestEstimateCost::test_fallback_cost_estimate_unknown PASSED [ 34%]
tests/test_budget_manager.py::TestCanAffordOperation::test_can_afford_green_zone PASSED [ 34%]
tests/test_budget_manager.py::TestCanAffordOperation::test_can_afford_yellow_zone PASSED [ 34%]
tests/test_budget_manager.py::TestCanAffordOperation::test_can_afford_red_zone_small_cost PASSED [ 34%]
tests/test_budget_manager.py::TestCanAffordOperation::test_can_afford_red_zone_large_cost PASSED [ 34%]
tests/test_budget_manager.py::TestCanAffordOperation::test_can_afford_critical_zone_tiny_cost PASSED [ 34%]
tests/test_budget_manager.py::TestCanAffordOperation::test_can_afford_critical_zone_small_cost PASSED [ 34%]
tests/test_budget_manager.py::TestCanAffordOperation::test_can_afford_custom_buffer PASSED [ 34%]
tests/test_budget_manager.py::TestRecordAPIUsage::test_record_usage_without_user PASSED [ 34%]
tests/test_budget_manager.py::TestRecordAPIUsage::test_record_usage_with_user PASSED [ 34%]
tests/test_budget_manager.py::TestRecordAPIUsage::test_record_usage_user_not_found PASSED [ 34%]
tests/test_budget_manager.py::TestRecordAPIUsage::test_record_usage_exception_handling PASSED [ 34%]
tests/test_budget_manager.py::TestGetCostBreakdown::test_cost_breakdown_with_data PASSED [ 34%]
tests/test_budget_manager.py::TestGetCostBreakdown::test_cost_breakdown_no_data PASSED [ 34%]
tests/test_budget_manager.py::TestGetCostBreakdown::test_cost_breakdown_exception_handling PASSED [ 34%]
tests/test_budget_manager.py::TestGetOptimizationRecommendations::test_recommendations_red_alert PASSED [ 34%]
tests/test_budget_manager.py::TestGetOptimizationRecommendations::test_recommendations_critical_alert PASSED [ 34%]
tests/test_budget_manager.py::TestGetOptimizationRecommendations::test_recommendations_projected_overage PASSED [ 34%]
tests/test_budget_manager.py::TestGetOptimizationRecommendations::test_recommendations_green_zone PASSED [ 34%]
tests/test_budget_manager.py::TestGetRecommendedStrategy::test_strategy_green_zone PASSED [ 35%]
tests/test_budget_manager.py::TestGetRecommendedStrategy::test_strategy_yellow_zone PASSED [ 35%]
tests/test_budget_manager.py::TestGetRecommendedStrategy::test_strategy_orange_zone PASSED [ 35%]
tests/test_budget_manager.py::TestGetRecommendedStrategy::test_strategy_red_zone PASSED [ 35%]
tests/test_budget_manager.py::TestGetRecommendedStrategy::test_strategy_critical_zone PASSED [ 35%]
tests/test_budget_manager.py::TestGetRecommendedStrategy::test_strategy_without_status_parameter PASSED [ 35%]
tests/test_budget_manager.py::TestCheckBudgetAlerts::test_check_alerts_critical PASSED [ 35%]
tests/test_budget_manager.py::TestCheckBudgetAlerts::test_check_alerts_red PASSED [ 35%]
tests/test_budget_manager.py::TestCheckBudgetAlerts::test_check_alerts_orange PASSED [ 35%]
tests/test_budget_manager.py::TestCheckBudgetAlerts::test_check_alerts_green PASSED [ 35%]
tests/test_budget_manager.py::TestTrackUsage::test_track_usage_success PASSED [ 35%]
tests/test_budget_manager.py::TestTrackUsage::test_track_usage_without_user PASSED [ 35%]
tests/test_budget_manager.py::TestTrackUsage::test_track_usage_exception PASSED [ 35%]
tests/test_budget_manager.py::TestOptimizationRecommendationsEdgeCases::test_recommendations_no_provider_data PASSED [ 35%]
tests/test_claude_service.py::TestZZZImportErrorHandling::test_import_error_handling PASSED [ 35%]
tests/test_claude_service.py::TestClaudeServiceInitialization::test_service_initialization_with_api_key PASSED [ 35%]
tests/test_claude_service.py::TestClaudeServiceInitialization::test_service_initialization_without_api_key PASSED [ 35%]
tests/test_claude_service.py::TestClaudeServiceInitialization::test_service_initialization_anthropic_not_available PASSED [ 35%]
tests/test_claude_service.py::TestClaudeServiceInitialization::test_service_initialization_client_error PASSED [ 35%]
tests/test_claude_service.py::TestValidationMethods::test_validate_claude_request_not_available PASSED [ 35%]
tests/test_claude_service.py::TestValidationMethods::test_validate_claude_request_available PASSED [ 35%]
tests/test_claude_service.py::TestHelperMethods::test_extract_user_message_from_message_param PASSED [ 35%]
tests/test_claude_service.py::TestHelperMethods::test_extract_user_message_from_messages_list PASSED [ 35%]
tests/test_claude_service.py::TestHelperMethods::test_extract_user_message_default PASSED [ 35%]
tests/test_claude_service.py::TestHelperMethods::test_extract_user_message_empty_messages PASSED [ 35%]
tests/test_claude_service.py::TestHelperMethods::test_get_model_name_with_custom_model PASSED [ 35%]
tests/test_claude_service.py::TestHelperMethods::test_get_model_name_with_default PASSED [ 35%]
tests/test_claude_service.py::TestHelperMethods::test_build_claude_request PASSED [ 35%]
tests/test_claude_service.py::TestHelperMethods::test_build_claude_request_default_params PASSED [ 35%]
tests/test_claude_service.py::TestHelperMethods::test_calculate_claude_cost PASSED [ 35%]
tests/test_claude_service.py::TestHelperMethods::test_extract_response_content_with_text PASSED [ 35%]
tests/test_claude_service.py::TestHelperMethods::test_extract_response_content_no_text PASSED [ 35%]
tests/test_claude_service.py::TestHelperMethods::test_extract_response_content_no_content PASSED [ 35%]
tests/test_claude_service.py::TestResponseBuilding::test_build_success_response PASSED [ 35%]
tests/test_claude_service.py::TestResponseBuilding::test_build_success_response_no_context PASSED [ 35%]
tests/test_claude_service.py::TestResponseBuilding::test_build_error_response PASSED [ 35%]
tests/test_claude_service.py::TestResponseBuilding::test_build_error_response_no_model PASSED [ 35%]
tests/test_claude_service.py::TestAvailabilityAndHealth::test_check_availability_no_client PASSED [ 35%]
tests/test_claude_service.py::TestAvailabilityAndHealth::test_check_availability_success PASSED [ 35%]
tests/test_claude_service.py::TestAvailabilityAndHealth::test_check_availability_error PASSED [ 35%]
tests/test_claude_service.py::TestAvailabilityAndHealth::test_get_health_status_healthy PASSED [ 35%]
tests/test_claude_service.py::TestAvailabilityAndHealth::test_get_health_status_error PASSED [ 35%]
tests/test_claude_service.py::TestGenerateResponse::test_generate_response_success PASSED [ 35%]
tests/test_claude_service.py::TestGenerateResponse::test_generate_response_not_available PASSED [ 36%]
tests/test_claude_service.py::TestGenerateResponse::test_generate_response_api_error PASSED [ 36%]
tests/test_claude_service.py::TestGenerateResponse::test_generate_response_with_messages_list PASSED [ 36%]
tests/test_claude_service.py::TestGenerateResponse::test_generate_response_with_context PASSED [ 36%]
tests/test_claude_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_returns_string PASSED [ 36%]
tests/test_claude_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_different_languages PASSED [ 36%]
tests/test_claude_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_with_history PASSED [ 36%]
tests/test_claude_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_unsupported_language PASSED [ 36%]
tests/test_claude_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_with_mood_triggers_english PASSED [ 36%]
tests/test_claude_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_with_mood_triggers_spanish PASSED [ 36%]
tests/test_claude_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_with_mood_triggers_french PASSED [ 36%]
tests/test_claude_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_with_mood_triggers_chinese PASSED [ 36%]
tests/test_claude_service.py::TestMissingBranchCoverage::test_get_conversation_prompt_no_user_messages_in_history PASSED [ 36%]
tests/test_claude_service.py::TestMissingBranchCoverage::test_get_conversation_prompt_empty_user_content_in_history PASSED [ 36%]
tests/test_claude_service.py::TestMissingBranchCoverage::test_extract_response_content_no_text_attribute PASSED [ 36%]
tests/test_claude_service.py::TestMissingBranchCoverage::test_extract_response_content_mixed_content_blocks PASSED [ 36%]
tests/test_claude_service.py::TestGlobalInstance::test_global_instance_exists PASSED [ 36%]
tests/test_claude_service.py::TestGlobalInstance::test_global_instance_has_correct_attributes PASSED [ 36%]
tests/test_config.py::test_settings_creation PASSED                      [ 36%]
tests/test_config.py::test_default_settings PASSED                       [ 36%]
tests/test_config.py::test_settings_caching PASSED                       [ 36%]
tests/test_content_processor.py::TestEnumsAndDataClasses::test_content_type_enum PASSED [ 36%]
tests/test_content_processor.py::TestEnumsAndDataClasses::test_processing_status_enum PASSED [ 36%]
tests/test_content_processor.py::TestEnumsAndDataClasses::test_learning_material_type_enum PASSED [ 36%]
tests/test_content_processor.py::TestEnumsAndDataClasses::test_processing_progress_creation PASSED [ 36%]
tests/test_content_processor.py::TestEnumsAndDataClasses::test_content_metadata_creation PASSED [ 36%]
tests/test_content_processor.py::TestEnumsAndDataClasses::test_content_metadata_type_conversion PASSED [ 36%]
tests/test_content_processor.py::TestEnumsAndDataClasses::test_learning_material_creation PASSED [ 36%]
tests/test_content_processor.py::TestEnumsAndDataClasses::test_learning_material_type_conversion PASSED [ 36%]
tests/test_content_processor.py::TestEnumsAndDataClasses::test_processed_content_creation PASSED [ 36%]
tests/test_content_processor.py::TestContentProcessorInit::test_init_basic_attributes PASSED [ 36%]
tests/test_content_processor.py::TestContentProcessorInit::test_init_configuration PASSED [ 36%]
tests/test_content_processor.py::TestContentProcessorInit::test_init_temp_directory_creation PASSED [ 36%]
tests/test_content_processor.py::TestContentProcessorInit::test_global_instance_exists PASSED [ 36%]
tests/test_content_processor.py::TestHelperMethods::test_generate_content_id PASSED [ 36%]
tests/test_content_processor.py::TestHelperMethods::test_generate_content_id_consistent_format PASSED [ 36%]
tests/test_content_processor.py::TestHelperMethods::test_update_progress_new_content PASSED [ 36%]
tests/test_content_processor.py::TestHelperMethods::test_update_progress_existing_content PASSED [ 36%]
tests/test_content_processor.py::TestHelperMethods::test_update_progress_with_error PASSED [ 36%]
tests/test_content_processor.py::TestHelperMethods::test_update_progress_time_estimation PASSED [ 36%]
tests/test_content_processor.py::TestHelperMethods::test_get_processing_progress_exists PASSED [ 36%]
tests/test_content_processor.py::TestHelperMethods::test_get_processing_progress_not_exists PASSED [ 36%]
tests/test_content_processor.py::TestContentTypeDetection::test_detect_youtube_standard_url PASSED [ 37%]
tests/test_content_processor.py::TestContentTypeDetection::test_detect_youtube_short_url PASSED [ 37%]
tests/test_content_processor.py::TestContentTypeDetection::test_detect_youtube_mobile_url PASSED [ 37%]
tests/test_content_processor.py::TestContentTypeDetection::test_detect_pdf_from_file_path PASSED [ 37%]
tests/test_content_processor.py::TestContentTypeDetection::test_detect_docx_from_file_path PASSED [ 37%]
tests/test_content_processor.py::TestContentTypeDetection::test_detect_text_from_file_path PASSED [ 37%]
tests/test_content_processor.py::TestContentTypeDetection::test_detect_web_article PASSED [ 37%]
tests/test_content_processor.py::TestContentTypeDetection::test_detect_unknown PASSED [ 37%]
tests/test_content_processor.py::TestYouTubeIDExtraction::test_extract_youtube_id_standard_url PASSED [ 37%]
tests/test_content_processor.py::TestYouTubeIDExtraction::test_extract_youtube_id_short_url PASSED [ 37%]
tests/test_content_processor.py::TestYouTubeIDExtraction::test_extract_youtube_id_embed_url PASSED [ 37%]
tests/test_content_processor.py::TestYouTubeIDExtraction::test_extract_youtube_id_mobile_url PASSED [ 37%]
tests/test_content_processor.py::TestYouTubeIDExtraction::test_extract_youtube_id_with_extra_params PASSED [ 37%]
tests/test_content_processor.py::TestYouTubeIDExtraction::test_extract_youtube_id_invalid_url PASSED [ 37%]
tests/test_content_processor.py::TestYouTubeIDExtraction::test_extract_youtube_id_malformed_url PASSED [ 37%]
tests/test_content_processor.py::TestYouTubeIDExtraction::test_extract_youtube_id_exception_handling PASSED [ 37%]
tests/test_content_processor.py::TestYouTubeContentExtraction::test_extract_youtube_content_success PASSED [ 37%]
tests/test_content_processor.py::TestYouTubeContentExtraction::test_extract_youtube_content_no_transcript PASSED [ 37%]
tests/test_content_processor.py::TestYouTubeContentExtraction::test_extract_youtube_content_invalid_url PASSED [ 37%]
tests/test_content_processor.py::TestYouTubeContentExtraction::test_extract_youtube_content_ydl_error PASSED [ 37%]
tests/test_content_processor.py::TestDocumentContentExtraction::test_extract_pdf_content_success PASSED [ 37%]
tests/test_content_processor.py::TestDocumentContentExtraction::test_extract_pdf_content_no_metadata PASSED [ 37%]
tests/test_content_processor.py::TestDocumentContentExtraction::test_extract_pdf_content_error PASSED [ 37%]
tests/test_content_processor.py::TestDocumentContentExtraction::test_extract_docx_content_success PASSED [ 37%]
tests/test_content_processor.py::TestDocumentContentExtraction::test_extract_docx_content_long_title PASSED [ 37%]
tests/test_content_processor.py::TestDocumentContentExtraction::test_extract_docx_content_error PASSED [ 37%]
tests/test_content_processor.py::TestDocumentContentExtraction::test_extract_text_content_success PASSED [ 37%]
tests/test_content_processor.py::TestDocumentContentExtraction::test_extract_text_content_empty_file PASSED [ 37%]
tests/test_content_processor.py::TestDocumentContentExtraction::test_extract_text_content_error PASSED [ 37%]
tests/test_content_processor.py::TestWebContentExtraction::test_extract_web_content_placeholder PASSED [ 37%]
tests/test_content_processor.py::TestWebContentExtraction::test_extract_web_content_error PASSED [ 37%]
tests/test_content_processor.py::TestAIContentAnalysis::test_analyze_content_success PASSED [ 37%]
tests/test_content_processor.py::TestAIContentAnalysis::test_analyze_content_ollama_unavailable PASSED [ 37%]
tests/test_content_processor.py::TestAIContentAnalysis::test_analyze_content_error_fallback PASSED [ 37%]
tests/test_content_processor.py::TestAIContentAnalysis::test_analyze_content_invalid_json PASSED [ 37%]
tests/test_content_processor.py::TestLearningMaterialGeneration::test_estimate_material_time_summary PASSED [ 37%]
tests/test_content_processor.py::TestLearningMaterialGeneration::test_estimate_material_time_flashcards PASSED [ 37%]
tests/test_content_processor.py::TestLearningMaterialGeneration::test_estimate_material_time_quiz PASSED [ 37%]
tests/test_content_processor.py::TestLearningMaterialGeneration::test_estimate_material_time_key_concepts PASSED [ 37%]
tests/test_content_processor.py::TestLearningMaterialGeneration::test_estimate_material_time_notes PASSED [ 37%]
tests/test_content_processor.py::TestLearningMaterialGeneration::test_generate_single_material_summary PASSED [ 37%]
tests/test_content_processor.py::TestLearningMaterialGeneration::test_generate_single_material_flashcards PASSED [ 37%]
tests/test_content_processor.py::TestLearningMaterialGeneration::test_generate_single_material_unsupported_type PASSED [ 37%]
tests/test_content_processor.py::TestLearningMaterialGeneration::test_generate_single_material_error PASSED [ 38%]
tests/test_content_processor.py::TestLearningMaterialGeneration::test_generate_learning_materials PASSED [ 38%]
tests/test_content_processor.py::TestSearchAndLibrary::test_get_processed_content_exists PASSED [ 38%]
tests/test_content_processor.py::TestSearchAndLibrary::test_get_processed_content_not_exists PASSED [ 38%]
tests/test_content_processor.py::TestSearchAndLibrary::test_get_content_library PASSED [ 38%]
tests/test_content_processor.py::TestSearchAndLibrary::test_matches_query_title_match PASSED [ 38%]
tests/test_content_processor.py::TestSearchAndLibrary::test_matches_query_topic_match PASSED [ 38%]
tests/test_content_processor.py::TestSearchAndLibrary::test_matches_query_content_match PASSED [ 38%]
tests/test_content_processor.py::TestSearchAndLibrary::test_passes_filters_no_filters PASSED [ 38%]
tests/test_content_processor.py::TestSearchAndLibrary::test_passes_filters_content_type PASSED [ 38%]
tests/test_content_processor.py::TestSearchAndLibrary::test_passes_filters_difficulty PASSED [ 38%]
tests/test_content_processor.py::TestSearchAndLibrary::test_passes_filters_language PASSED [ 38%]
tests/test_content_processor.py::TestSearchAndLibrary::test_calculate_relevance PASSED [ 38%]
tests/test_content_processor.py::TestSearchAndLibrary::test_get_content_snippet_query_found PASSED [ 38%]
tests/test_content_processor.py::TestSearchAndLibrary::test_get_content_snippet_query_not_found PASSED [ 38%]
tests/test_content_processor.py::TestSearchAndLibrary::test_search_content_basic PASSED [ 38%]
tests/test_content_processor.py::TestSearchAndLibrary::test_search_content_no_match PASSED [ 38%]
tests/test_content_processor.py::TestSearchAndLibrary::test_search_content_with_filters PASSED [ 38%]
tests/test_content_processor.py::TestContentProcessingWorkflow::test_process_content_returns_content_id PASSED [ 38%]
tests/test_content_processor.py::TestContentProcessingWorkflow::test_process_content_initializes_progress PASSED [ 38%]
tests/test_content_processor.py::TestContentProcessingWorkflow::test_process_content_default_material_types PASSED [ 38%]
tests/test_content_processor.py::TestContentTypeEdgeCases::test_detect_audio_file PASSED [ 38%]
tests/test_content_processor.py::TestContentTypeEdgeCases::test_detect_image_file PASSED [ 38%]
tests/test_content_processor.py::TestYouTubeTranscriptFallbacks::test_extract_youtube_content_generated_transcript PASSED [ 38%]
tests/test_content_processor.py::TestYouTubeTranscriptFallbacks::test_extract_youtube_content_no_transcript_at_all PASSED [ 38%]
tests/test_content_processor.py::TestWebContentExtractionSuccess::test_extract_web_content_success PASSED [ 38%]
tests/test_content_processor.py::TestMaterialGenerationEdgeCases::test_generate_learning_materials_with_exception PASSED [ 38%]
tests/test_content_processor.py::TestMaterialGenerationEdgeCases::test_generate_single_material_router_fallback PASSED [ 38%]
tests/test_content_processor.py::TestProcessContentExceptionHandling::test_process_content_initialization_exception PASSED [ 38%]
tests/test_content_processor.py::TestAsyncProcessingWorkflow::test_process_content_async_youtube_workflow PASSED [ 38%]
tests/test_content_processor.py::TestAsyncProcessingWorkflow::test_process_content_async_pdf_workflow PASSED [ 38%]
tests/test_content_processor.py::TestAsyncProcessingWorkflow::test_process_content_async_error_handling PASSED [ 38%]
tests/test_content_processor.py::TestSearchHelperMethods::test_build_search_result PASSED [ 38%]
tests/test_content_processor.py::TestProgressTrackingEdgeCases::test_update_progress_first_time_no_elapsed PASSED [ 38%]
tests/test_content_processor.py::TestContentTypeBranches::test_process_pdf_document_branch PASSED [ 38%]
tests/test_content_processor.py::TestContentTypeBranches::test_process_word_document_branch PASSED [ 38%]
tests/test_content_processor.py::TestContentTypeBranches::test_process_text_file_branch PASSED [ 38%]
tests/test_content_processor.py::TestContentTypeBranches::test_process_web_article_branch PASSED [ 38%]
tests/test_content_processor.py::TestContentTypeBranches::test_process_unsupported_content_type PASSED [ 38%]
tests/test_content_processor.py::TestMissingBranchCoverage::test_processing_progress_with_preinitialized_created_at PASSED [ 38%]
tests/test_content_processor.py::TestMissingBranchCoverage::test_detect_content_type_unknown_file_extension PASSED [ 38%]
tests/test_content_processor.py::TestMissingBranchCoverage::test_extract_youtube_id_from_embed_url PASSED [ 38%]
tests/test_content_processor.py::TestMissingBranchCoverage::test_extract_youtube_id_unsupported_youtube_path PASSED [ 39%]
tests/test_content_processor.py::TestMissingBranchCoverage::test_generate_learning_materials_with_none_material PASSED [ 39%]
tests/test_content_processor.py::TestMissingBranchCoverage::test_generate_learning_materials_with_exception PASSED [ 39%]
tests/test_content_processor.py::TestMissingBranchCoverage::test_calculate_relevance_score_topics_match_only PASSED [ 39%]
tests/test_conversation_analytics.py::TestLearningAnalyzerInit::test_learning_analyzer_initialization PASSED [ 39%]
tests/test_conversation_analytics.py::TestLearningAnalyzerInit::test_global_learning_analyzer_instance PASSED [ 39%]
tests/test_conversation_analytics.py::TestAnalyzeUserMessage::test_analyze_user_message_basic_metrics PASSED [ 39%]
tests/test_conversation_analytics.py::TestAnalyzeUserMessage::test_analyze_user_message_complexity_score PASSED [ 39%]
tests/test_conversation_analytics.py::TestAnalyzeUserMessage::test_analyze_user_message_complexity_capped_at_one PASSED [ 39%]
tests/test_conversation_analytics.py::TestAnalyzeUserMessage::test_analyze_user_message_detects_questions PASSED [ 39%]
tests/test_conversation_analytics.py::TestAnalyzeUserMessage::test_analyze_user_message_detects_excitement PASSED [ 39%]
tests/test_conversation_analytics.py::TestAnalyzeUserMessage::test_analyze_user_message_detects_formal_language PASSED [ 39%]
tests/test_conversation_analytics.py::TestAnalyzeUserMessage::test_analyze_user_message_no_engagement_indicators PASSED [ 39%]
tests/test_conversation_analytics.py::TestAnalyzeUserMessage::test_analyze_user_message_multiple_engagement_indicators PASSED [ 39%]
tests/test_conversation_analytics.py::TestGenerateLearningInsights::test_generate_learning_insights_extracts_new_vocabulary PASSED [ 39%]
tests/test_conversation_analytics.py::TestGenerateLearningInsights::test_generate_learning_insights_excludes_known_vocabulary PASSED [ 39%]
tests/test_conversation_analytics.py::TestGenerateLearningInsights::test_generate_learning_insights_engagement_level_low PASSED [ 39%]
tests/test_conversation_analytics.py::TestGenerateLearningInsights::test_generate_learning_insights_engagement_level_medium PASSED [ 39%]
tests/test_conversation_analytics.py::TestGenerateLearningInsights::test_generate_learning_insights_engagement_level_high PASSED [ 39%]
tests/test_conversation_analytics.py::TestGenerateLearningInsights::test_generate_learning_insights_quality_score_calculation PASSED [ 39%]
tests/test_conversation_analytics.py::TestGenerateLearningInsights::test_generate_learning_insights_quality_factors PASSED [ 39%]
tests/test_conversation_analytics.py::TestGenerateLearningInsights::test_generate_learning_insights_suggested_focus PASSED [ 39%]
tests/test_conversation_analytics.py::TestGenerateLearningInsights::test_generate_learning_insights_empty_lists PASSED [ 39%]
tests/test_conversation_analytics.py::TestGenerateSessionInsights::test_generate_session_insights_conversation_just_started PASSED [ 39%]
tests/test_conversation_analytics.py::TestGenerateSessionInsights::test_generate_session_insights_with_full_exchange PASSED [ 39%]
tests/test_conversation_analytics.py::TestGenerateSessionInsights::test_generate_session_insights_vocabulary_used_limited PASSED [ 39%]
tests/test_conversation_analytics.py::TestGenerateSessionInsights::test_generate_session_insights_session_duration PASSED [ 39%]
tests/test_conversation_analytics.py::TestGenerateSessionInsights::test_generate_session_insights_fallback_basic_interaction PASSED [ 39%]
tests/test_conversation_analytics.py::TestGenerateSessionInsights::test_generate_session_insights_message_count PASSED [ 39%]
tests/test_conversation_analytics.py::TestUpdateConversationContext::test_update_conversation_context_adds_new_vocabulary PASSED [ 39%]
tests/test_conversation_analytics.py::TestUpdateConversationContext::test_update_conversation_context_keeps_unique_vocabulary PASSED [ 39%]
tests/test_conversation_analytics.py::TestUpdateConversationContext::test_update_conversation_context_limits_vocabulary_to_50 PASSED [ 39%]
tests/test_conversation_analytics.py::TestUpdateConversationContext::test_update_conversation_context_updates_last_activity PASSED [ 39%]
tests/test_conversation_analytics.py::TestUpdateConversationContext::test_update_conversation_context_empty_new_vocabulary PASSED [ 39%]
tests/test_conversation_analytics.py::TestUpdateConversationContext::test_update_conversation_context_returns_context PASSED [ 39%]
tests/test_conversation_manager.py::TestConversationManagerProperties::test_active_conversations_property PASSED [ 39%]
tests/test_conversation_manager.py::TestConversationManagerProperties::test_context_cache_property PASSED [ 39%]
tests/test_conversation_manager.py::TestConversationManagerProperties::test_message_history_property PASSED [ 39%]
tests/test_conversation_manager.py::TestStartConversation::test_start_conversation_basic PASSED [ 39%]
tests/test_conversation_manager.py::TestStartConversation::test_start_conversation_with_all_params PASSED [ 39%]
tests/test_conversation_manager.py::TestSendMessage::test_send_message_success PASSED [ 39%]
tests/test_conversation_manager.py::TestSendMessage::test_send_message_conversation_not_found PASSED [ 39%]
tests/test_conversation_manager.py::TestSendMessage::test_send_message_with_extra_kwargs PASSED [ 40%]
tests/test_conversation_manager.py::TestConversationHistory::test_get_conversation_history_no_limit PASSED [ 40%]
tests/test_conversation_manager.py::TestConversationHistory::test_get_conversation_history_with_limit PASSED [ 40%]
tests/test_conversation_manager.py::TestConversationSummary::test_get_conversation_summary PASSED [ 40%]
tests/test_conversation_manager.py::TestPauseResume::test_pause_conversation PASSED [ 40%]
tests/test_conversation_manager.py::TestPauseResume::test_resume_conversation_success PASSED [ 40%]
tests/test_conversation_manager.py::TestPauseResume::test_resume_conversation_failure PASSED [ 40%]
tests/test_conversation_manager.py::TestEndConversation::test_end_conversation_with_save PASSED [ 40%]
tests/test_conversation_manager.py::TestEndConversation::test_end_conversation_without_save PASSED [ 40%]
tests/test_conversation_manager.py::TestGenerateLearningInsights::test_generate_learning_insights_success PASSED [ 40%]
tests/test_conversation_manager.py::TestGenerateLearningInsights::test_generate_learning_insights_conversation_not_found PASSED [ 40%]
tests/test_conversation_manager.py::TestConvenienceFunctions::test_start_learning_conversation PASSED [ 40%]
tests/test_conversation_manager.py::TestConvenienceFunctions::test_send_learning_message PASSED [ 40%]
tests/test_conversation_manager.py::TestConvenienceFunctions::test_get_conversation_summary_convenience PASSED [ 40%]
tests/test_conversation_manager.py::TestConvenienceFunctions::test_end_learning_conversation PASSED [ 40%]
tests/test_conversation_manager.py::TestGlobalInstance::test_global_instance_exists PASSED [ 40%]
tests/test_conversation_manager.py::TestGlobalInstance::test_global_instance_has_managers PASSED [ 40%]
tests/test_conversation_messages.py::TestMessageHandlerInit::test_message_handler_initialization PASSED [ 40%]
tests/test_conversation_messages.py::TestMessageHandlerInit::test_global_message_handler_instance PASSED [ 40%]
tests/test_conversation_messages.py::TestSendMessage::test_send_message_success_flow PASSED [ 40%]
tests/test_conversation_messages.py::TestSendMessage::test_send_message_with_scenario_progress PASSED [ 40%]
tests/test_conversation_messages.py::TestSendMessage::test_send_message_handles_ai_error PASSED [ 40%]
tests/test_conversation_messages.py::TestProcessUserMessage::test_process_user_message_adds_to_history PASSED [ 40%]
tests/test_conversation_messages.py::TestProcessUserMessage::test_process_user_message_analyzes_content PASSED [ 40%]
tests/test_conversation_messages.py::TestGenerateAIResponse::test_generate_ai_response_success PASSED [ 40%]
tests/test_conversation_messages.py::TestGenerateAIResponse::test_generate_ai_response_with_pronunciation_feedback PASSED [ 40%]
tests/test_conversation_messages.py::TestGenerateAIResponse::test_generate_ai_response_handles_exception PASSED [ 40%]
tests/test_conversation_messages.py::TestHandleScenarioInteraction::test_handle_scenario_interaction_success PASSED [ 40%]
tests/test_conversation_messages.py::TestHandleScenarioInteraction::test_handle_scenario_interaction_not_scenario_based PASSED [ 40%]
tests/test_conversation_messages.py::TestHandleScenarioInteraction::test_handle_scenario_interaction_no_progress_id PASSED [ 40%]
tests/test_conversation_messages.py::TestHandleScenarioInteraction::test_handle_scenario_interaction_handles_exception PASSED [ 40%]
tests/test_conversation_messages.py::TestBuildConversationResponse::test_build_conversation_response_success PASSED [ 40%]
tests/test_conversation_messages.py::TestBuildConversationResponse::test_build_conversation_response_with_scenario_progress PASSED [ 40%]
tests/test_conversation_messages.py::TestBuildConversationResponse::test_build_conversation_response_handles_error PASSED [ 40%]
tests/test_conversation_messages.py::TestGetConversationHistory::test_get_conversation_history_returns_messages PASSED [ 40%]
tests/test_conversation_messages.py::TestGetConversationHistory::test_get_conversation_history_with_limit PASSED [ 40%]
tests/test_conversation_messages.py::TestGetConversationHistory::test_get_conversation_history_excludes_system_messages PASSED [ 40%]
tests/test_conversation_messages.py::TestGetConversationHistory::test_get_conversation_history_nonexistent_conversation PASSED [ 40%]
tests/test_conversation_messages.py::TestPrivateHelperMethods::test_add_message_creates_conversation_history PASSED [ 40%]
tests/test_conversation_messages.py::TestPrivateHelperMethods::test_add_message_appends_to_existing_history PASSED [ 40%]
tests/test_conversation_messages.py::TestPrivateHelperMethods::test_add_message_with_metadata PASSED [ 40%]
tests/test_conversation_messages.py::TestPrivateHelperMethods::test_add_message_triggers_compression_check PASSED [ 40%]
tests/test_conversation_messages.py::TestPrivateHelperMethods::test_prepare_ai_context_formats_messages PASSED [ 40%]
tests/test_conversation_messages.py::TestPrivateHelperMethods::test_prepare_ai_context_limits_messages PASSED [ 41%]
tests/test_conversation_messages.py::TestPrivateHelperMethods::test_maybe_compress_context_no_compression_needed PASSED [ 41%]
tests/test_conversation_messages.py::TestPrivateHelperMethods::test_maybe_compress_context_compresses_when_needed PASSED [ 41%]
tests/test_conversation_messages.py::TestPrivateHelperMethods::test_maybe_compress_context_preserves_system_messages PASSED [ 41%]
tests/test_conversation_messages.py::TestPrivateHelperMethods::test_maybe_compress_context_nonexistent_conversation PASSED [ 41%]
tests/test_conversation_messages.py::TestPrivateHelperMethods::test_maybe_compress_context_no_compression_when_compressed_count_zero PASSED [ 41%]
tests/test_conversation_models.py::TestConversationEnums::test_conversation_status_enum PASSED [ 41%]
tests/test_conversation_models.py::TestConversationEnums::test_message_role_enum PASSED [ 41%]
tests/test_conversation_models.py::TestConversationEnums::test_learning_focus_enum PASSED [ 41%]
tests/test_conversation_models.py::TestConversationContext::test_conversation_context_with_all_fields PASSED [ 41%]
tests/test_conversation_models.py::TestConversationContext::test_conversation_context_with_none_optional_fields PASSED [ 41%]
tests/test_conversation_models.py::TestConversationContext::test_conversation_context_without_optional_fields PASSED [ 41%]
tests/test_conversation_models.py::TestConversationMessage::test_conversation_message_with_all_fields PASSED [ 41%]
tests/test_conversation_models.py::TestConversationMessage::test_conversation_message_with_none_metadata PASSED [ 41%]
tests/test_conversation_models.py::TestConversationMessage::test_conversation_message_without_metadata PASSED [ 41%]
tests/test_conversation_models.py::TestConversationMessage::test_conversation_message_roles PASSED [ 41%]
tests/test_conversation_models.py::TestLearningInsight::test_learning_insight_creation PASSED [ 41%]
tests/test_conversation_models.py::TestLearningInsight::test_learning_insight_with_empty_lists PASSED [ 41%]
tests/test_conversation_models.py::TestDataclassIntegration::test_complete_conversation_flow PASSED [ 41%]
tests/test_conversation_models.py::TestDataclassIntegration::test_scenario_based_conversation PASSED [ 41%]
tests/test_conversation_models.py::TestDataclassIntegration::test_message_metadata_mutations PASSED [ 41%]
tests/test_conversation_persistence.py::test_initialization PASSED       [ 41%]
tests/test_conversation_persistence.py::test_global_instance_exists PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_new_success PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_new_with_numeric_user_id PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_new_with_non_numeric_user_id PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_new_with_scenario_data PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_new_active_status PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_new_paused_status PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_new_sets_title_from_topic PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_new_no_topic_uses_default_title PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_update_existing PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_update_language PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_update_is_active PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_update_last_message_at PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_update_context_data PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_completed_sets_ended_at PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_update_non_completed_no_ended_at PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_database_error PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_unexpected_error PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_conversation_commit_error PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_messages_success PASSED [ 41%]
tests/test_conversation_persistence.py::test_save_messages_only_new_messages PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_messages_with_metadata PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_messages_with_missing_metadata_fields PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_messages_converts_role_enum PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_messages_preserves_timestamp PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_messages_conversation_not_found PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_messages_database_error PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_messages_unexpected_error PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_messages_commit_error PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_learning_progress_success PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_learning_progress_extracts_user_id PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_learning_progress_saves_vocabulary_items PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_learning_progress_no_vocabulary_introduced PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_learning_progress_estimates_difficulty PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_learning_progress_no_vocab_progress_exists PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_learning_progress_no_conversation_progress_exists PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_learning_progress_database_error PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_learning_progress_unexpected_error PASSED [ 42%]
tests/test_conversation_persistence.py::test_save_learning_progress_commit_error PASSED [ 42%]
tests/test_conversation_persistence.py::test_load_conversation_success PASSED [ 42%]
tests/test_conversation_persistence.py::test_load_conversation_not_found PASSED [ 42%]
tests/test_conversation_persistence.py::test_load_conversation_with_context_data PASSED [ 42%]
tests/test_conversation_persistence.py::test_load_conversation_with_null_context_data PASSED [ 42%]
tests/test_conversation_persistence.py::test_load_conversation_messages_ordered_by_timestamp PASSED [ 42%]
tests/test_conversation_persistence.py::test_load_conversation_no_messages PASSED [ 42%]
tests/test_conversation_persistence.py::test_load_conversation_database_error PASSED [ 42%]
tests/test_conversation_persistence.py::test_load_conversation_unexpected_error PASSED [ 42%]
tests/test_conversation_persistence.py::test_load_conversation_message_query_error PASSED [ 42%]
tests/test_conversation_persistence.py::test_convert_message_role_user PASSED [ 42%]
tests/test_conversation_persistence.py::test_convert_message_role_assistant PASSED [ 42%]
tests/test_conversation_persistence.py::test_convert_message_role_system PASSED [ 42%]
tests/test_conversation_persistence.py::test_convert_message_role_unknown_defaults_to_user PASSED [ 42%]
tests/test_conversation_persistence.py::test_convert_db_message PASSED   [ 42%]
tests/test_conversation_persistence.py::test_convert_db_message_with_zero_metadata PASSED [ 42%]
tests/test_conversation_persistence.py::test_convert_db_message_formats_timestamp_iso PASSED [ 42%]
tests/test_conversation_persistence.py::test_estimate_difficulty_beginner PASSED [ 42%]
tests/test_conversation_persistence.py::test_estimate_difficulty_elementary PASSED [ 42%]
tests/test_conversation_persistence.py::test_estimate_difficulty_intermediate PASSED [ 42%]
tests/test_conversation_persistence.py::test_estimate_difficulty_upper_intermediate PASSED [ 42%]
tests/test_conversation_persistence.py::test_estimate_difficulty_advanced PASSED [ 42%]
tests/test_conversation_persistence.py::test_estimate_difficulty_proficient PASSED [ 42%]
tests/test_conversation_persistence.py::test_estimate_difficulty_unknown_defaults_to_5 PASSED [ 42%]
tests/test_conversation_persistence.py::test_extract_user_id_numeric_string PASSED [ 42%]
tests/test_conversation_persistence.py::test_extract_user_id_non_numeric_defaults_to_1 PASSED [ 43%]
tests/test_conversation_persistence.py::test_extract_user_id_empty_string_defaults_to_1 PASSED [ 43%]
tests/test_conversation_persistence.py::test_vocabulary_exists_found PASSED [ 43%]
tests/test_conversation_persistence.py::test_vocabulary_exists_not_found PASSED [ 43%]
tests/test_conversation_persistence.py::test_vocabulary_exists_checks_user_language_word PASSED [ 43%]
tests/test_conversation_persistence.py::test_vocabulary_exists_query_chain PASSED [ 43%]
tests/test_conversation_persistence.py::test_save_all_components_in_sequence PASSED [ 43%]
tests/test_conversation_persistence.py::test_error_handling_across_all_operations PASSED [ 43%]
tests/test_conversation_persistence.py::TestSessionNoneExceptionHandling::test_save_conversation_session_creation_failure PASSED [ 43%]
tests/test_conversation_persistence.py::TestSessionNoneExceptionHandling::test_save_conversation_sqlalchemy_error_before_session_assignment PASSED [ 43%]
tests/test_conversation_persistence.py::TestSessionNoneExceptionHandling::test_save_messages_session_creation_failure PASSED [ 43%]
tests/test_conversation_persistence.py::TestSessionNoneExceptionHandling::test_save_messages_sqlalchemy_error_before_session_assignment PASSED [ 43%]
tests/test_conversation_persistence.py::TestSessionNoneExceptionHandling::test_save_learning_progress_session_creation_failure PASSED [ 43%]
tests/test_conversation_persistence.py::TestSessionNoneExceptionHandling::test_save_learning_progress_sqlalchemy_error_before_session PASSED [ 43%]
tests/test_conversation_persistence.py::TestSessionNoneExceptionHandling::test_load_conversation_session_creation_failure PASSED [ 43%]
tests/test_conversation_persistence.py::TestSessionNoneExceptionHandling::test_load_conversation_sqlalchemy_error_before_session PASSED [ 43%]
tests/test_conversation_persistence.py::TestVocabularyExistsBranch::test_save_learning_progress_skips_existing_vocabulary PASSED [ 43%]
tests/test_conversation_persistence.py::TestVocabularyExistsBranch::test_save_learning_progress_adds_all_new_vocabulary PASSED [ 43%]
tests/test_conversation_state.py::TestConversationStateManagerInit::test_init_creates_empty_registries PASSED [ 43%]
tests/test_conversation_state.py::TestStartConversation::test_start_conversation_basic PASSED [ 43%]
tests/test_conversation_state.py::TestStartConversation::test_start_conversation_with_all_params PASSED [ 43%]
tests/test_conversation_state.py::TestStartConversation::test_start_conversation_with_scenario PASSED [ 43%]
tests/test_conversation_state.py::TestStartConversation::test_start_conversation_scenario_without_progress PASSED [ 43%]
tests/test_conversation_state.py::TestPauseConversation::test_pause_existing_conversation PASSED [ 43%]
tests/test_conversation_state.py::TestPauseConversation::test_pause_nonexistent_conversation PASSED [ 43%]
tests/test_conversation_state.py::TestResumeConversation::test_resume_conversation_already_active PASSED [ 43%]
tests/test_conversation_state.py::TestResumeConversation::test_resume_conversation_from_database PASSED [ 43%]
tests/test_conversation_state.py::TestResumeConversation::test_resume_conversation_not_found PASSED [ 43%]
tests/test_conversation_state.py::TestEndConversation::test_end_conversation_with_save PASSED [ 43%]
tests/test_conversation_state.py::TestEndConversation::test_end_conversation_without_save PASSED [ 43%]
tests/test_conversation_state.py::TestEndConversation::test_end_conversation_not_found PASSED [ 43%]
tests/test_conversation_state.py::TestGetConversationSummary::test_get_conversation_summary_success PASSED [ 43%]
tests/test_conversation_state.py::TestGetConversationSummary::test_get_conversation_summary_not_found PASSED [ 43%]
tests/test_conversation_state.py::TestPrivateHelperMethods::test_save_conversation_to_db PASSED [ 43%]
tests/test_conversation_state.py::TestPrivateHelperMethods::test_save_messages_to_db PASSED [ 43%]
tests/test_conversation_state.py::TestPrivateHelperMethods::test_save_learning_progress PASSED [ 43%]
tests/test_conversation_state.py::TestPrivateHelperMethods::test_load_conversation_from_db_success PASSED [ 43%]
tests/test_conversation_state.py::TestPrivateHelperMethods::test_load_conversation_from_db_not_found PASSED [ 43%]
tests/test_conversation_state.py::TestPrivateHelperMethods::test_save_conversation_to_db_no_context PASSED [ 43%]
tests/test_conversation_state.py::TestPrivateHelperMethods::test_save_messages_to_db_no_messages PASSED [ 43%]
tests/test_conversation_state.py::TestPrivateHelperMethods::test_save_messages_to_db_conversation_not_found PASSED [ 43%]
tests/test_conversation_state.py::TestPrivateHelperMethods::test_save_learning_progress_no_context PASSED [ 43%]
tests/test_conversation_state.py::TestGlobalInstance::test_global_instance_exists PASSED [ 44%]
tests/test_conversation_state.py::TestGlobalInstance::test_global_instance_has_registries PASSED [ 44%]
tests/test_database_chromadb_config.py::TestChromaDBManagerInitialization::test_manager_initialization_default_directory PASSED [ 44%]
tests/test_database_chromadb_config.py::TestChromaDBManagerInitialization::test_manager_initialization_custom_directory PASSED [ 44%]
tests/test_database_chromadb_config.py::TestChromaDBManagerInitialization::test_directory_creation PASSED [ 44%]
tests/test_database_chromadb_config.py::TestLazyProperties::test_client_property_lazy_initialization PASSED [ 44%]
tests/test_database_chromadb_config.py::TestLazyProperties::test_embedding_model_property_lazy_initialization PASSED [ 44%]
tests/test_database_chromadb_config.py::TestCollectionManagement::test_get_or_create_collection_from_cache PASSED [ 44%]
tests/test_database_chromadb_config.py::TestCollectionManagement::test_get_or_create_collection_exists PASSED [ 44%]
tests/test_database_chromadb_config.py::TestCollectionManagement::test_get_or_create_collection_new PASSED [ 44%]
tests/test_database_chromadb_config.py::TestCollectionManagement::test_get_or_create_collection_new_no_metadata PASSED [ 44%]
tests/test_database_chromadb_config.py::TestCollectionManagement::test_initialize_collections PASSED [ 44%]
tests/test_database_chromadb_config.py::TestDocumentEmbeddings::test_add_document_embedding PASSED [ 44%]
tests/test_database_chromadb_config.py::TestDocumentEmbeddings::test_add_document_embedding_minimal_metadata PASSED [ 44%]
tests/test_database_chromadb_config.py::TestConversationEmbeddings::test_add_conversation_embedding PASSED [ 44%]
tests/test_database_chromadb_config.py::TestConversationEmbeddings::test_add_conversation_embedding_minimal_metadata PASSED [ 44%]
tests/test_database_chromadb_config.py::TestSearchFunctionality::test_search_similar_content_no_filters PASSED [ 44%]
tests/test_database_chromadb_config.py::TestSearchFunctionality::test_search_similar_content_with_user_filter PASSED [ 44%]
tests/test_database_chromadb_config.py::TestSearchFunctionality::test_search_similar_content_with_language_filter PASSED [ 44%]
tests/test_database_chromadb_config.py::TestSearchFunctionality::test_search_similar_content_with_both_filters PASSED [ 44%]
tests/test_database_chromadb_config.py::TestUserLearningPatterns::test_get_user_learning_patterns PASSED [ 44%]
tests/test_database_chromadb_config.py::TestGDPRCompliance::test_delete_user_data_with_items PASSED [ 44%]
tests/test_database_chromadb_config.py::TestGDPRCompliance::test_delete_user_data_no_items PASSED [ 44%]
tests/test_database_chromadb_config.py::TestGDPRCompliance::test_delete_user_data_with_error PASSED [ 44%]
tests/test_database_chromadb_config.py::TestCollectionStatistics::test_get_collection_stats PASSED [ 44%]
tests/test_database_chromadb_config.py::TestCollectionStatistics::test_get_collection_stats_with_error PASSED [ 44%]
tests/test_database_chromadb_config.py::TestCollectionStatistics::test_reset_collection_exists PASSED [ 44%]
tests/test_database_chromadb_config.py::TestCollectionStatistics::test_reset_collection_not_exists PASSED [ 44%]
tests/test_database_chromadb_config.py::TestCollectionStatistics::test_reset_collection_not_in_cache PASSED [ 44%]
tests/test_database_chromadb_config.py::TestCollectionStatistics::test_reset_all_collections PASSED [ 44%]
tests/test_database_chromadb_config.py::TestConvenienceFunctions::test_initialize_chromadb PASSED [ 44%]
tests/test_database_chromadb_config.py::TestConvenienceFunctions::test_get_chromadb_client PASSED [ 44%]
tests/test_database_chromadb_config.py::TestConvenienceFunctions::test_search_documents PASSED [ 44%]
tests/test_database_chromadb_config.py::TestConvenienceFunctions::test_search_documents_no_language PASSED [ 44%]
tests/test_database_chromadb_config.py::TestConvenienceFunctions::test_search_conversations PASSED [ 44%]
tests/test_database_chromadb_config.py::TestConvenienceFunctions::test_search_conversations_no_language PASSED [ 44%]
tests/test_database_chromadb_config.py::TestGlobalInstance::test_global_instance_exists PASSED [ 44%]
tests/test_database_chromadb_config.py::TestGlobalInstance::test_global_instance_default_directory PASSED [ 44%]
tests/test_database_config.py::TestDatabaseConfig::test_database_config_defaults PASSED [ 44%]
tests/test_database_config.py::TestDatabaseConfig::test_database_config_sqlite_url_from_settings PASSED [ 44%]
tests/test_database_config.py::TestDatabaseConfig::test_database_config_sqlite_url_property PASSED [ 44%]
tests/test_database_config.py::TestDatabaseConfig::test_database_config_sqlite_url_fallback_to_sqlite_path PASSED [ 44%]
tests/test_database_config.py::TestDatabaseManagerInit::test_database_manager_initialization PASSED [ 45%]
tests/test_database_config.py::TestDatabaseManagerInit::test_ensure_data_directories_calls_makedirs PASSED [ 45%]
tests/test_database_config.py::TestDatabaseManagerInit::test_setup_event_listeners_registers_handlers PASSED [ 45%]
tests/test_database_config.py::TestDatabaseEngines::test_get_primary_engine_returns_sqlite PASSED [ 45%]
tests/test_database_config.py::TestDatabaseEngines::test_sqlite_engine_creates_engine_with_queue_pool PASSED [ 45%]
tests/test_database_config.py::TestDatabaseEngines::test_sqlite_engine_reuses_existing_engine PASSED [ 45%]
tests/test_database_config.py::TestDatabaseEngines::test_chromadb_client_creates_persistent_client PASSED [ 45%]
tests/test_database_config.py::TestDatabaseEngines::test_chromadb_client_reuses_existing_client PASSED [ 45%]
tests/test_database_config.py::TestDatabaseEngines::test_duckdb_connection_creates_connection PASSED [ 45%]
tests/test_database_config.py::TestDatabaseEngines::test_duckdb_connection_reuses_existing_connection PASSED [ 45%]
tests/test_database_config.py::TestDatabaseEngines::test_get_sqlite_session_creates_session PASSED [ 45%]
tests/test_database_config.py::TestHealthChecks::test_test_chromadb_connection_healthy PASSED [ 45%]
tests/test_database_config.py::TestHealthChecks::test_test_chromadb_connection_unhealthy PASSED [ 45%]
tests/test_database_config.py::TestHealthChecks::test_test_sqlite_connection_healthy PASSED [ 45%]
tests/test_database_config.py::TestHealthChecks::test_test_sqlite_connection_unhealthy PASSED [ 45%]
tests/test_database_config.py::TestHealthChecks::test_test_duckdb_connection_healthy PASSED [ 45%]
tests/test_database_config.py::TestHealthChecks::test_test_duckdb_connection_unhealthy PASSED [ 45%]
tests/test_database_config.py::TestHealthChecks::test_get_primary_database_type PASSED [ 45%]
tests/test_database_config.py::TestHealthChecks::test_test_all_connections_success PASSED [ 45%]
tests/test_database_config.py::TestConnectionStats::test_get_connection_stats_with_queue_pool PASSED [ 45%]
tests/test_database_config.py::TestConnectionStats::test_get_connection_stats_with_static_pool PASSED [ 45%]
tests/test_database_config.py::TestConnectionStats::test_get_connection_stats_no_engine PASSED [ 45%]
tests/test_database_config.py::TestConnectionStats::test_get_health_summary_all_healthy PASSED [ 45%]
tests/test_database_config.py::TestConnectionStats::test_get_health_summary_degraded PASSED [ 45%]
tests/test_database_config.py::TestConnectionStats::test_reset_connection_stats PASSED [ 45%]
tests/test_database_config.py::TestConnectionStats::test_close_all_connections PASSED [ 45%]
tests/test_database_config.py::TestFastAPIDependencies::test_get_db_session_yields_session PASSED [ 45%]
tests/test_database_config.py::TestFastAPIDependencies::test_get_db_session_context_commits_on_success PASSED [ 45%]
tests/test_database_config.py::TestFastAPIDependencies::test_get_db_session_context_rollback_on_error PASSED [ 45%]
tests/test_database_config.py::TestFastAPIDependencies::test_get_chromadb_client_dependency PASSED [ 45%]
tests/test_database_config.py::TestFastAPIDependencies::test_get_duckdb_connection_dependency PASSED [ 45%]
tests/test_database_config.py::TestFastAPIDependencies::test_get_database_health_dependency PASSED [ 45%]
tests/test_database_config.py::TestFastAPIDependencies::test_check_database_health_all_healthy PASSED [ 45%]
tests/test_database_config.py::TestFastAPIDependencies::test_check_database_health_degraded PASSED [ 45%]
tests/test_database_config.py::TestFastAPIDependencies::test_check_database_health_exception PASSED [ 45%]
tests/test_database_config.py::TestFastAPIDependencies::test_get_primary_db_session_convenience PASSED [ 45%]
tests/test_database_config.py::TestFastAPIDependencies::test_get_sqlite_session_convenience PASSED [ 45%]
tests/test_database_config.py::TestGlobalInstance::test_global_db_manager_exists PASSED [ 45%]
tests/test_database_config.py::TestGlobalInstance::test_global_db_manager_has_config PASSED [ 45%]
tests/test_database_config.py::TestEdgeCases::test_get_connection_stats_pool_without_metrics PASSED [ 45%]
tests/test_database_config.py::TestEdgeCases::test_test_sqlite_connection_no_row_returned PASSED [ 45%]
tests/test_database_config.py::TestEdgeCases::test_test_duckdb_connection_no_result PASSED [ 45%]
tests/test_database_config.py::TestEdgeCases::test_close_all_connections_with_none_values PASSED [ 45%]
tests/test_database_config.py::TestEdgeCases::test_event_listeners_called_on_engine_operations PASSED [ 46%]
tests/test_database_config.py::TestEdgeCases::test_sqlite_url_with_non_sqlite_database_url PASSED [ 46%]
tests/test_database_config.py::TestEventListeners::test_event_listeners_registered_during_init PASSED [ 46%]
tests/test_database_config.py::TestEventListeners::test_receive_connect_callback PASSED [ 46%]
tests/test_database_config.py::TestEventListeners::test_receive_checkout_and_checkin_callbacks PASSED [ 46%]
tests/test_database_local_config.py::TestLocalDatabaseManagerInit::test_init_creates_directory PASSED [ 46%]
tests/test_database_local_config.py::TestLocalDatabaseManagerInit::test_init_with_existing_directory PASSED [ 46%]
tests/test_database_local_config.py::TestLocalDatabaseManagerInit::test_init_default_directory PASSED [ 46%]
tests/test_database_local_config.py::TestDuckDBConnection::test_duckdb_connection_lazy_initialization PASSED [ 46%]
tests/test_database_local_config.py::TestDuckDBConnection::test_duckdb_connection_reuses_existing PASSED [ 46%]
tests/test_database_local_config.py::TestDuckDBConnection::test_setup_duckdb_extensions_success PASSED [ 46%]
tests/test_database_local_config.py::TestDuckDBConnection::test_setup_duckdb_extensions_failure PASSED [ 46%]
tests/test_database_local_config.py::TestSQLiteEngine::test_sqlite_engine_lazy_initialization PASSED [ 46%]
tests/test_database_local_config.py::TestSQLiteEngine::test_sqlite_engine_reuses_existing PASSED [ 46%]
tests/test_database_local_config.py::TestSQLiteEngine::test_sqlite_engine_configuration PASSED [ 46%]
tests/test_database_local_config.py::TestSQLiteSessionFactory::test_sqlite_session_factory_lazy_initialization PASSED [ 46%]
tests/test_database_local_config.py::TestSQLiteSessionFactory::test_sqlite_session_factory_reuses_existing PASSED [ 46%]
tests/test_database_local_config.py::TestSchemaInitialization::test_initialize_local_schemas PASSED [ 46%]
tests/test_database_local_config.py::TestSchemaInitialization::test_initialize_sqlite_schema_creates_all_tables PASSED [ 46%]
tests/test_database_local_config.py::TestSchemaInitialization::test_initialize_sqlite_schema_creates_indexes PASSED [ 46%]
tests/test_database_local_config.py::TestSchemaInitialization::test_initialize_duckdb_schema_creates_tables PASSED [ 46%]
tests/test_database_local_config.py::TestSchemaInitialization::test_initialize_duckdb_schema_with_failures PASSED [ 46%]
tests/test_database_local_config.py::TestContextManagers::test_sqlite_session_success PASSED [ 46%]
tests/test_database_local_config.py::TestContextManagers::test_sqlite_session_rollback_on_error PASSED [ 46%]
tests/test_database_local_config.py::TestContextManagers::test_sqlite_session_closes_on_exit PASSED [ 46%]
tests/test_database_local_config.py::TestContextManagers::test_duckdb_cursor_success PASSED [ 46%]
tests/test_database_local_config.py::TestContextManagers::test_duckdb_cursor_rollback_on_error PASSED [ 46%]
tests/test_database_local_config.py::TestUserProfile::test_add_user_profile_success PASSED [ 46%]
tests/test_database_local_config.py::TestUserProfile::test_add_user_profile_without_optional_fields PASSED [ 46%]
tests/test_database_local_config.py::TestUserProfile::test_add_user_profile_update_existing PASSED [ 46%]
tests/test_database_local_config.py::TestUserProfile::test_add_user_profile_failure PASSED [ 46%]
tests/test_database_local_config.py::TestUserProfile::test_get_user_profile_exists PASSED [ 46%]
tests/test_database_local_config.py::TestUserProfile::test_get_user_profile_not_exists PASSED [ 46%]
tests/test_database_local_config.py::TestUserProfile::test_get_user_profile_failure PASSED [ 46%]
tests/test_database_local_config.py::TestConversationOperations::test_save_conversation_locally_success PASSED [ 46%]
tests/test_database_local_config.py::TestConversationOperations::test_save_conversation_without_optional_fields PASSED [ 46%]
tests/test_database_local_config.py::TestConversationOperations::test_save_conversation_failure PASSED [ 46%]
tests/test_database_local_config.py::TestConversationOperations::test_get_recent_conversations_with_data PASSED [ 46%]
tests/test_database_local_config.py::TestConversationOperations::test_get_recent_conversations_empty PASSED [ 46%]
tests/test_database_local_config.py::TestConversationOperations::test_get_recent_conversations_respects_limit PASSED [ 46%]
tests/test_database_local_config.py::TestConversationOperations::test_get_recent_conversations_failure PASSED [ 46%]
tests/test_database_local_config.py::TestAnalytics::test_analyze_learning_patterns_with_data PASSED [ 46%]
tests/test_database_local_config.py::TestAnalytics::test_analyze_learning_patterns_no_data PASSED [ 47%]
tests/test_database_local_config.py::TestAnalytics::test_analyze_learning_patterns_failure PASSED [ 47%]
tests/test_database_local_config.py::TestDataExport::test_export_user_data_with_all_data PASSED [ 47%]
tests/test_database_local_config.py::TestDataExport::test_export_user_data_no_data PASSED [ 47%]
tests/test_database_local_config.py::TestDataExport::test_export_user_data_failure PASSED [ 47%]
tests/test_database_local_config.py::TestDataDeletion::test_delete_user_data_locally_success PASSED [ 47%]
tests/test_database_local_config.py::TestDataDeletion::test_delete_user_data_locally_no_data PASSED [ 47%]
tests/test_database_local_config.py::TestDataDeletion::test_delete_user_data_locally_sqlite_failure PASSED [ 47%]
tests/test_database_local_config.py::TestDataDeletion::test_delete_user_data_locally_duckdb_table_error PASSED [ 47%]
tests/test_database_local_config.py::TestDatabaseStats::test_get_database_stats_with_data PASSED [ 47%]
tests/test_database_local_config.py::TestDatabaseStats::test_get_database_stats_empty_databases PASSED [ 47%]
tests/test_database_local_config.py::TestDatabaseStats::test_get_database_stats_sqlite_error PASSED [ 47%]
tests/test_database_local_config.py::TestDatabaseStats::test_get_database_stats_duckdb_error PASSED [ 47%]
tests/test_database_local_config.py::TestDatabaseStats::test_get_database_stats_duckdb_table_not_found PASSED [ 47%]
tests/test_database_local_config.py::TestConnectionCleanup::test_close_connections_with_active_connections PASSED [ 47%]
tests/test_database_local_config.py::TestConnectionCleanup::test_close_connections_no_active_connections PASSED [ 47%]
tests/test_database_local_config.py::TestConnectionCleanup::test_close_connections_duckdb_only PASSED [ 47%]
tests/test_database_local_config.py::TestConnectionCleanup::test_close_connections_sqlite_only PASSED [ 47%]
tests/test_database_local_config.py::TestModuleLevelFunctions::test_get_local_db_manager PASSED [ 47%]
tests/test_database_local_config.py::TestModuleLevelFunctions::test_initialize_local_databases PASSED [ 47%]
tests/test_database_local_config.py::TestModuleLevelFunctions::test_save_user_profile_locally PASSED [ 47%]
tests/test_database_local_config.py::TestModuleLevelFunctions::test_get_user_profile_locally PASSED [ 47%]
tests/test_database_local_config.py::TestEdgeCases::test_empty_preferences_serialization PASSED [ 47%]
tests/test_database_local_config.py::TestEdgeCases::test_none_preferences_serialization PASSED [ 47%]
tests/test_database_local_config.py::TestEdgeCases::test_complex_preferences_serialization PASSED [ 47%]
tests/test_database_local_config.py::TestEdgeCases::test_empty_metadata_serialization PASSED [ 47%]
tests/test_database_local_config.py::TestEdgeCases::test_none_metadata_serialization PASSED [ 47%]
tests/test_database_local_config.py::TestEdgeCases::test_unicode_content_handling PASSED [ 47%]
tests/test_database_local_config.py::TestEdgeCases::test_very_long_content PASSED [ 47%]
tests/test_database_local_config.py::TestEdgeCases::test_special_characters_in_user_id PASSED [ 47%]
tests/test_database_local_config.py::TestEdgeCases::test_limit_zero_conversations PASSED [ 47%]
tests/test_database_local_config.py::TestEdgeCases::test_limit_negative_conversations PASSED [ 47%]
tests/test_database_local_config.py::TestMissingCoverage::test_duckdb_cursor_exception_rollback PASSED [ 47%]
tests/test_database_local_config.py::TestMissingCoverage::test_analyze_learning_patterns_no_result PASSED [ 47%]
tests/test_database_local_config.py::TestMissingCoverage::test_get_database_stats_duckdb_general_exception PASSED [ 47%]
tests/test_database_local_config.py::TestMissingCoverage::test_get_database_stats_duckdb_table_count_exception PASSED [ 47%]
tests/test_database_migrations.py::TestMigrationManager::test_init_creates_managers PASSED [ 47%]
tests/test_database_migrations.py::TestMigrationManager::test_ensure_migration_structure PASSED [ 47%]
tests/test_database_migrations.py::TestMigrationManager::test_ensure_migration_structure_idempotent PASSED [ 47%]
tests/test_database_migrations.py::TestMigrationManager::test_initialize_alembic_success PASSED [ 47%]
tests/test_database_migrations.py::TestMigrationManager::test_initialize_alembic_already_exists PASSED [ 47%]
tests/test_database_migrations.py::TestMigrationManager::test_initialize_alembic_failure PASSED [ 47%]
tests/test_database_migrations.py::TestMigrationManager::test_create_alembic_config PASSED [ 47%]
tests/test_database_migrations.py::TestMigrationManager::test_create_alembic_env PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_create_initial_migration_success PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_create_initial_migration_failure PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_run_migrations_success PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_run_migrations_failure PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_rollback_migration_default_revision PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_rollback_migration_specific_revision PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_rollback_migration_failure PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_get_migration_history_success PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_get_migration_history_failure PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_initialize_all_databases_success PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_initialize_all_databases_sqlite_failure PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_initialize_all_databases_local_failure PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_initialize_all_databases_chroma_failure PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_seed_initial_data_success PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_seed_initial_data_already_exists PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_seed_initial_data_failure PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_seed_initial_data_commit_failure PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_backup_database_success PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_backup_database_default_path PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_backup_database_failure PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_check_database_integrity_all_healthy PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_check_database_integrity_sqlite_error PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_check_database_integrity_local_db_error PASSED [ 48%]
tests/test_database_migrations.py::TestMigrationManager::test_check_database_integrity_chromadb_error PASSED [ 48%]
tests/test_database_migrations.py::TestGlobalMigrationManager::test_global_migration_manager_exists PASSED [ 48%]
tests/test_database_migrations.py::TestConvenienceFunctions::test_initialize_databases PASSED [ 48%]
tests/test_database_migrations.py::TestConvenienceFunctions::test_run_migrations_convenience PASSED [ 48%]
tests/test_database_migrations.py::TestConvenienceFunctions::test_seed_initial_data_convenience PASSED [ 48%]
tests/test_database_migrations.py::TestConvenienceFunctions::test_check_database_integrity_convenience PASSED [ 48%]
tests/test_database_models.py::TestUserValidators::test_validate_email_with_none PASSED [ 48%]
tests/test_database_models.py::TestUserValidators::test_validate_email_with_valid_email PASSED [ 48%]
tests/test_database_models.py::TestUserValidators::test_validate_email_with_invalid_email_raises_error PASSED [ 48%]
tests/test_database_models.py::TestUserValidators::test_validate_user_id_with_short_id_raises_error PASSED [ 48%]
tests/test_database_models.py::TestUserValidators::test_validate_user_id_with_empty_id_raises_error PASSED [ 48%]
tests/test_database_models.py::TestUserValidators::test_validate_user_id_with_valid_id PASSED [ 48%]
tests/test_database_models.py::TestConversationToDictWithMessages::test_conversation_to_dict_includes_messages_when_requested PASSED [ 48%]
tests/test_database_models.py::TestConversationToDictWithMessages::test_conversation_to_dict_excludes_messages_by_default PASSED [ 48%]
tests/test_database_models.py::TestConversationToDictWithMessages::test_conversation_to_dict_without_include_messages_parameter PASSED [ 48%]
tests/test_database_models.py::TestDocumentToDictWithContent::test_document_to_dict_includes_content_when_requested PASSED [ 48%]
tests/test_database_models.py::TestDocumentToDictWithContent::test_document_to_dict_excludes_content_by_default PASSED [ 48%]
tests/test_database_models.py::TestDocumentToDictWithContent::test_document_to_dict_without_include_content_parameter PASSED [ 48%]
tests/test_database_models.py::TestGetDbSessionDefensivePatterns::test_get_db_session_rollback_on_exception PASSED [ 49%]
tests/test_database_models.py::TestGetDbSessionDefensivePatterns::test_get_db_session_close_in_finally PASSED [ 49%]
tests/test_database_models.py::TestGetDbSessionDefensivePatterns::test_get_db_session_defensive_none_check_in_exception PASSED [ 49%]
tests/test_database_models.py::TestGetDbSessionDefensivePatterns::test_get_db_session_defensive_none_check_in_finally PASSED [ 49%]
tests/test_database_models.py::TestModelToDictMethods::test_user_to_dict_includes_sensitive_data_when_requested PASSED [ 49%]
tests/test_database_models.py::TestModelToDictMethods::test_user_to_dict_excludes_sensitive_data_by_default PASSED [ 49%]
tests/test_database_models.py::TestModelToDictMethods::test_language_to_dict PASSED [ 49%]
tests/test_database_models.py::TestModelToDictMethods::test_conversation_message_to_dict PASSED [ 49%]
tests/test_database_models.py::TestModelToDictMethods::test_learning_progress_to_dict PASSED [ 49%]
tests/test_database_models.py::TestModelToDictMethods::test_vocabulary_item_to_dict PASSED [ 49%]
tests/test_database_models.py::TestModelToDictMethods::test_api_usage_to_dict PASSED [ 49%]
tests/test_database_models.py::TestModelEnums::test_user_role_enum PASSED [ 49%]
tests/test_database_models.py::TestModelEnums::test_conversation_role_enum PASSED [ 49%]
tests/test_database_models.py::TestModelEnums::test_document_type_enum PASSED [ 49%]
tests/test_database_models.py::TestModelEnums::test_learning_status_enum PASSED [ 49%]
tests/test_deepseek_service.py::TestZZZImportErrorHandling::test_import_error_handling PASSED [ 49%]
tests/test_deepseek_service.py::TestDeepSeekServiceInitialization::test_service_initialization_with_api_key PASSED [ 49%]
tests/test_deepseek_service.py::TestDeepSeekServiceInitialization::test_service_initialization_without_api_key PASSED [ 49%]
tests/test_deepseek_service.py::TestDeepSeekServiceInitialization::test_service_initialization_library_not_available PASSED [ 49%]
tests/test_deepseek_service.py::TestDeepSeekServiceInitialization::test_service_initialization_client_error PASSED [ 49%]
tests/test_deepseek_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_chinese PASSED [ 49%]
tests/test_deepseek_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_spanish PASSED [ 49%]
tests/test_deepseek_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_french PASSED [ 49%]
tests/test_deepseek_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_english PASSED [ 49%]
tests/test_deepseek_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_other_languages PASSED [ 49%]
tests/test_deepseek_service.py::TestHelperMethods::test_extract_user_message_from_message_param PASSED [ 49%]
tests/test_deepseek_service.py::TestHelperMethods::test_extract_user_message_from_messages_list PASSED [ 49%]
tests/test_deepseek_service.py::TestHelperMethods::test_extract_user_message_default PASSED [ 49%]
tests/test_deepseek_service.py::TestHelperMethods::test_extract_user_message_empty_messages PASSED [ 49%]
tests/test_deepseek_service.py::TestHelperMethods::test_call_deepseek_api PASSED [ 49%]
tests/test_deepseek_service.py::TestHelperMethods::test_call_deepseek_api_default_params PASSED [ 49%]
tests/test_deepseek_service.py::TestHelperMethods::test_calculate_cost PASSED [ 49%]
tests/test_deepseek_service.py::TestHelperMethods::test_calculate_cost_no_usage PASSED [ 49%]
tests/test_deepseek_service.py::TestHelperMethods::test_extract_response_content_with_choices PASSED [ 49%]
tests/test_deepseek_service.py::TestHelperMethods::test_extract_response_content_no_choices PASSED [ 49%]
tests/test_deepseek_service.py::TestFallbackMessages::test_get_fallback_message_chinese PASSED [ 49%]
tests/test_deepseek_service.py::TestFallbackMessages::test_get_fallback_message_spanish PASSED [ 49%]
tests/test_deepseek_service.py::TestFallbackMessages::test_get_fallback_message_french PASSED [ 49%]
tests/test_deepseek_service.py::TestFallbackMessages::test_get_fallback_message_english PASSED [ 49%]
tests/test_deepseek_service.py::TestResponseBuilding::test_build_success_response PASSED [ 49%]
tests/test_deepseek_service.py::TestResponseBuilding::test_build_success_response_no_context PASSED [ 49%]
tests/test_deepseek_service.py::TestResponseBuilding::test_build_error_response PASSED [ 49%]
tests/test_deepseek_service.py::TestResponseBuilding::test_build_error_response_no_model PASSED [ 50%]
tests/test_deepseek_service.py::TestGenerateResponse::test_generate_response_success PASSED [ 50%]
tests/test_deepseek_service.py::TestGenerateResponse::test_generate_response_not_available PASSED [ 50%]
tests/test_deepseek_service.py::TestGenerateResponse::test_generate_response_api_error PASSED [ 50%]
tests/test_deepseek_service.py::TestGenerateResponse::test_generate_response_with_messages_list PASSED [ 50%]
tests/test_deepseek_service.py::TestGenerateResponse::test_generate_response_with_context PASSED [ 50%]
tests/test_deepseek_service.py::TestAvailabilityAndHealth::test_check_availability_no_client PASSED [ 50%]
tests/test_deepseek_service.py::TestAvailabilityAndHealth::test_check_availability_success PASSED [ 50%]
tests/test_deepseek_service.py::TestAvailabilityAndHealth::test_check_availability_error PASSED [ 50%]
tests/test_deepseek_service.py::TestAvailabilityAndHealth::test_get_health_status_healthy PASSED [ 50%]
tests/test_deepseek_service.py::TestAvailabilityAndHealth::test_get_health_status_error PASSED [ 50%]
tests/test_deepseek_service.py::TestGlobalInstance::test_global_instance_exists PASSED [ 50%]
tests/test_deepseek_service.py::TestGlobalInstance::test_global_instance_has_correct_attributes PASSED [ 50%]
tests/test_definitive_coverage.py::TestDefinitive100Coverage::test_execute_main_py_as_script PASSED [ 50%]
tests/test_definitive_coverage.py::TestDefinitive100Coverage::test_execute_frontend_main_py_as_script PASSED [ 50%]
tests/test_entry_points.py::TestScriptEntryPoints::test_main_py_run_server_function PASSED [ 50%]
tests/test_entry_points.py::TestScriptEntryPoints::test_frontend_main_py_run_server_function PASSED [ 50%]
tests/test_entry_points.py::TestScriptEntryPoints::test_main_py_script_execution_calls_run_server PASSED [ 50%]
tests/test_entry_points.py::TestScriptEntryPoints::test_frontend_main_py_script_execution_calls_run_server PASSED [ 50%]
tests/test_entry_points.py::TestScriptEntryPoints::test_main_py_script_structure PASSED [ 50%]
tests/test_entry_points.py::TestScriptEntryPoints::test_frontend_main_py_script_structure PASSED [ 50%]
tests/test_entry_points.py::TestScriptEntryPoints::test_main_py_name_main_execution_path PASSED [ 50%]
tests/test_entry_points.py::TestScriptEntryPoints::test_frontend_main_py_name_main_execution_path PASSED [ 50%]
tests/test_entry_points.py::TestScriptEntryPoints::test_main_script_execution_simulation PASSED [ 50%]
tests/test_entry_points.py::TestScriptEntryPoints::test_frontend_script_execution_simulation PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestEnums::test_feature_category_enum PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestEnums::test_user_role_enum PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestFeatureToggleDataclass::test_feature_toggle_with_all_fields PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestFeatureToggleDataclass::test_feature_toggle_with_defaults PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestFeatureToggleDataclass::test_feature_toggle_configuration_none_initialization PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestManagerInitialization::test_manager_initialization_success PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestManagerInitialization::test_manager_initialization_with_existing_features PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestManagerInitialization::test_manager_get_connection PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestCacheManagement::test_refresh_cache_loads_features PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestCacheManagement::test_refresh_cache_parses_json_configuration PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestCacheManagement::test_refresh_cache_handles_invalid_json PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestCacheManagement::test_should_refresh_cache_when_never_updated PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestCacheManagement::test_should_refresh_cache_when_expired PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestCacheManagement::test_should_not_refresh_cache_when_fresh PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestFeatureChecking::test_is_feature_enabled_returns_true_for_enabled_feature PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestFeatureChecking::test_is_feature_enabled_returns_false_for_disabled_feature PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestFeatureChecking::test_is_feature_enabled_returns_false_for_nonexistent_feature PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestFeatureChecking::test_is_feature_enabled_checks_role_permission PASSED [ 50%]
tests/test_feature_toggle_manager.py::TestFeatureChecking::test_is_feature_enabled_refreshes_cache_when_stale PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestRolePermissionChecking::test_check_role_permission_child_can_access_child_features PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestRolePermissionChecking::test_check_role_permission_child_cannot_access_parent_features PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestRolePermissionChecking::test_check_role_permission_parent_can_access_child_features PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestRolePermissionChecking::test_check_role_permission_parent_can_access_parent_features PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestRolePermissionChecking::test_check_role_permission_admin_can_access_all_features PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestRolePermissionChecking::test_check_role_permission_case_insensitive PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestFeatureRetrieval::test_get_feature_returns_feature PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestFeatureRetrieval::test_get_feature_returns_none_for_nonexistent PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestFeatureRetrieval::test_get_all_features_returns_all_features PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestFeatureRetrieval::test_get_all_features_filters_by_category PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestFeatureRetrieval::test_get_all_features_filters_by_role PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestFeatureRetrieval::test_get_features_by_category_organizes_by_category PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestFeatureRetrieval::test_get_features_by_category_sorts_within_category PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestCRUDOperations::test_create_feature_success PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestCRUDOperations::test_create_feature_stores_in_database PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestCRUDOperations::test_update_feature_enabled_state PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestCRUDOperations::test_update_feature_description PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestCRUDOperations::test_update_feature_configuration PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestCRUDOperations::test_update_feature_nonexistent_returns_false PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestCRUDOperations::test_delete_feature_success PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestCRUDOperations::test_delete_feature_nonexistent_returns_false PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestStatistics::test_calculate_basic_stats PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestStatistics::test_build_category_breakdown PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestStatistics::test_build_role_breakdown PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestStatistics::test_build_role_breakdown_multiple_features_same_role PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestStatistics::test_get_feature_statistics_complete PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestBulkOperations::test_bulk_update_features_success PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestBulkOperations::test_bulk_update_handles_nonexistent_features PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestImportExport::test_export_configuration PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestImportExport::test_import_configuration PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestImportExport::test_export_includes_timestamp PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestGlobalInstance::test_global_instance_exists PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestGlobalInstance::test_convenience_is_feature_enabled PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestGlobalInstance::test_convenience_get_feature PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestGlobalInstance::test_convenience_get_features_by_category PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestErrorHandling::test_is_feature_enabled_handles_exceptions PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestErrorHandling::test_get_feature_handles_exceptions PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestErrorHandling::test_get_all_features_handles_exceptions PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestErrorHandling::test_update_feature_handles_database_errors PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestErrorHandling::test_create_feature_handles_database_errors PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestErrorHandling::test_delete_feature_handles_database_errors PASSED [ 51%]
tests/test_feature_toggle_manager.py::TestErrorHandling::test_refresh_cache_handles_database_errors PASSED [ 52%]
tests/test_feature_toggle_manager.py::TestErrorHandling::test_get_features_by_category_handles_exceptions PASSED [ 52%]
tests/test_feature_toggle_manager.py::TestErrorHandling::test_get_feature_statistics_handles_exceptions PASSED [ 52%]
tests/test_feature_toggle_manager.py::TestErrorHandling::test_export_configuration_handles_exceptions PASSED [ 52%]
tests/test_feature_toggle_manager.py::TestErrorHandling::test_import_configuration_handles_exceptions PASSED [ 52%]
tests/test_feature_toggle_manager.py::TestErrorHandling::test_update_feature_with_no_changes_returns_true PASSED [ 52%]
tests/test_feature_toggle_manager.py::TestErrorHandling::test_is_feature_enabled_cache_refresh_on_stale PASSED [ 52%]
tests/test_feature_toggle_manager.py::TestErrorHandling::test_get_feature_cache_refresh_on_stale PASSED [ 52%]
tests/test_feature_toggle_models.py::TestEnums::test_feature_toggle_scope_values PASSED [ 52%]
tests/test_feature_toggle_models.py::TestEnums::test_feature_toggle_status_values PASSED [ 52%]
tests/test_feature_toggle_models.py::TestEnums::test_feature_toggle_category_values PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureCondition::test_feature_condition_creation PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureCondition::test_feature_condition_with_list_value PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureCondition::test_feature_condition_with_numeric_value PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggle::test_feature_toggle_minimal PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggle::test_feature_toggle_complete PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggle::test_feature_toggle_datetime_serialization_with_values PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggle::test_feature_toggle_datetime_serialization_with_none PASSED [ 52%]
tests/test_feature_toggle_models.py::TestUserFeatureAccess::test_user_feature_access_minimal PASSED [ 52%]
tests/test_feature_toggle_models.py::TestUserFeatureAccess::test_user_feature_access_complete PASSED [ 52%]
tests/test_feature_toggle_models.py::TestUserFeatureAccess::test_user_feature_access_datetime_serialization_with_values PASSED [ 52%]
tests/test_feature_toggle_models.py::TestUserFeatureAccess::test_user_feature_access_datetime_serialization_with_none PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleEvent::test_feature_toggle_event_minimal PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleEvent::test_feature_toggle_event_complete PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleEvent::test_feature_toggle_event_datetime_serialization_with_value PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleEvent::test_feature_toggle_event_datetime_serialization_with_none PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleRequest::test_feature_toggle_request_minimal PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleRequest::test_feature_toggle_request_complete PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleRequest::test_feature_toggle_request_validation_name_too_short PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleRequest::test_feature_toggle_request_validation_name_too_long PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleRequest::test_feature_toggle_request_validation_description_too_long PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleRequest::test_feature_toggle_request_validation_rollout_percentage_min PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleRequest::test_feature_toggle_request_validation_rollout_percentage_max PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleUpdateRequest::test_feature_toggle_update_request_all_none PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleUpdateRequest::test_feature_toggle_update_request_partial PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleUpdateRequest::test_feature_toggle_update_request_validation_rollout_percentage PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleResponse::test_feature_toggle_response_success_with_feature PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleResponse::test_feature_toggle_response_failure_with_errors PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleListResponse::test_feature_toggle_list_response PASSED [ 52%]
tests/test_feature_toggle_models.py::TestUserFeatureStatusResponse::test_user_feature_status_response PASSED [ 52%]
tests/test_feature_toggle_models.py::TestFeatureToggleStatsResponse::test_feature_toggle_stats_response PASSED [ 52%]
tests/test_feature_toggle_service.py::TestInitialization::test_initialization_creates_storage_dir PASSED [ 52%]
tests/test_feature_toggle_service.py::TestInitialization::test_initialization_creates_default_features PASSED [ 52%]
tests/test_feature_toggle_service.py::TestInitialization::test_initialization_is_idempotent PASSED [ 53%]
tests/test_feature_toggle_service.py::TestInitialization::test_initialization_error_handling PASSED [ 53%]
tests/test_feature_toggle_service.py::TestInitialization::test_load_features_from_empty_storage PASSED [ 53%]
tests/test_feature_toggle_service.py::TestInitialization::test_load_features_from_existing_storage PASSED [ 53%]
tests/test_feature_toggle_service.py::TestInitialization::test_load_features_with_corrupted_data PASSED [ 53%]
tests/test_feature_toggle_service.py::TestInitialization::test_load_user_access_from_empty_storage PASSED [ 53%]
tests/test_feature_toggle_service.py::TestInitialization::test_load_user_access_with_corrupted_data PASSED [ 53%]
tests/test_feature_toggle_service.py::TestInitialization::test_load_events_from_empty_storage PASSED [ 53%]
tests/test_feature_toggle_service.py::TestInitialization::test_load_events_with_corrupted_data PASSED [ 53%]
tests/test_feature_toggle_service.py::TestInitialization::test_load_events_limits_to_1000 PASSED [ 53%]
tests/test_feature_toggle_service.py::TestInitialization::test_save_features_creates_file PASSED [ 53%]
tests/test_feature_toggle_service.py::TestInitialization::test_save_features_error_handling PASSED [ 53%]
tests/test_feature_toggle_service.py::TestInitialization::test_save_user_access_creates_file PASSED [ 53%]
tests/test_feature_toggle_service.py::TestInitialization::test_save_user_access_error_handling PASSED [ 53%]
tests/test_feature_toggle_service.py::TestInitialization::test_save_events_creates_file PASSED [ 53%]
tests/test_feature_toggle_service.py::TestInitialization::test_save_events_limits_to_1000 PASSED [ 53%]
tests/test_feature_toggle_service.py::TestInitialization::test_save_events_error_handling PASSED [ 53%]
tests/test_feature_toggle_service.py::TestDatetimeSerialization::test_serialize_datetime_object PASSED [ 53%]
tests/test_feature_toggle_service.py::TestDatetimeSerialization::test_serialize_dict_with_datetime PASSED [ 53%]
tests/test_feature_toggle_service.py::TestDatetimeSerialization::test_serialize_list_with_datetime PASSED [ 53%]
tests/test_feature_toggle_service.py::TestDatetimeSerialization::test_serialize_primitive_types PASSED [ 53%]
tests/test_feature_toggle_service.py::TestDatetimeSerialization::test_deserialize_datetime_string PASSED [ 53%]
tests/test_feature_toggle_service.py::TestDatetimeSerialization::test_deserialize_datetime_with_z_suffix PASSED [ 53%]
tests/test_feature_toggle_service.py::TestDatetimeSerialization::test_deserialize_datetime_with_timezone PASSED [ 53%]
tests/test_feature_toggle_service.py::TestDatetimeSerialization::test_deserialize_dict_with_datetime_strings PASSED [ 53%]
tests/test_feature_toggle_service.py::TestDatetimeSerialization::test_deserialize_list_with_datetime_strings PASSED [ 53%]
tests/test_feature_toggle_service.py::TestDatetimeSerialization::test_deserialize_non_datetime_strings PASSED [ 53%]
tests/test_feature_toggle_service.py::TestDatetimeSerialization::test_looks_like_iso_datetime_true PASSED [ 53%]
tests/test_feature_toggle_service.py::TestDatetimeSerialization::test_looks_like_iso_datetime_false PASSED [ 53%]
tests/test_feature_toggle_service.py::TestDatetimeSerialization::test_normalize_datetime_string_with_z PASSED [ 53%]
tests/test_feature_toggle_service.py::TestDatetimeSerialization::test_normalize_datetime_string_without_z PASSED [ 53%]
tests/test_feature_toggle_service.py::TestDatetimeSerialization::test_try_parse_datetime_string_invalid PASSED [ 53%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_create_feature PASSED [ 53%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_create_feature_generates_unique_id PASSED [ 53%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_create_feature_when_not_initialized PASSED [ 53%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_get_feature_existing PASSED [ 53%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_get_feature_non_existent PASSED [ 53%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_get_feature_when_not_initialized PASSED [ 53%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_get_all_features_no_filters PASSED [ 53%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_get_all_features_filter_by_category PASSED [ 53%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_get_all_features_filter_by_scope PASSED [ 53%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_get_all_features_filter_by_status PASSED [ 53%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_get_all_features_multiple_filters PASSED [ 54%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_get_all_features_when_not_initialized PASSED [ 54%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_update_feature_existing PASSED [ 54%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_update_feature_non_existent PASSED [ 54%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_update_feature_when_not_initialized PASSED [ 54%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_delete_feature_existing PASSED [ 54%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_delete_feature_non_existent PASSED [ 54%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_delete_feature_removes_user_access PASSED [ 54%]
tests/test_feature_toggle_service.py::TestCRUDOperations::test_delete_feature_when_not_initialized PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_basic PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_non_existent PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_disabled_status PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_maintenance_status PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_requires_admin_without_roles PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_requires_admin_with_admin_role PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_requires_admin_with_super_admin_role PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_user_specific_scope PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_role_based_scope PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_experimental_rollout PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_experimental_without_user_id PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_experimental_not_experimental PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_user_override_enabled PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_user_override_disabled PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_user_override_without_override_flag PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_user_override_expired PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_with_conditions_user_role PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_with_conditions_user_role_not_equals PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_with_conditions_user_role_no_roles PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_with_conditions_date_range PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_with_conditions_date_range_outside PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_with_conditions_date_range_invalid PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_with_conditions_percentage PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_with_conditions_percentage_no_user PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_with_conditions_unknown_type PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_with_dependencies PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_with_dependencies_disabled PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_with_conflicts PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_with_conflicts_enabled PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_with_environment_restriction PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_with_environment_no_restriction PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_caching PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_cache_expiration PASSED [ 54%]
tests/test_feature_toggle_service.py::TestFeatureEvaluation::test_is_feature_enabled_when_not_initialized PASSED [ 55%]
tests/test_feature_toggle_service.py::TestUserFeatureAccess::test_set_user_feature_access PASSED [ 55%]
tests/test_feature_toggle_service.py::TestUserFeatureAccess::test_set_user_feature_access_non_existent_feature PASSED [ 55%]
tests/test_feature_toggle_service.py::TestUserFeatureAccess::test_set_user_feature_access_with_override PASSED [ 55%]
tests/test_feature_toggle_service.py::TestUserFeatureAccess::test_set_user_feature_access_with_expiration PASSED [ 55%]
tests/test_feature_toggle_service.py::TestUserFeatureAccess::test_set_user_feature_access_clears_cache PASSED [ 55%]
tests/test_feature_toggle_service.py::TestUserFeatureAccess::test_set_user_feature_access_when_not_initialized PASSED [ 55%]
tests/test_feature_toggle_service.py::TestUserFeatureAccess::test_get_user_features PASSED [ 55%]
tests/test_feature_toggle_service.py::TestUserFeatureAccess::test_get_user_features_when_not_initialized PASSED [ 55%]
tests/test_feature_toggle_service.py::TestEventRecording::test_record_event_basic PASSED [ 55%]
tests/test_feature_toggle_service.py::TestEventRecording::test_record_event_with_state_changes PASSED [ 55%]
tests/test_feature_toggle_service.py::TestEventRecording::test_record_event_auto_saves_every_10 PASSED [ 55%]
tests/test_feature_toggle_service.py::TestEventRecording::test_create_feature_records_event PASSED [ 55%]
tests/test_feature_toggle_service.py::TestEventRecording::test_update_feature_records_event PASSED [ 55%]
tests/test_feature_toggle_service.py::TestEventRecording::test_delete_feature_records_event PASSED [ 55%]
tests/test_feature_toggle_service.py::TestEventRecording::test_set_user_access_records_event PASSED [ 55%]
tests/test_feature_toggle_service.py::TestStatistics::test_get_feature_statistics_basic_counts PASSED [ 55%]
tests/test_feature_toggle_service.py::TestStatistics::test_get_feature_statistics_by_category PASSED [ 55%]
tests/test_feature_toggle_service.py::TestStatistics::test_get_feature_statistics_by_scope PASSED [ 55%]
tests/test_feature_toggle_service.py::TestStatistics::test_get_feature_statistics_by_environment PASSED [ 55%]
tests/test_feature_toggle_service.py::TestStatistics::test_get_feature_statistics_recent_changes PASSED [ 55%]
tests/test_feature_toggle_service.py::TestStatistics::test_get_feature_statistics_cache_size PASSED [ 55%]
tests/test_feature_toggle_service.py::TestStatistics::test_get_feature_statistics_user_overrides PASSED [ 55%]
tests/test_feature_toggle_service.py::TestStatistics::test_get_feature_statistics_total_events PASSED [ 55%]
tests/test_feature_toggle_service.py::TestStatistics::test_get_feature_statistics_when_not_initialized PASSED [ 55%]
tests/test_feature_toggle_service.py::TestCacheManagement::test_clear_cache_if_needed_within_ttl PASSED [ 55%]
tests/test_feature_toggle_service.py::TestCacheManagement::test_clear_cache_if_needed_after_ttl PASSED [ 55%]
tests/test_feature_toggle_service.py::TestCacheManagement::test_create_feature_clears_cache PASSED [ 55%]
tests/test_feature_toggle_service.py::TestCacheManagement::test_update_feature_clears_cache PASSED [ 55%]
tests/test_feature_toggle_service.py::TestCacheManagement::test_delete_feature_clears_cache PASSED [ 55%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_apply_category_filter_with_filter PASSED [ 55%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_apply_category_filter_without_filter PASSED [ 55%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_apply_scope_filter_with_filter PASSED [ 55%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_apply_scope_filter_without_filter PASSED [ 55%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_apply_status_filter_with_filter PASSED [ 55%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_apply_status_filter_without_filter PASSED [ 55%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_sort_features_by_creation PASSED [ 55%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_check_user_override_no_user_id PASSED [ 55%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_check_user_override_user_not_in_access PASSED [ 55%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_check_user_override_feature_not_in_user_access PASSED [ 55%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_check_user_override_without_override_flag PASSED [ 55%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_check_user_override_valid PASSED [ 55%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_check_global_status_disabled PASSED [ 55%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_check_global_status_maintenance PASSED [ 56%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_check_global_status_enabled PASSED [ 56%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_check_admin_requirement_not_required PASSED [ 56%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_check_admin_requirement_required_no_roles PASSED [ 56%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_check_admin_requirement_required_with_admin PASSED [ 56%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_check_environment_no_restrictions PASSED [ 56%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_check_environment_enabled_in_current PASSED [ 56%]
tests/test_feature_toggle_service.py::TestHelperMethods::test_check_environment_disabled_in_current PASSED [ 56%]
tests/test_feature_toggle_service.py::TestGlobalFunctions::test_get_feature_toggle_service_singleton PASSED [ 56%]
tests/test_feature_toggle_service.py::TestGlobalFunctions::test_is_feature_enabled_convenience_function PASSED [ 56%]
tests/test_feature_toggle_service.py::TestEdgeCases::test_evaluate_condition_with_exception PASSED [ 56%]
tests/test_feature_toggle_service.py::TestEdgeCases::test_user_role_condition_with_invalid_operator PASSED [ 56%]
tests/test_feature_toggle_service.py::TestEdgeCases::test_date_range_condition_with_invalid_operator PASSED [ 56%]
tests/test_feature_toggle_service.py::TestEdgeCases::test_percentage_condition_with_invalid_operator PASSED [ 56%]
tests/test_feature_toggle_service.py::TestEdgeCases::test_cache_with_missing_result_key PASSED [ 56%]
tests/test_feature_toggle_service.py::TestEdgeCases::test_cache_with_missing_timestamp_key PASSED [ 56%]
tests/test_feature_toggle_service.py::TestEdgeCases::test_default_features_with_duplicate_id PASSED [ 56%]
tests/test_feature_toggle_service.py::TestEdgeCases::test_deserialize_with_dotted_datetime PASSED [ 56%]
tests/test_feature_toggle_service.py::TestRemainingCoverage::test_delete_feature_no_user_access_entries PASSED [ 56%]
tests/test_feature_toggle_service.py::TestRemainingCoverage::test_is_feature_enabled_cache_missing_result_and_timestamp PASSED [ 56%]
tests/test_feature_toggle_service.py::TestRemainingCoverage::test_set_user_feature_access_new_user PASSED [ 56%]
tests/test_feature_toggle_service.py::TestRemainingCoverage::test_delete_feature_when_feature_not_in_user_access PASSED [ 56%]
tests/test_feature_toggle_service.py::TestRemainingCoverage::test_is_feature_enabled_with_stale_cache PASSED [ 56%]
tests/test_feature_toggle_service.py::TestRemainingCoverage::test_set_user_feature_access_for_existing_user PASSED [ 56%]
tests/test_feature_toggle_service.py::TestRemainingCoverage::test_create_feature_with_multiple_duplicate_ids PASSED [ 56%]
tests/test_frontend.py::TestFastHTMLFrontend::test_create_frontend_app PASSED [ 56%]
tests/test_frontend.py::TestFastHTMLFrontend::test_home_route PASSED     [ 56%]
tests/test_frontend.py::TestFastHTMLFrontend::test_home_route_css_link PASSED [ 56%]
tests/test_frontend.py::TestFastHTMLFrontend::test_home_route_javascript PASSED [ 56%]
tests/test_frontend.py::TestFastHTMLFrontend::test_frontend_health_check PASSED [ 56%]
tests/test_frontend.py::TestFastHTMLFrontend::test_frontend_health_response_format PASSED [ 56%]
tests/test_frontend.py::TestFastHTMLFrontend::test_home_route_html_structure PASSED [ 56%]
tests/test_frontend.py::TestFastHTMLFrontend::test_nonexistent_route PASSED [ 56%]
tests/test_main.py::test_health_check PASSED                             [ 56%]
tests/test_main.py::test_root_endpoint PASSED                            [ 56%]
tests/test_main.py::test_static_files_mount PASSED                       [ 56%]
tests/test_mistral_service.py::TestZZZImportErrorHandling::test_import_error_handling PASSED [ 56%]
tests/test_mistral_service.py::TestMistralServiceInitialization::test_service_initialization_with_api_key PASSED [ 56%]
tests/test_mistral_service.py::TestMistralServiceInitialization::test_service_initialization_without_api_key PASSED [ 56%]
tests/test_mistral_service.py::TestMistralServiceInitialization::test_service_initialization_library_not_available PASSED [ 56%]
tests/test_mistral_service.py::TestMistralServiceInitialization::test_service_initialization_client_error PASSED [ 56%]
tests/test_mistral_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_french PASSED [ 56%]
tests/test_mistral_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_english PASSED [ 57%]
tests/test_mistral_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_other_language PASSED [ 57%]
tests/test_mistral_service.py::TestValidationMethods::test_validate_mistral_request_not_available PASSED [ 57%]
tests/test_mistral_service.py::TestValidationMethods::test_validate_mistral_request_available PASSED [ 57%]
tests/test_mistral_service.py::TestHelperMethods::test_extract_user_message_from_message_param PASSED [ 57%]
tests/test_mistral_service.py::TestHelperMethods::test_extract_user_message_from_messages_list PASSED [ 57%]
tests/test_mistral_service.py::TestHelperMethods::test_extract_user_message_default PASSED [ 57%]
tests/test_mistral_service.py::TestHelperMethods::test_extract_user_message_empty_messages PASSED [ 57%]
tests/test_mistral_service.py::TestHelperMethods::test_get_model_name_with_custom_model PASSED [ 57%]
tests/test_mistral_service.py::TestHelperMethods::test_get_model_name_with_default PASSED [ 57%]
tests/test_mistral_service.py::TestHelperMethods::test_build_mistral_request PASSED [ 57%]
tests/test_mistral_service.py::TestHelperMethods::test_build_mistral_request_default_params PASSED [ 57%]
tests/test_mistral_service.py::TestHelperMethods::test_estimate_mistral_cost PASSED [ 57%]
tests/test_mistral_service.py::TestHelperMethods::test_extract_response_content_with_choices PASSED [ 57%]
tests/test_mistral_service.py::TestHelperMethods::test_extract_response_content_no_choices PASSED [ 57%]
tests/test_mistral_service.py::TestResponseBuilding::test_build_success_response PASSED [ 57%]
tests/test_mistral_service.py::TestResponseBuilding::test_build_success_response_no_context PASSED [ 57%]
tests/test_mistral_service.py::TestResponseBuilding::test_build_error_response_french PASSED [ 57%]
tests/test_mistral_service.py::TestResponseBuilding::test_build_error_response_english PASSED [ 57%]
tests/test_mistral_service.py::TestGenerateResponse::test_generate_response_success PASSED [ 57%]
tests/test_mistral_service.py::TestGenerateResponse::test_generate_response_not_available PASSED [ 57%]
tests/test_mistral_service.py::TestGenerateResponse::test_generate_response_api_error PASSED [ 57%]
tests/test_mistral_service.py::TestGenerateResponse::test_generate_response_with_messages_list PASSED [ 57%]
tests/test_mistral_service.py::TestGenerateResponse::test_generate_response_with_context PASSED [ 57%]
tests/test_mistral_service.py::TestAvailabilityAndHealth::test_check_availability_no_client PASSED [ 57%]
tests/test_mistral_service.py::TestAvailabilityAndHealth::test_check_availability_success PASSED [ 57%]
tests/test_mistral_service.py::TestAvailabilityAndHealth::test_check_availability_error PASSED [ 57%]
tests/test_mistral_service.py::TestAvailabilityAndHealth::test_get_health_status_healthy PASSED [ 57%]
tests/test_mistral_service.py::TestAvailabilityAndHealth::test_get_health_status_error PASSED [ 57%]
tests/test_mistral_service.py::TestGlobalInstance::test_global_instance_exists PASSED [ 57%]
tests/test_mistral_service.py::TestGlobalInstance::test_global_instance_has_correct_attributes PASSED [ 57%]
tests/test_mistral_stt_service.py::TestMistralSTTConfig::test_config_initialization_with_api_key PASSED [ 57%]
tests/test_mistral_stt_service.py::TestMistralSTTConfig::test_config_initialization_without_api_key PASSED [ 57%]
tests/test_mistral_stt_service.py::TestMistralSTTConfig::test_config_validate_success PASSED [ 57%]
tests/test_mistral_stt_service.py::TestMistralSTTConfig::test_config_validate_missing_api_key PASSED [ 57%]
tests/test_mistral_stt_service.py::TestMistralSTTConfig::test_config_validate_short_api_key PASSED [ 57%]
tests/test_mistral_stt_service.py::TestMistralSTTServiceInitialization::test_service_initialization_success PASSED [ 57%]
tests/test_mistral_stt_service.py::TestMistralSTTServiceInitialization::test_service_initialization_invalid_config PASSED [ 57%]
tests/test_mistral_stt_service.py::TestMistralSTTServiceInitialization::test_service_initialization_exception_handling PASSED [ 57%]
tests/test_mistral_stt_service.py::TestMistralSTTServiceInitialization::test_language_map_contains_supported_languages PASSED [ 57%]
tests/test_mistral_stt_service.py::TestMistralSTTTranscription::test_transcribe_audio_service_not_available PASSED [ 57%]
tests/test_mistral_stt_service.py::TestMistralSTTTranscription::test_transcribe_audio_success_with_real_audio PASSED [ 57%]
tests/test_mistral_stt_service.py::TestMistralSTTTranscription::test_transcribe_audio_with_alternatives PASSED [ 57%]
tests/test_mistral_stt_service.py::TestMistralSTTTranscription::test_transcribe_audio_different_languages PASSED [ 58%]
tests/test_mistral_stt_service.py::TestMistralSTTTranscription::test_transcribe_audio_api_error_response PASSED [ 58%]
tests/test_mistral_stt_service.py::TestMistralSTTTranscription::test_transcribe_audio_timeout PASSED [ 58%]
tests/test_mistral_stt_service.py::TestMistralSTTTranscription::test_transcribe_audio_network_error PASSED [ 58%]
tests/test_mistral_stt_service.py::TestMistralSTTTranscription::test_transcribe_audio_unexpected_error PASSED [ 58%]
tests/test_mistral_stt_service.py::TestAudioDurationCalculation::test_calculate_audio_duration_wav_file PASSED [ 58%]
tests/test_mistral_stt_service.py::TestAudioDurationCalculation::test_calculate_audio_duration_short_audio PASSED [ 58%]
tests/test_mistral_stt_service.py::TestAudioDurationCalculation::test_calculate_audio_duration_non_wav_format PASSED [ 58%]
tests/test_mistral_stt_service.py::TestAudioDurationCalculation::test_calculate_audio_duration_invalid_data PASSED [ 58%]
tests/test_mistral_stt_service.py::TestErrorHandling::test_handle_api_error_with_json_response PASSED [ 58%]
tests/test_mistral_stt_service.py::TestErrorHandling::test_handle_api_error_without_json PASSED [ 58%]
tests/test_mistral_stt_service.py::TestHealthCheck::test_health_check_service_available PASSED [ 58%]
tests/test_mistral_stt_service.py::TestHealthCheck::test_health_check_service_unavailable PASSED [ 58%]
tests/test_mistral_stt_service.py::TestContextManager::test_context_manager_enter_exit PASSED [ 58%]
tests/test_mistral_stt_service.py::TestContextManager::test_context_manager_exit_with_no_client PASSED [ 58%]
tests/test_mistral_stt_service.py::TestFactoryFunction::test_create_mistral_stt_service PASSED [ 58%]
tests/test_mistral_stt_service.py::TestCompatibilityWrapper::test_mistral_speech_to_text_wrapper PASSED [ 58%]
tests/test_mistral_stt_service.py::TestRealAudioIntegration::test_transcribe_silence_audio PASSED [ 58%]
tests/test_mistral_stt_service.py::TestRealAudioIntegration::test_transcribe_different_sample_rates PASSED [ 58%]
tests/test_mistral_stt_service.py::TestRealAudioIntegration::test_transcribe_stereo_audio PASSED [ 58%]
tests/test_mistral_stt_service.py::TestCompleteCoverage::test_initialization_client_creation_exception PASSED [ 58%]
tests/test_mistral_stt_service.py::TestCompleteCoverage::test_duration_calculation_exception_handler PASSED [ 58%]
tests/test_ollama_service.py::TestOllamaServiceInitialization::test_service_initialization PASSED [ 58%]
tests/test_ollama_service.py::TestOllamaServiceInitialization::test_get_available_models PASSED [ 58%]
tests/test_ollama_service.py::TestOllamaServiceInitialization::test_available_models_structure PASSED [ 58%]
tests/test_ollama_service.py::TestSessionManagement::test_get_session_creates_new PASSED [ 58%]
tests/test_ollama_service.py::TestSessionManagement::test_get_session_reuses_existing PASSED [ 58%]
tests/test_ollama_service.py::TestSessionManagement::test_get_session_recreates_if_closed PASSED [ 58%]
tests/test_ollama_service.py::TestCheckAvailability::test_check_availability_success PASSED [ 58%]
tests/test_ollama_service.py::TestCheckAvailability::test_check_availability_server_error PASSED [ 58%]
tests/test_ollama_service.py::TestCheckAvailability::test_check_availability_connection_error PASSED [ 58%]
tests/test_ollama_service.py::TestListModels::test_list_models_success PASSED [ 58%]
tests/test_ollama_service.py::TestListModels::test_list_models_empty PASSED [ 58%]
tests/test_ollama_service.py::TestListModels::test_list_models_error PASSED [ 58%]
tests/test_ollama_service.py::TestPullModel::test_pull_model_success PASSED [ 58%]
tests/test_ollama_service.py::TestPullModel::test_pull_model_server_error PASSED [ 58%]
tests/test_ollama_service.py::TestPullModel::test_pull_model_connection_error PASSED [ 58%]
tests/test_ollama_service.py::TestPullModel::test_pull_model_progress_without_status_key PASSED [ 58%]
tests/test_ollama_service.py::TestEnsureModelAvailable::test_ensure_model_already_installed PASSED [ 58%]
tests/test_ollama_service.py::TestEnsureModelAvailable::test_ensure_model_needs_pull PASSED [ 58%]
tests/test_ollama_service.py::TestEnsureModelAvailable::test_ensure_model_pull_fails PASSED [ 58%]
tests/test_ollama_service.py::TestGetRecommendedModel::test_get_recommended_model_english PASSED [ 58%]
tests/test_ollama_service.py::TestGetRecommendedModel::test_get_recommended_model_french PASSED [ 59%]
tests/test_ollama_service.py::TestGetRecommendedModel::test_get_recommended_model_technical_english PASSED [ 59%]
tests/test_ollama_service.py::TestGetRecommendedModel::test_get_recommended_model_grammar_spanish PASSED [ 59%]
tests/test_ollama_service.py::TestGetRecommendedModel::test_get_recommended_model_unknown_language PASSED [ 59%]
tests/test_ollama_service.py::TestGenerateResponse::test_generate_response_success PASSED [ 59%]
tests/test_ollama_service.py::TestGenerateResponse::test_generate_response_model_not_available PASSED [ 59%]
tests/test_ollama_service.py::TestGenerateResponse::test_generate_response_api_error PASSED [ 59%]
tests/test_ollama_service.py::TestGenerateResponse::test_generate_response_with_custom_model PASSED [ 59%]
tests/test_ollama_service.py::TestFormatPrompt::test_format_prompt_english PASSED [ 59%]
tests/test_ollama_service.py::TestFormatPrompt::test_format_prompt_french PASSED [ 59%]
tests/test_ollama_service.py::TestFormatPrompt::test_format_prompt_spanish PASSED [ 59%]
tests/test_ollama_service.py::TestFormatPrompt::test_format_prompt_unknown_language PASSED [ 59%]
tests/test_ollama_service.py::TestFormatPrompt::test_format_prompt_with_system_role PASSED [ 59%]
tests/test_ollama_service.py::TestGetHealthStatus::test_get_health_status_healthy PASSED [ 59%]
tests/test_ollama_service.py::TestGetHealthStatus::test_get_health_status_unavailable PASSED [ 59%]
tests/test_ollama_service.py::TestGetHealthStatus::test_get_health_status_error PASSED [ 59%]
tests/test_ollama_service.py::TestOllamaManager::test_check_installation_not_installed PASSED [ 59%]
tests/test_ollama_service.py::TestOllamaManager::test_check_installation_installed_no_models PASSED [ 59%]
tests/test_ollama_service.py::TestOllamaManager::test_check_installation_ready PASSED [ 59%]
tests/test_ollama_service.py::TestOllamaManager::test_get_recommended_setup PASSED [ 59%]
tests/test_ollama_service.py::TestOllamaManager::test_setup_for_language_learning_server_unavailable PASSED [ 59%]
tests/test_ollama_service.py::TestOllamaManager::test_setup_for_language_learning_success PASSED [ 59%]
tests/test_ollama_service.py::TestOllamaManager::test_setup_for_language_learning_partial_success PASSED [ 59%]
tests/test_ollama_service.py::TestGlobalInstances::test_global_ollama_service_exists PASSED [ 59%]
tests/test_ollama_service.py::TestGlobalInstances::test_global_ollama_manager_exists PASSED [ 59%]
tests/test_ollama_service.py::TestConvenienceFunctions::test_get_ollama_status PASSED [ 59%]
tests/test_ollama_service.py::TestConvenienceFunctions::test_is_ollama_available PASSED [ 59%]
tests/test_ollama_service.py::TestConvenienceFunctions::test_generate_local_response PASSED [ 59%]
tests/test_ollama_service.py::TestConvenienceFunctions::test_setup_ollama_for_language_learning PASSED [ 59%]
tests/test_ollama_service.py::TestCloseSession::test_close_session PASSED [ 59%]
tests/test_ollama_service.py::TestCloseSession::test_close_no_session PASSED [ 59%]
tests/test_ollama_service.py::TestGenerateStreamingResponse::test_generate_streaming_response_success PASSED [ 59%]
tests/test_ollama_service.py::TestGenerateStreamingResponse::test_generate_streaming_response_model_not_available PASSED [ 59%]
tests/test_ollama_service.py::TestGenerateStreamingResponse::test_generate_streaming_response_api_error PASSED [ 59%]
tests/test_ollama_service.py::TestGenerateStreamingResponse::test_generate_streaming_response_with_custom_model PASSED [ 59%]
tests/test_ollama_service.py::TestGenerateStreamingResponse::test_generate_streaming_response_invalid_json PASSED [ 59%]
tests/test_ollama_service.py::TestGenerateStreamingResponse::test_generate_streaming_response_chunk_without_response_key PASSED [ 59%]
tests/test_ollama_service.py::TestExceptionHandling::test_list_models_with_non_200_status PASSED [ 59%]
tests/test_ollama_service.py::TestExceptionHandling::test_list_models_exception_in_json_parsing PASSED [ 59%]
tests/test_ollama_service.py::TestExceptionHandling::test_pull_model_with_malformed_json_lines PASSED [ 59%]
tests/test_piper_tts_service.py::TestPiperTTSConfig::test_config_initialization_defaults PASSED [ 59%]
tests/test_piper_tts_service.py::TestPiperTTSConfig::test_config_initialization_custom_values PASSED [ 59%]
tests/test_piper_tts_service.py::TestPiperTTSConfig::test_config_post_init_creates_directory PASSED [ 60%]
tests/test_piper_tts_service.py::TestPiperTTSServiceInitialization::test_service_initialization_basic PASSED [ 60%]
tests/test_piper_tts_service.py::TestPiperTTSServiceInitialization::test_service_language_voice_map_complete PASSED [ 60%]
tests/test_piper_tts_service.py::TestPiperTTSServiceInitialization::test_service_initialization_calls_initialize_voices PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoiceLoading::test_initialize_voices_no_directory PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoiceLoading::test_initialize_voices_empty_directory PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoiceLoading::test_initialize_voices_with_valid_voice PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoiceLoading::test_initialize_voices_missing_config_file PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoiceLoading::test_initialize_voices_invalid_json PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoiceLoading::test_get_available_voices_empty PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoiceLoading::test_get_available_voices_multiple PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoiceSelection::test_get_voice_for_language_direct_mapping PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoiceSelection::test_get_voice_for_language_prefix_match PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoiceSelection::test_get_voice_for_language_fallback_to_default PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoiceSelection::test_get_voice_for_language_fallback_to_first PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoiceSelection::test_get_voice_for_language_no_voices PASSED [ 60%]
tests/test_piper_tts_service.py::TestAudioSynthesis::test_synthesize_speech_no_voices PASSED [ 60%]
tests/test_piper_tts_service.py::TestAudioSynthesis::test_synthesize_speech_with_specific_voice PASSED [ 60%]
tests/test_piper_tts_service.py::TestAudioSynthesis::test_synthesize_speech_with_language_selection PASSED [ 60%]
tests/test_piper_tts_service.py::TestAudioSynthesis::test_synthesize_speech_no_voice_for_language PASSED [ 60%]
tests/test_piper_tts_service.py::TestAudioSynthesis::test_synthesize_speech_metadata_correct PASSED [ 60%]
tests/test_piper_tts_service.py::TestAudioSynthesis::test_synthesize_speech_exception_handling PASSED [ 60%]
tests/test_piper_tts_service.py::TestSynchronousSynthesis::test_synthesize_sync_basic PASSED [ 60%]
tests/test_piper_tts_service.py::TestSynchronousSynthesis::test_synthesize_sync_multiple_chunks PASSED [ 60%]
tests/test_piper_tts_service.py::TestSynchronousSynthesis::test_synthesize_sync_no_audio_generated PASSED [ 60%]
tests/test_piper_tts_service.py::TestSynchronousSynthesis::test_synthesize_sync_tempfile_cleanup PASSED [ 60%]
tests/test_piper_tts_service.py::TestSynchronousSynthesis::test_synthesize_sync_cleanup_oserror PASSED [ 60%]
tests/test_piper_tts_service.py::TestHealthCheck::test_test_synthesis_success PASSED [ 60%]
tests/test_piper_tts_service.py::TestHealthCheck::test_test_synthesis_custom_text PASSED [ 60%]
tests/test_piper_tts_service.py::TestHealthCheck::test_test_synthesis_failure PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoicePersonaSelection::test_get_available_voices_with_metadata PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoicePersonaSelection::test_get_available_voices_filtered_by_language PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoicePersonaSelection::test_infer_gender_female PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoicePersonaSelection::test_infer_gender_male PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoicePersonaSelection::test_infer_gender_unknown PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoicePersonaSelection::test_get_voice_names_legacy PASSED [ 60%]
tests/test_piper_tts_service.py::TestVoicePersonaSelection::test_voice_metadata_is_default_flag PASSED [ 60%]
tests/test_piper_tts_service.py::TestServiceInfo::test_get_service_info_with_voices PASSED [ 60%]
tests/test_piper_tts_service.py::TestServiceInfo::test_get_service_info_no_voices PASSED [ 60%]
tests/test_piper_tts_service.py::TestTextChunking::test_chunk_text_empty_string PASSED [ 60%]
tests/test_piper_tts_service.py::TestTextChunking::test_chunk_text_shorter_than_max PASSED [ 60%]
tests/test_piper_tts_service.py::TestTextChunking::test_chunk_text_exactly_max_size PASSED [ 60%]
tests/test_piper_tts_service.py::TestTextChunking::test_chunk_text_slightly_over_max PASSED [ 60%]
tests/test_piper_tts_service.py::TestTextChunking::test_chunk_text_multiple_sentences PASSED [ 61%]
tests/test_piper_tts_service.py::TestTextChunking::test_chunk_text_no_sentence_boundaries PASSED [ 61%]
tests/test_piper_tts_service.py::TestTextChunking::test_chunk_text_various_punctuation PASSED [ 61%]
tests/test_piper_tts_service.py::TestTextChunking::test_chunk_text_preserves_delimiters PASSED [ 61%]
tests/test_piper_tts_service.py::TestTextChunking::test_chunk_text_boundary_decision PASSED [ 61%]
tests/test_piper_tts_service.py::TestTextChunking::test_chunk_text_strips_whitespace PASSED [ 61%]
tests/test_piper_tts_service.py::TestTextChunking::test_chunk_text_empty_after_strip PASSED [ 61%]
tests/test_piper_tts_service.py::TestTextChunking::test_chunk_text_fallback_to_original PASSED [ 61%]
tests/test_piper_tts_service.py::TestTextChunking::test_chunk_text_only_whitespace_produces_empty_chunk PASSED [ 61%]
tests/test_piper_tts_service.py::TestChunkSynthesisExceptions::test_synthesize_sync_chunk_exception_logged PASSED [ 61%]
tests/test_piper_tts_service.py::TestChunkSynthesisExceptions::test_synthesize_sync_first_chunk_fails PASSED [ 61%]
tests/test_piper_tts_service.py::TestChunkSynthesisExceptions::test_synthesize_sync_middle_chunk_fails PASSED [ 61%]
tests/test_piper_tts_service.py::TestChunkSynthesisExceptions::test_synthesize_sync_last_chunk_fails PASSED [ 61%]
tests/test_piper_tts_service.py::TestChunkSynthesisExceptions::test_synthesize_sync_all_chunks_fail PASSED [ 61%]
tests/test_piper_tts_service.py::TestChunkSynthesisExceptions::test_synthesize_sync_voice_reload_per_chunk PASSED [ 61%]
tests/test_piper_tts_service.py::TestIntegration::test_full_synthesis_workflow PASSED [ 61%]
tests/test_piper_tts_service.py::TestIntegration::test_multiple_language_synthesis PASSED [ 61%]
tests/test_piper_tts_service.py::TestEdgeCases::test_empty_text_synthesis PASSED [ 61%]
tests/test_piper_tts_service.py::TestEdgeCases::test_very_long_text_synthesis PASSED [ 61%]
tests/test_piper_tts_service.py::TestEdgeCases::test_special_characters_in_text PASSED [ 61%]
tests/test_piper_tts_service.py::TestEdgeCases::test_voice_info_with_minimal_config PASSED [ 61%]
tests/test_progress_analytics_service.py::TestSafeMean::test_safe_mean_with_values PASSED [ 61%]
tests/test_progress_analytics_service.py::TestSafeMean::test_safe_mean_with_empty_list PASSED [ 61%]
tests/test_progress_analytics_service.py::TestSafeMean::test_safe_mean_with_custom_default PASSED [ 61%]
tests/test_progress_analytics_service.py::TestSafeMean::test_safe_mean_with_single_value PASSED [ 61%]
tests/test_progress_analytics_service.py::TestSafeMean::test_safe_mean_with_integers PASSED [ 61%]
tests/test_progress_analytics_service.py::TestSafeMean::test_safe_mean_with_mixed_numbers PASSED [ 61%]
tests/test_progress_analytics_service.py::TestDataclassInitialization::test_conversation_metrics_post_init PASSED [ 61%]
tests/test_progress_analytics_service.py::TestDataclassInitialization::test_skill_progress_metrics_post_init PASSED [ 61%]
tests/test_progress_analytics_service.py::TestServiceInitialization::test_get_connection_returns_connection PASSED [ 61%]
tests/test_progress_analytics_service.py::TestServiceInitialization::test_get_connection_row_factory_set PASSED [ 61%]
tests/test_progress_analytics_service.py::TestServiceInitialization::test_initialize_enhanced_tables_creates_tables PASSED [ 61%]
tests/test_progress_analytics_service.py::TestServiceInitialization::test_initialize_enhanced_tables_idempotent PASSED [ 61%]
tests/test_progress_analytics_service.py::TestDataExtractionHelpers::test_extract_fluency_scores_valid_data PASSED [ 61%]
tests/test_progress_analytics_service.py::TestDataExtractionHelpers::test_extract_fluency_scores_empty_sessions PASSED [ 61%]
tests/test_progress_analytics_service.py::TestDataExtractionHelpers::test_extract_fluency_scores_filters_zeros PASSED [ 61%]
tests/test_progress_analytics_service.py::TestDataExtractionHelpers::test_extract_grammar_scores_valid_data PASSED [ 61%]
tests/test_progress_analytics_service.py::TestDataExtractionHelpers::test_extract_grammar_scores_empty_sessions PASSED [ 61%]
tests/test_progress_analytics_service.py::TestDataExtractionHelpers::test_extract_pronunciation_scores_valid_data PASSED [ 61%]
tests/test_progress_analytics_service.py::TestDataExtractionHelpers::test_extract_vocabulary_scores_valid_data PASSED [ 61%]
tests/test_progress_analytics_service.py::TestDataExtractionHelpers::test_extract_confidence_scores_valid_data PASSED [ 61%]
tests/test_progress_analytics_service.py::TestCalculationHelpers::test_calculate_overview_metrics_valid_data PASSED [ 61%]
tests/test_progress_analytics_service.py::TestCalculationHelpers::test_calculate_overview_metrics_empty_sessions PASSED [ 62%]
tests/test_progress_analytics_service.py::TestCalculationHelpers::test_calculate_performance_metrics_with_data PASSED [ 62%]
tests/test_progress_analytics_service.py::TestCalculationHelpers::test_calculate_learning_progress_with_data PASSED [ 62%]
tests/test_progress_analytics_service.py::TestCalculationHelpers::test_calculate_engagement_analysis_with_data PASSED [ 62%]
tests/test_progress_analytics_service.py::TestLinearTrendCalculation::test_calculate_linear_trend_increasing PASSED [ 62%]
tests/test_progress_analytics_service.py::TestLinearTrendCalculation::test_calculate_linear_trend_decreasing PASSED [ 62%]
tests/test_progress_analytics_service.py::TestLinearTrendCalculation::test_calculate_linear_trend_stable PASSED [ 62%]
tests/test_progress_analytics_service.py::TestLinearTrendCalculation::test_calculate_linear_trend_insufficient_data PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSortingHelpers::test_sort_sessions_by_date_ascending PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSortingHelpers::test_sort_sessions_by_date_empty PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSortingHelpers::test_extract_sorted_fluency_scores PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSortingHelpers::test_extract_sorted_confidence_scores PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSortingHelpers::test_extract_sorted_vocabulary_scores PASSED [ 62%]
tests/test_progress_analytics_service.py::TestBuildingHelpers::test_build_trends_dict_with_valid_scores PASSED [ 62%]
tests/test_progress_analytics_service.py::TestBuildingHelpers::test_build_trends_dict_insufficient_data PASSED [ 62%]
tests/test_progress_analytics_service.py::TestFetchingHelpers::test_fetch_conversation_sessions_valid_period PASSED [ 62%]
tests/test_progress_analytics_service.py::TestFetchingHelpers::test_fetch_conversation_sessions_empty_result PASSED [ 62%]
tests/test_progress_analytics_service.py::TestFetchingHelpers::test_fetch_and_parse_skills_with_json_fields PASSED [ 62%]
tests/test_progress_analytics_service.py::TestFetchingHelpers::test_fetch_and_parse_skills_empty_result PASSED [ 62%]
tests/test_progress_analytics_service.py::TestEmptyStateHelpers::test_get_empty_conversation_analytics_structure PASSED [ 62%]
tests/test_progress_analytics_service.py::TestEmptyStateHelpers::test_get_empty_skill_analytics_structure PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillAnalysisHelpers::test_calculate_skill_overview_with_skills PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillAnalysisHelpers::test_calculate_skill_overview_empty_skills PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillAnalysisHelpers::test_extract_positive_improvement_rates PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillAnalysisHelpers::test_calculate_total_practice_time PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillAnalysisHelpers::test_extract_consistency_scores PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillAnalysisHelpers::test_count_improving_skills PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillAnalysisHelpers::test_count_stable_skills PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillAnalysisHelpers::test_count_declining_skills PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillAnalysisHelpers::test_calculate_progress_trends PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillAnalysisHelpers::test_calculate_difficulty_analysis PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillAnalysisHelpers::test_calculate_retention_performance PASSED [ 62%]
tests/test_progress_analytics_service.py::TestConversationRecommendationHelpers::test_generate_conversation_recommendations_empty_sessions PASSED [ 62%]
tests/test_progress_analytics_service.py::TestConversationRecommendationHelpers::test_generate_conversation_recommendations_low_fluency PASSED [ 62%]
tests/test_progress_analytics_service.py::TestConversationRecommendationHelpers::test_generate_conversation_recommendations_low_confidence PASSED [ 62%]
tests/test_progress_analytics_service.py::TestConversationRecommendationHelpers::test_generate_conversation_recommendations_limits_to_five PASSED [ 62%]
tests/test_progress_analytics_service.py::TestConversationRecommendationHelpers::test_generate_conversation_recommendations_excellent_performance PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillRecommendationHelpers::test_add_weakest_skill_recommendations PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillRecommendationHelpers::test_add_retention_recommendations PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillRecommendationHelpers::test_add_retention_recommendations_no_poor_retention PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillRecommendationHelpers::test_add_consistency_recommendations PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillRecommendationHelpers::test_add_consistency_recommendations_all_consistent PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillRecommendationHelpers::test_add_challenge_recommendations PASSED [ 62%]
tests/test_progress_analytics_service.py::TestSkillRecommendationHelpers::test_add_challenge_recommendations_comfortable PASSED [ 63%]
tests/test_progress_analytics_service.py::TestSkillRecommendationHelpers::test_generate_skill_recommendations_empty PASSED [ 63%]
tests/test_progress_analytics_service.py::TestSkillRecommendationHelpers::test_generate_skill_recommendations_with_issues PASSED [ 63%]
tests/test_progress_analytics_service.py::TestNextActionHelpers::test_add_urgent_skill_actions PASSED [ 63%]
tests/test_progress_analytics_service.py::TestNextActionHelpers::test_add_urgent_skill_actions_no_urgent PASSED [ 63%]
tests/test_progress_analytics_service.py::TestNextActionHelpers::test_add_advancement_actions PASSED [ 63%]
tests/test_progress_analytics_service.py::TestNextActionHelpers::test_add_advancement_actions_no_ready PASSED [ 63%]
tests/test_progress_analytics_service.py::TestNextActionHelpers::test_add_overdue_assessment_actions PASSED [ 63%]
tests/test_progress_analytics_service.py::TestNextActionHelpers::test_add_overdue_assessment_actions_no_overdue PASSED [ 63%]
tests/test_progress_analytics_service.py::TestNextActionHelpers::test_generate_next_actions_empty PASSED [ 63%]
tests/test_progress_analytics_service.py::TestNextActionHelpers::test_generate_next_actions_with_various_needs PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_track_conversation_session PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_track_conversation_session_error_handling PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_get_conversation_analytics PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_get_conversation_analytics_empty_data PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_update_skill_progress PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_update_skill_progress_error_handling PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_get_multi_skill_analytics PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_get_multi_skill_analytics_empty_data PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_create_learning_path_recommendation PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_create_learning_path_recommendation_error_handling PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_create_memory_retention_analysis PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_create_memory_retention_analysis_error_handling PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_initialize_enhanced_tables_exception PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_track_conversation_session_database_exception PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_get_conversation_analytics_database_exception PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_calculate_conversation_trends_with_multiple_sessions PASSED [ 63%]
tests/test_progress_analytics_service.py::TestPublicAPIIntegration::test_get_multi_skill_analytics_database_exception PASSED [ 63%]
tests/test_progress_analytics_service.py::TestDataclassPreInitializedFields::test_learning_path_recommendation_with_preinitialized_timestamps PASSED [ 63%]
tests/test_progress_analytics_service.py::TestDataclassPreInitializedFields::test_learning_path_recommendation_partial_timestamp_initialization PASSED [ 63%]
tests/test_progress_analytics_service.py::TestDataclassPreInitializedFields::test_memory_retention_analysis_with_preinitialized_lists PASSED [ 63%]
tests/test_progress_analytics_service.py::TestDataclassPreInitializedFields::test_memory_retention_analysis_with_preinitialized_timestamp PASSED [ 63%]
tests/test_progress_analytics_service.py::TestDataclassPreInitializedFields::test_memory_retention_analysis_fully_preinitialized PASSED [ 63%]
tests/test_qwen_service.py::TestZZZImportErrorHandling::test_import_error_handling PASSED [ 63%]
tests/test_qwen_service.py::TestQwenServiceInitialization::test_service_initialization_with_deepseek_key PASSED [ 63%]
tests/test_qwen_service.py::TestQwenServiceInitialization::test_service_initialization_with_qwen_key PASSED [ 63%]
tests/test_qwen_service.py::TestQwenServiceInitialization::test_service_initialization_without_api_key PASSED [ 63%]
tests/test_qwen_service.py::TestQwenServiceInitialization::test_service_initialization_library_not_available PASSED [ 63%]
tests/test_qwen_service.py::TestQwenServiceInitialization::test_service_initialization_client_error PASSED [ 63%]
tests/test_qwen_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_chinese PASSED [ 63%]
tests/test_qwen_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_chinese_taiwan PASSED [ 63%]
tests/test_qwen_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_english PASSED [ 63%]
tests/test_qwen_service.py::TestConversationPromptGeneration::test_get_conversation_prompt_other_language PASSED [ 64%]
tests/test_qwen_service.py::TestHelperMethods::test_extract_user_message_from_message_param PASSED [ 64%]
tests/test_qwen_service.py::TestHelperMethods::test_extract_user_message_from_messages_list PASSED [ 64%]
tests/test_qwen_service.py::TestHelperMethods::test_extract_user_message_default PASSED [ 64%]
tests/test_qwen_service.py::TestHelperMethods::test_extract_user_message_empty_messages PASSED [ 64%]
tests/test_qwen_service.py::TestHelperMethods::test_select_model_with_deepseek PASSED [ 64%]
tests/test_qwen_service.py::TestHelperMethods::test_select_model_with_qwen PASSED [ 64%]
tests/test_qwen_service.py::TestHelperMethods::test_select_model_custom PASSED [ 64%]
tests/test_qwen_service.py::TestHelperMethods::test_call_qwen_api PASSED [ 64%]
tests/test_qwen_service.py::TestHelperMethods::test_call_qwen_api_with_params PASSED [ 64%]
tests/test_qwen_service.py::TestHelperMethods::test_calculate_cost PASSED [ 64%]
tests/test_qwen_service.py::TestHelperMethods::test_calculate_cost_no_usage PASSED [ 64%]
tests/test_qwen_service.py::TestHelperMethods::test_extract_response_content_with_choices PASSED [ 64%]
tests/test_qwen_service.py::TestHelperMethods::test_extract_response_content_no_choices PASSED [ 64%]
tests/test_qwen_service.py::TestFallbackMessages::test_get_fallback_message_chinese PASSED [ 64%]
tests/test_qwen_service.py::TestFallbackMessages::test_get_fallback_message_english PASSED [ 64%]
tests/test_qwen_service.py::TestResponseBuilding::test_build_success_response PASSED [ 64%]
tests/test_qwen_service.py::TestResponseBuilding::test_build_success_response_no_context PASSED [ 64%]
tests/test_qwen_service.py::TestResponseBuilding::test_build_error_response PASSED [ 64%]
tests/test_qwen_service.py::TestResponseBuilding::test_build_error_response_no_model PASSED [ 64%]
tests/test_qwen_service.py::TestGenerateResponse::test_generate_response_success PASSED [ 64%]
tests/test_qwen_service.py::TestGenerateResponse::test_generate_response_not_available PASSED [ 64%]
tests/test_qwen_service.py::TestGenerateResponse::test_generate_response_api_error PASSED [ 64%]
tests/test_qwen_service.py::TestGenerateResponse::test_generate_response_with_messages_list PASSED [ 64%]
tests/test_qwen_service.py::TestGenerateResponse::test_generate_response_with_context PASSED [ 64%]
tests/test_qwen_service.py::TestAvailabilityAndHealth::test_check_availability_no_client PASSED [ 64%]
tests/test_qwen_service.py::TestAvailabilityAndHealth::test_check_availability_success_deepseek PASSED [ 64%]
tests/test_qwen_service.py::TestAvailabilityAndHealth::test_check_availability_success_qwen PASSED [ 64%]
tests/test_qwen_service.py::TestAvailabilityAndHealth::test_check_availability_error PASSED [ 64%]
tests/test_qwen_service.py::TestAvailabilityAndHealth::test_get_health_status_healthy PASSED [ 64%]
tests/test_qwen_service.py::TestAvailabilityAndHealth::test_get_health_status_error PASSED [ 64%]
tests/test_qwen_service.py::TestGlobalInstance::test_global_instance_exists PASSED [ 64%]
tests/test_qwen_service.py::TestGlobalInstance::test_global_instance_has_correct_attributes PASSED [ 64%]
tests/test_realtime_analyzer.py::test_safe_mean_with_values PASSED       [ 64%]
tests/test_realtime_analyzer.py::test_safe_mean_with_empty_list PASSED   [ 64%]
tests/test_realtime_analyzer.py::test_safe_mean_with_custom_default PASSED [ 64%]
tests/test_realtime_analyzer.py::test_extract_json_from_response_with_markdown PASSED [ 64%]
tests/test_realtime_analyzer.py::test_extract_json_from_response_with_raw_json PASSED [ 64%]
tests/test_realtime_analyzer.py::test_extract_json_from_response_no_json PASSED [ 64%]
tests/test_realtime_analyzer.py::test_extract_json_from_response_array_in_markdown PASSED [ 64%]
tests/test_realtime_analyzer.py::test_extract_json_from_response_raw_array PASSED [ 64%]
tests/test_realtime_analyzer.py::test_analysis_type_enum PASSED          [ 64%]
tests/test_realtime_analyzer.py::test_feedback_priority_enum PASSED      [ 65%]
tests/test_realtime_analyzer.py::test_pronunciation_score_enum PASSED    [ 65%]
tests/test_realtime_analyzer.py::test_audio_segment_dataclass PASSED     [ 65%]
tests/test_realtime_analyzer.py::test_pronunciation_analysis_dataclass PASSED [ 65%]
tests/test_realtime_analyzer.py::test_grammar_issue_dataclass PASSED     [ 65%]
tests/test_realtime_analyzer.py::test_fluency_metrics_dataclass PASSED   [ 65%]
tests/test_realtime_analyzer.py::test_realtime_feedback_dataclass PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analysis_session_dataclass PASSED  [ 65%]
tests/test_realtime_analyzer.py::test_dataclasses_all_fields PASSED      [ 65%]
tests/test_realtime_analyzer.py::test_analyzer_initialization PASSED     [ 65%]
tests/test_realtime_analyzer.py::test_analyzer_language_configs PASSED   [ 65%]
tests/test_realtime_analyzer.py::test_analyzer_empty_sessions_at_start PASSED [ 65%]
tests/test_realtime_analyzer.py::test_start_analysis_session_success PASSED [ 65%]
tests/test_realtime_analyzer.py::test_start_analysis_session_default_types PASSED [ 65%]
tests/test_realtime_analyzer.py::test_start_analysis_session_none_types PASSED [ 65%]
tests/test_realtime_analyzer.py::test_validate_session_success PASSED    [ 65%]
tests/test_realtime_analyzer.py::test_validate_session_not_found PASSED  [ 65%]
tests/test_realtime_analyzer.py::test_end_analysis_session_success PASSED [ 65%]
tests/test_realtime_analyzer.py::test_end_analysis_session_not_found PASSED [ 65%]
tests/test_realtime_analyzer.py::test_get_analysis_types_with_none PASSED [ 65%]
tests/test_realtime_analyzer.py::test_get_analysis_types_with_list PASSED [ 65%]
tests/test_realtime_analyzer.py::test_should_analyze_type_comprehensive PASSED [ 65%]
tests/test_realtime_analyzer.py::test_should_analyze_type_specific_match PASSED [ 65%]
tests/test_realtime_analyzer.py::test_should_analyze_type_no_match PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_pronunciation_success_high_score PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_pronunciation_medium_score PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_pronunciation_low_score PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_pronunciation_json_in_markdown PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_pronunciation_json_parse_error PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_pronunciation_ai_error PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_pronunciation_exception_handling PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_pronunciation_actionable_with_suggestions PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_pronunciation_not_actionable_empty_suggestions PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_grammar_success_with_errors PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_grammar_no_errors PASSED   [ 65%]
tests/test_realtime_analyzer.py::test_analyze_grammar_multiple_errors PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_grammar_severity_mapping PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_grammar_score_calculation PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_grammar_json_parse_error PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_grammar_ai_error PASSED    [ 65%]
tests/test_realtime_analyzer.py::test_analyze_grammar_exception_handling PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_grammar_language_specific_rules PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_grammar_actionable_with_correction PASSED [ 65%]
tests/test_realtime_analyzer.py::test_analyze_fluency_speech_rate_calculation PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_fluency_hesitation_detection PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_fluency_pause_counting PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_fluency_too_slow_feedback PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_fluency_too_fast_feedback PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_fluency_high_hesitation_feedback PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_fluency_low_confidence_feedback PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_fluency_score_calculation PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_fluency_exception_handling PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_fluency_updates_session_metrics PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_audio_segment_comprehensive PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_audio_segment_pronunciation_only PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_audio_segment_grammar_only PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_audio_segment_fluency_only PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_audio_segment_invalid_session PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_audio_segment_exception_handling PASSED [ 66%]
tests/test_realtime_analyzer.py::test_cache_analysis_result PASSED       [ 66%]
tests/test_realtime_analyzer.py::test_update_session_metrics PASSED      [ 66%]
tests/test_realtime_analyzer.py::test_get_session_analytics_success PASSED [ 66%]
tests/test_realtime_analyzer.py::test_get_session_analytics_not_found PASSED [ 66%]
tests/test_realtime_analyzer.py::test_get_session_analytics_empty_scores PASSED [ 66%]
tests/test_realtime_analyzer.py::test_get_session_analytics_feedback_summary PASSED [ 66%]
tests/test_realtime_analyzer.py::test_calculate_trend_improving PASSED   [ 66%]
tests/test_realtime_analyzer.py::test_calculate_trend_declining PASSED   [ 66%]
tests/test_realtime_analyzer.py::test_calculate_trend_stable PASSED      [ 66%]
tests/test_realtime_analyzer.py::test_calculate_trend_insufficient_data PASSED [ 66%]
tests/test_realtime_analyzer.py::test_get_live_feedback_success PASSED   [ 66%]
tests/test_realtime_analyzer.py::test_get_live_feedback_with_limit PASSED [ 66%]
tests/test_realtime_analyzer.py::test_get_live_feedback_session_not_found PASSED [ 66%]
tests/test_realtime_analyzer.py::test_start_realtime_analysis_function PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_speech_realtime_function PASSED [ 66%]
tests/test_realtime_analyzer.py::test_get_realtime_analytics_function PASSED [ 66%]
tests/test_realtime_analyzer.py::test_end_realtime_session_function PASSED [ 66%]
tests/test_realtime_analyzer.py::test_convenience_functions_integration PASSED [ 66%]
tests/test_realtime_analyzer.py::test_global_instance_exists PASSED      [ 66%]
tests/test_realtime_analyzer.py::test_global_instance_attributes PASSED  [ 66%]
tests/test_realtime_analyzer.py::test_collect_feedback_with_empty_grammar PASSED [ 66%]
tests/test_realtime_analyzer.py::test_collect_feedback_grammar_returns_none PASSED [ 66%]
tests/test_realtime_analyzer.py::test_collect_feedback_pronunciation_returns_none PASSED [ 66%]
tests/test_realtime_analyzer.py::test_analyze_fluency_exception_handler PASSED [ 66%]
tests/test_realtime_analyzer.py::test_collect_feedback_grammar_with_results PASSED [ 66%]
tests/test_response_cache.py::TestCacheTypeEnum::test_cache_type_conversation_value PASSED [ 66%]
tests/test_response_cache.py::TestCacheTypeEnum::test_cache_type_translation_value PASSED [ 67%]
tests/test_response_cache.py::TestCacheTypeEnum::test_cache_type_explanation_value PASSED [ 67%]
tests/test_response_cache.py::TestCacheTypeEnum::test_cache_type_simple_qa_value PASSED [ 67%]
tests/test_response_cache.py::TestCacheTypeEnum::test_cache_type_enum_members PASSED [ 67%]
tests/test_response_cache.py::TestCacheEntryDataclass::test_cache_entry_creation_minimal PASSED [ 67%]
tests/test_response_cache.py::TestCacheEntryDataclass::test_cache_entry_creation_with_all_fields PASSED [ 67%]
tests/test_response_cache.py::TestCacheEntryDataclass::test_is_expired_when_expires_at_is_none PASSED [ 67%]
tests/test_response_cache.py::TestCacheEntryDataclass::test_is_expired_when_not_expired PASSED [ 67%]
tests/test_response_cache.py::TestCacheEntryDataclass::test_is_expired_when_expired PASSED [ 67%]
tests/test_response_cache.py::TestCacheEntryDataclass::test_is_stale_when_fresh PASSED [ 67%]
tests/test_response_cache.py::TestCacheEntryDataclass::test_is_stale_when_stale PASSED [ 67%]
tests/test_response_cache.py::TestCacheEntryDataclass::test_is_stale_custom_max_age PASSED [ 67%]
tests/test_response_cache.py::TestCacheEntryDataclass::test_cache_entry_different_cache_types PASSED [ 67%]
tests/test_response_cache.py::TestCacheEntryDataclass::test_cache_entry_different_providers PASSED [ 67%]
tests/test_response_cache.py::TestCacheEntryDataclass::test_cache_entry_different_languages PASSED [ 67%]
tests/test_response_cache.py::TestResponseCacheInitialization::test_response_cache_default_initialization PASSED [ 67%]
tests/test_response_cache.py::TestResponseCacheInitialization::test_response_cache_custom_max_entries PASSED [ 67%]
tests/test_response_cache.py::TestResponseCacheInitialization::test_response_cache_custom_ttl PASSED [ 67%]
tests/test_response_cache.py::TestResponseCacheInitialization::test_response_cache_custom_both_parameters PASSED [ 67%]
tests/test_response_cache.py::TestResponseCacheInitialization::test_cacheable_patterns_initialized PASSED [ 67%]
tests/test_response_cache.py::TestCacheKeyGeneration::test_generate_cache_key_simple_message PASSED [ 67%]
tests/test_response_cache.py::TestCacheKeyGeneration::test_generate_cache_key_same_inputs_same_key PASSED [ 67%]
tests/test_response_cache.py::TestCacheKeyGeneration::test_generate_cache_key_different_message_different_key PASSED [ 67%]
tests/test_response_cache.py::TestCacheKeyGeneration::test_generate_cache_key_different_language_different_key PASSED [ 67%]
tests/test_response_cache.py::TestCacheKeyGeneration::test_generate_cache_key_case_insensitive PASSED [ 67%]
tests/test_response_cache.py::TestCacheKeyGeneration::test_generate_cache_key_strips_whitespace PASSED [ 67%]
tests/test_response_cache.py::TestCacheKeyGeneration::test_generate_cache_key_empty_messages PASSED [ 67%]
tests/test_response_cache.py::TestCacheKeyGeneration::test_generate_cache_key_multiple_messages PASSED [ 67%]
tests/test_response_cache.py::TestCacheKeyGeneration::test_generate_cache_key_long_message_truncated PASSED [ 67%]
tests/test_response_cache.py::TestCacheTypeDetermination::test_determine_cache_type_conversation_hello PASSED [ 67%]
tests/test_response_cache.py::TestCacheTypeDetermination::test_determine_cache_type_conversation_goodbye PASSED [ 67%]
tests/test_response_cache.py::TestCacheTypeDetermination::test_determine_cache_type_translation PASSED [ 67%]
tests/test_response_cache.py::TestCacheTypeDetermination::test_determine_cache_type_explanation PASSED [ 67%]
tests/test_response_cache.py::TestCacheTypeDetermination::test_determine_cache_type_simple_qa PASSED [ 67%]
tests/test_response_cache.py::TestCacheTypeDetermination::test_determine_cache_type_no_match PASSED [ 67%]
tests/test_response_cache.py::TestCacheTypeDetermination::test_determine_cache_type_case_insensitive PASSED [ 67%]
tests/test_response_cache.py::TestCacheTypeDetermination::test_determine_cache_type_with_extra_text PASSED [ 67%]
tests/test_response_cache.py::TestCacheTypeDetermination::test_determine_cache_type_empty_message PASSED [ 67%]
tests/test_response_cache.py::TestCacheTypeDetermination::test_determine_cache_type_whitespace_only PASSED [ 67%]
tests/test_response_cache.py::TestShouldCacheLogic::test_should_cache_valid_conversation PASSED [ 67%]
tests/test_response_cache.py::TestShouldCacheLogic::test_should_cache_empty_messages PASSED [ 67%]
tests/test_response_cache.py::TestShouldCacheLogic::test_should_cache_empty_response PASSED [ 67%]
tests/test_response_cache.py::TestShouldCacheLogic::test_should_cache_response_too_long PASSED [ 67%]
tests/test_response_cache.py::TestShouldCacheLogic::test_should_cache_response_too_short PASSED [ 68%]
tests/test_response_cache.py::TestShouldCacheLogic::test_should_cache_no_matching_pattern PASSED [ 68%]
tests/test_response_cache.py::TestShouldCacheLogic::test_should_cache_translation_pattern PASSED [ 68%]
tests/test_response_cache.py::TestShouldCacheLogic::test_should_cache_explanation_pattern PASSED [ 68%]
tests/test_response_cache.py::TestShouldCacheLogic::test_should_cache_simple_qa_pattern PASSED [ 68%]
tests/test_response_cache.py::TestShouldCacheLogic::test_should_cache_response_exactly_1000_chars PASSED [ 68%]
tests/test_response_cache.py::TestShouldCacheLogic::test_should_cache_response_exactly_20_chars PASSED [ 68%]
tests/test_response_cache.py::TestShouldCacheLogic::test_should_cache_none_response PASSED [ 68%]
tests/test_response_cache.py::TestGetOperation::test_get_cache_miss PASSED [ 68%]
tests/test_response_cache.py::TestGetOperation::test_get_cache_hit PASSED [ 68%]
tests/test_response_cache.py::TestGetOperation::test_get_increments_hit_count PASSED [ 68%]
tests/test_response_cache.py::TestGetOperation::test_get_updates_last_accessed PASSED [ 68%]
tests/test_response_cache.py::TestGetOperation::test_get_expired_entry_returns_none PASSED [ 68%]
tests/test_response_cache.py::TestGetOperation::test_get_stale_entry_returns_none PASSED [ 68%]
tests/test_response_cache.py::TestGetOperation::test_get_increments_total_requests PASSED [ 68%]
tests/test_response_cache.py::TestGetOperation::test_get_with_none_messages PASSED [ 68%]
tests/test_response_cache.py::TestGetOperation::test_get_different_languages_different_cache PASSED [ 68%]
tests/test_response_cache.py::TestGetOperation::test_get_logging_on_hit PASSED [ 68%]
tests/test_response_cache.py::TestSetOperation::test_set_valid_entry PASSED [ 68%]
tests/test_response_cache.py::TestSetOperation::test_set_returns_false_when_should_not_cache PASSED [ 68%]
tests/test_response_cache.py::TestSetOperation::test_set_with_custom_ttl PASSED [ 68%]
tests/test_response_cache.py::TestSetOperation::test_set_with_default_ttl PASSED [ 68%]
tests/test_response_cache.py::TestSetOperation::test_set_creates_correct_cache_type PASSED [ 68%]
tests/test_response_cache.py::TestSetOperation::test_set_evicts_when_cache_full PASSED [ 68%]
tests/test_response_cache.py::TestSetOperation::test_set_returns_false_when_no_cache_type PASSED [ 68%]
tests/test_response_cache.py::TestSetOperation::test_set_defensive_check_for_none_cache_type PASSED [ 68%]
tests/test_response_cache.py::TestSetOperation::test_set_logging_on_success PASSED [ 68%]
tests/test_response_cache.py::TestSetOperation::test_set_overrides_existing_entry PASSED [ 68%]
tests/test_response_cache.py::TestLRUEviction::test_evict_lru_empty_cache PASSED [ 68%]
tests/test_response_cache.py::TestLRUEviction::test_evict_lru_single_entry PASSED [ 68%]
tests/test_response_cache.py::TestLRUEviction::test_evict_lru_removes_least_recently_used PASSED [ 68%]
tests/test_response_cache.py::TestLRUEviction::test_evict_lru_uses_created_at_when_no_last_accessed PASSED [ 68%]
tests/test_response_cache.py::TestLRUEviction::test_evict_lru_increments_evictions_stat PASSED [ 68%]
tests/test_response_cache.py::TestLRUEviction::test_evict_lru_logging PASSED [ 68%]
tests/test_response_cache.py::TestLRUEviction::test_evict_lru_automatic_on_set_when_full PASSED [ 68%]
tests/test_response_cache.py::TestLRUEviction::test_evict_lru_multiple_entries PASSED [ 68%]
tests/test_response_cache.py::TestLRUEviction::test_evict_lru_with_future_timestamps PASSED [ 68%]
tests/test_response_cache.py::TestLRUEviction::test_evict_lru_all_entries_same_timestamp PASSED [ 68%]
tests/test_response_cache.py::TestClearExpired::test_clear_expired_empty_cache PASSED [ 68%]
tests/test_response_cache.py::TestClearExpired::test_clear_expired_no_expired_entries PASSED [ 68%]
tests/test_response_cache.py::TestClearExpired::test_clear_expired_removes_expired_entries PASSED [ 68%]
tests/test_response_cache.py::TestClearExpired::test_clear_expired_removes_stale_entries PASSED [ 68%]
tests/test_response_cache.py::TestClearExpired::test_clear_expired_logging_when_entries_removed PASSED [ 69%]
tests/test_response_cache.py::TestClearExpired::test_clear_expired_no_logging_when_no_entries_removed PASSED [ 69%]
tests/test_response_cache.py::TestClearExpired::test_clear_expired_multiple_expired_entries PASSED [ 69%]
tests/test_response_cache.py::TestStatistics::test_get_stats_empty_cache PASSED [ 69%]
tests/test_response_cache.py::TestStatistics::test_get_stats_with_cache_entries PASSED [ 69%]
tests/test_response_cache.py::TestStatistics::test_get_stats_hit_rate_calculation PASSED [ 69%]
tests/test_response_cache.py::TestStatistics::test_get_stats_type_distribution PASSED [ 69%]
tests/test_response_cache.py::TestStatistics::test_get_stats_total_size_calculation PASSED [ 69%]
tests/test_response_cache.py::TestStatistics::test_get_stats_avg_entry_size_multiple_entries PASSED [ 69%]
tests/test_response_cache.py::TestStatistics::test_get_stats_max_entries PASSED [ 69%]
tests/test_response_cache.py::TestStatistics::test_get_stats_evictions_tracking PASSED [ 69%]
tests/test_response_cache.py::TestStatistics::test_get_stats_hit_rate_rounds_to_two_decimals PASSED [ 69%]
tests/test_response_cache.py::TestStatistics::test_get_stats_zero_division_guard PASSED [ 69%]
tests/test_response_cache.py::TestClearOperation::test_clear_empty_cache PASSED [ 69%]
tests/test_response_cache.py::TestClearOperation::test_clear_removes_all_entries PASSED [ 69%]
tests/test_response_cache.py::TestClearOperation::test_clear_does_not_reset_stats PASSED [ 69%]
tests/test_response_cache.py::TestClearOperation::test_clear_logging PASSED [ 69%]
tests/test_response_cache.py::TestClearOperation::test_clear_allows_new_entries_after_clear PASSED [ 69%]
tests/test_response_cache.py::TestClearOperation::test_clear_resets_to_empty_dict PASSED [ 69%]
tests/test_response_cache.py::TestGlobalInstance::test_global_instance_exists PASSED [ 69%]
tests/test_response_cache.py::TestGlobalInstance::test_global_instance_default_configuration PASSED [ 69%]
tests/test_response_cache.py::TestGlobalInstance::test_global_instance_is_singleton PASSED [ 69%]
tests/test_scenario_factory.py::TestScenarioFactoryInitialization::test_init_with_default_path PASSED [ 69%]
tests/test_scenario_factory.py::TestScenarioFactoryInitialization::test_init_with_custom_path PASSED [ 69%]
tests/test_scenario_factory.py::TestScenarioFactoryInitialization::test_init_calls_load_templates PASSED [ 69%]
tests/test_scenario_factory.py::TestScenarioFactoryInitialization::test_init_loads_default_templates PASSED [ 69%]
tests/test_scenario_factory.py::TestScenarioFactoryInitialization::test_init_caches_initialized PASSED [ 69%]
tests/test_scenario_factory.py::TestLoadUniversalTemplatesPathNotExists::test_missing_directory_triggers_warning PASSED [ 69%]
tests/test_scenario_factory.py::TestLoadUniversalTemplatesPathNotExists::test_missing_directory_creates_defaults PASSED [ 69%]
tests/test_scenario_factory.py::TestLoadUniversalTemplatesPathNotExists::test_missing_directory_calls_create_default PASSED [ 69%]
tests/test_scenario_factory.py::TestLoadUniversalTemplatesNoJSONFiles::test_empty_directory_triggers_info PASSED [ 69%]
tests/test_scenario_factory.py::TestLoadUniversalTemplatesNoJSONFiles::test_empty_directory_creates_defaults PASSED [ 69%]
tests/test_scenario_factory.py::TestLoadUniversalTemplatesNoJSONFiles::test_empty_directory_calls_create_default PASSED [ 69%]
tests/test_scenario_factory.py::TestLoadUniversalTemplatesFromJSON::test_load_valid_json_file PASSED [ 69%]
tests/test_scenario_factory.py::TestLoadUniversalTemplatesFromJSON::test_load_multiple_json_files PASSED [ 69%]
tests/test_scenario_factory.py::TestLoadUniversalTemplatesFromJSON::test_invalid_json_logs_error PASSED [ 69%]
tests/test_scenario_factory.py::TestLoadUniversalTemplatesFromJSON::test_templates_stored_correctly PASSED [ 69%]
tests/test_scenario_factory.py::TestCreateUniversalTemplate::test_create_template_from_valid_data PASSED [ 69%]
tests/test_scenario_factory.py::TestCreateUniversalTemplate::test_create_template_all_fields_mapped PASSED [ 69%]
tests/test_scenario_factory.py::TestCreateDefaultTemplates::test_creates_all_default_templates PASSED [ 69%]
tests/test_scenario_factory.py::TestCreateDefaultTemplates::test_import_error_fallback_to_tier1_tier2 PASSED [ 69%]
tests/test_scenario_factory.py::TestCreateDefaultTemplates::test_verify_template_count PASSED [ 69%]
tests/test_scenario_factory.py::TestCreateDefaultTemplates::test_all_templates_added_to_dict PASSED [ 70%]
tests/test_scenario_factory.py::TestCreateDefaultTemplates::test_logger_messages_for_each_template PASSED [ 70%]
tests/test_scenario_factory.py::TestGetAllTemplates::test_returns_all_loaded_templates PASSED [ 70%]
tests/test_scenario_factory.py::TestGetAllTemplates::test_returns_list_not_dict PASSED [ 70%]
tests/test_scenario_factory.py::TestGetTemplateById::test_valid_id_returns_template PASSED [ 70%]
tests/test_scenario_factory.py::TestGetTemplateById::test_invalid_id_returns_none PASSED [ 70%]
tests/test_scenario_factory.py::TestGetTemplateById::test_exact_template_returned PASSED [ 70%]
tests/test_scenario_factory.py::TestGetTemplatesByTier::test_no_tier_returns_all_sorted PASSED [ 70%]
tests/test_scenario_factory.py::TestGetTemplatesByTier::test_tier_1_filter PASSED [ 70%]
tests/test_scenario_factory.py::TestGetTemplatesByTier::test_tier_2_filter PASSED [ 70%]
tests/test_scenario_factory.py::TestGetTemplatesByTier::test_tier_3_or_4_filter PASSED [ 70%]
tests/test_scenario_factory.py::TestGetTemplatesByTier::test_sorting_by_tier_and_name PASSED [ 70%]
tests/test_scenario_factory.py::TestGetTemplatesByCategory::test_filter_by_category_returns_matching PASSED [ 70%]
tests/test_scenario_factory.py::TestGetTemplatesByCategory::test_multiple_categories PASSED [ 70%]
tests/test_scenario_factory.py::TestGetTemplatesByCategory::test_empty_result_for_unused_category PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOSaveSuccess::test_save_scenarios_creates_directory PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOSaveSuccess::test_save_scenarios_writes_json_file PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOSaveSuccess::test_save_scenarios_serializes_minimal_scenario PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOSaveSuccess::test_save_scenarios_serializes_phases PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOSaveSuccess::test_save_scenarios_handles_optional_attributes PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOSaveSuccess::test_save_scenarios_defaults_optional_attributes PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOSaveSuccess::test_save_scenarios_handles_none_created_at PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOSaveSuccess::test_save_scenarios_json_formatting PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOSaveSuccess::test_save_scenarios_multiple_scenarios PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOSaveErrors::test_save_scenarios_handles_exception PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOLoadSuccess::test_load_scenarios_file_not_exists PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOLoadSuccess::test_load_scenarios_reads_file PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOLoadSuccess::test_load_scenarios_deserializes_scenario PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOLoadSuccess::test_load_scenarios_deserializes_phases PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOLoadSuccess::test_load_scenarios_handles_missing_phase_fields PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOLoadSuccess::test_load_scenarios_sets_optional_attributes PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOLoadSuccess::test_load_scenarios_defaults_missing_attributes PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOLoadSuccess::test_load_scenarios_multiple_scenarios PASSED [ 70%]
tests/test_scenario_io.py::TestScenarioIOLoadErrors::test_load_scenarios_handles_exception PASSED [ 70%]
tests/test_scenario_manager.py::TestScenarioManagerInit::test_scenario_manager_initialization PASSED [ 70%]
tests/test_scenario_manager.py::TestScenarioManagerInit::test_scenario_templates_structure PASSED [ 70%]
tests/test_scenario_manager.py::TestScenarioManagerInit::test_global_scenario_manager_instance PASSED [ 70%]
tests/test_scenario_manager.py::TestGetAvailableScenarios::test_get_all_scenarios PASSED [ 70%]
tests/test_scenario_manager.py::TestGetAvailableScenarios::test_filter_scenarios_by_category PASSED [ 70%]
tests/test_scenario_manager.py::TestGetAvailableScenarios::test_filter_scenarios_by_difficulty PASSED [ 70%]
tests/test_scenario_manager.py::TestGetAvailableScenarios::test_filter_scenarios_by_category_and_difficulty PASSED [ 70%]
tests/test_scenario_manager.py::TestGetAvailableScenarios::test_scenario_list_includes_metadata PASSED [ 70%]
tests/test_scenario_manager.py::TestGetScenarioDetails::test_get_scenario_details_success PASSED [ 70%]
tests/test_scenario_manager.py::TestGetScenarioDetails::test_get_scenario_details_includes_phases PASSED [ 71%]
tests/test_scenario_manager.py::TestGetScenarioDetails::test_get_scenario_details_nonexistent PASSED [ 71%]
tests/test_scenario_manager.py::TestUniversalTemplates::test_get_universal_templates PASSED [ 71%]
tests/test_scenario_manager.py::TestUniversalTemplates::test_get_tier1_scenarios PASSED [ 71%]
tests/test_scenario_manager.py::TestUniversalTemplates::test_get_scenarios_by_category PASSED [ 71%]
tests/test_scenario_manager.py::TestCreateScenarioFromTemplate::test_create_scenario_from_template_method_exists PASSED [ 71%]
tests/test_scenario_manager.py::TestStartScenarioConversation::test_start_scenario_success PASSED [ 71%]
tests/test_scenario_manager.py::TestStartScenarioConversation::test_start_scenario_creates_progress PASSED [ 71%]
tests/test_scenario_manager.py::TestStartScenarioConversation::test_start_scenario_invalid_id PASSED [ 71%]
tests/test_scenario_manager.py::TestStartScenarioConversation::test_start_scenario_with_language PASSED [ 71%]
tests/test_scenario_manager.py::TestGenerateScenarioOpening::test_generate_opening_restaurant PASSED [ 71%]
tests/test_scenario_manager.py::TestGenerateScenarioOpening::test_generate_opening_travel PASSED [ 71%]
tests/test_scenario_manager.py::TestGenerateScenarioOpening::test_generate_opening_shopping PASSED [ 71%]
tests/test_scenario_manager.py::TestProcessScenarioMessage::test_process_message_success PASSED [ 71%]
tests/test_scenario_manager.py::TestProcessScenarioMessage::test_process_message_updates_progress PASSED [ 71%]
tests/test_scenario_manager.py::TestProcessScenarioMessage::test_process_message_invalid_progress_id PASSED [ 71%]
tests/test_scenario_manager.py::TestProcessScenarioMessage::test_process_message_phase_advancement PASSED [ 71%]
tests/test_scenario_manager.py::TestAnalyzeScenarioMessage::test_analyze_message_vocabulary_usage PASSED [ 71%]
tests/test_scenario_manager.py::TestAnalyzeScenarioMessage::test_analyze_message_essential_phrases PASSED [ 71%]
tests/test_scenario_manager.py::TestAnalyzeScenarioMessage::test_analyze_message_generates_feedback PASSED [ 71%]
tests/test_scenario_manager.py::TestAnalyzeScenarioMessage::test_analyze_message_engagement_score PASSED [ 71%]
tests/test_scenario_manager.py::TestCheckPhaseCompletion::test_check_phase_completion_with_criteria PASSED [ 71%]
tests/test_scenario_manager.py::TestCheckPhaseCompletion::test_check_phase_completion_below_threshold PASSED [ 71%]
tests/test_scenario_manager.py::TestGetScenarioProgress::test_get_progress_success PASSED [ 71%]
tests/test_scenario_manager.py::TestGetScenarioProgress::test_get_progress_nonexistent PASSED [ 71%]
tests/test_scenario_manager.py::TestCompleteScenario::test_complete_scenario_success PASSED [ 71%]
tests/test_scenario_manager.py::TestCompleteScenario::test_complete_scenario_removes_from_active PASSED [ 71%]
tests/test_scenario_manager.py::TestCompleteScenario::test_complete_scenario_invalid_id PASSED [ 71%]
tests/test_scenario_manager.py::TestGetNextScenarioRecommendations::test_get_recommendations PASSED [ 71%]
tests/test_scenario_manager.py::TestPersistenceMethods::test_get_all_scenarios PASSED [ 71%]
tests/test_scenario_manager.py::TestPersistenceMethods::test_get_scenario_by_id_success PASSED [ 71%]
tests/test_scenario_manager.py::TestPersistenceMethods::test_get_scenario_by_id_nonexistent PASSED [ 71%]
tests/test_scenario_manager.py::TestPersistenceMethods::test_save_scenario_validation PASSED [ 71%]
tests/test_scenario_manager.py::TestPersistenceMethods::test_validate_scenario_success PASSED [ 71%]
tests/test_scenario_manager.py::TestPersistenceMethods::test_save_scenario_success PASSED [ 71%]
tests/test_scenario_manager.py::TestConvenienceFunctions::test_get_available_scenarios_function PASSED [ 71%]
tests/test_scenario_manager.py::TestConvenienceFunctions::test_get_available_scenarios_with_filters PASSED [ 71%]
tests/test_scenario_manager.py::TestConvenienceFunctions::test_start_scenario_function PASSED [ 71%]
tests/test_scenario_manager.py::TestConvenienceFunctions::test_process_scenario_interaction_function PASSED [ 71%]
tests/test_scenario_manager.py::TestConvenienceFunctions::test_get_scenario_status_function PASSED [ 71%]
tests/test_scenario_manager.py::TestPhaseCompletionEdgeCases::test_check_phase_completion_no_criteria_high_score PASSED [ 71%]
tests/test_scenario_manager.py::TestPhaseCompletionEdgeCases::test_check_phase_completion_no_criteria_low_score PASSED [ 71%]
tests/test_scenario_manager.py::TestPhaseCompletionEdgeCases::test_check_phase_completion_no_criteria_medium_score PASSED [ 72%]
tests/test_scenario_manager.py::TestPhaseCompletionEdgeCases::test_check_phase_completion_no_criteria_empty_phrases PASSED [ 72%]
tests/test_scenario_manager.py::TestScenarioValidation::test_validate_scenario_empty_id PASSED [ 72%]
tests/test_scenario_manager.py::TestScenarioValidation::test_validate_scenario_whitespace_id PASSED [ 72%]
tests/test_scenario_manager.py::TestScenarioValidation::test_validate_scenario_empty_name PASSED [ 72%]
tests/test_scenario_manager.py::TestScenarioValidation::test_validate_scenario_zero_duration PASSED [ 72%]
tests/test_scenario_manager.py::TestScenarioValidation::test_validate_scenario_negative_duration PASSED [ 72%]
tests/test_scenario_manager.py::TestScenarioValidation::test_validate_scenario_no_phases PASSED [ 72%]
tests/test_scenario_manager.py::TestDeleteScenario::test_delete_scenario_success PASSED [ 72%]
tests/test_scenario_manager.py::TestDeleteScenario::test_delete_scenario_nonexistent PASSED [ 72%]
tests/test_scenario_manager.py::TestDeleteScenario::test_delete_scenario_save_failure PASSED [ 72%]
tests/test_scenario_manager.py::TestSetScenarioActive::test_set_scenario_active_true PASSED [ 72%]
tests/test_scenario_manager.py::TestSetScenarioActive::test_set_scenario_active_false PASSED [ 72%]
tests/test_scenario_manager.py::TestSetScenarioActive::test_set_scenario_active_nonexistent PASSED [ 72%]
tests/test_scenario_manager.py::TestSetScenarioActive::test_set_scenario_active_save_failure PASSED [ 72%]
tests/test_scenario_manager.py::TestAsyncInitialization::test_initialize_loads_scenarios_from_file PASSED [ 72%]
tests/test_scenario_manager.py::TestAsyncInitialization::test_initialize_only_runs_once PASSED [ 72%]
tests/test_scenario_manager.py::TestGetUniversalTemplatesComplete::test_get_universal_templates_with_tier PASSED [ 72%]
tests/test_scenario_manager.py::TestGetUniversalTemplatesComplete::test_get_universal_templates_without_tier PASSED [ 72%]
tests/test_scenario_manager.py::TestCreateScenarioFromTemplateNotImplemented::test_create_scenario_from_template_not_implemented PASSED [ 72%]
tests/test_scenario_manager.py::TestUpdateScenarioMethod::test_update_scenario_calls_save PASSED [ 72%]
tests/test_scenario_manager.py::TestConvenienceFunctionFinish::test_finish_scenario_function PASSED [ 72%]
tests/test_scenario_manager.py::TestGetTier1ScenariosActual::test_get_tier1_scenarios_returns_tier1_templates PASSED [ 72%]
tests/test_scenario_manager.py::TestSaveScenarioSuccess::test_save_scenario_success_path PASSED [ 72%]
tests/test_scenario_manager.py::TestSaveScenarioLogging::test_save_scenario_logs_success PASSED [ 72%]
tests/test_scenario_manager.py::TestSaveScenarioLogging::test_save_scenario_logs_error_on_exception PASSED [ 72%]
tests/test_scenario_manager.py::TestSaveScenarioLogging::test_save_scenario_logs_validation_warning PASSED [ 72%]
tests/test_scenario_manager.py::TestRecommendationsAdvancedScenarios::test_recommendations_include_advanced_same_category PASSED [ 72%]
tests/test_scenario_models.py::TestScenarioEnums::test_scenario_category_enum PASSED [ 72%]
tests/test_scenario_models.py::TestScenarioEnums::test_scenario_difficulty_enum PASSED [ 72%]
tests/test_scenario_models.py::TestScenarioEnums::test_conversation_role_enum PASSED [ 72%]
tests/test_scenario_models.py::TestScenarioPhase::test_scenario_phase_with_all_fields PASSED [ 72%]
tests/test_scenario_models.py::TestScenarioPhase::test_scenario_phase_with_none_success_criteria PASSED [ 72%]
tests/test_scenario_models.py::TestScenarioPhase::test_scenario_phase_without_optional_fields PASSED [ 72%]
tests/test_scenario_models.py::TestConversationScenario::test_conversation_scenario_with_all_fields PASSED [ 72%]
tests/test_scenario_models.py::TestConversationScenario::test_conversation_scenario_with_none_optional_fields PASSED [ 72%]
tests/test_scenario_models.py::TestConversationScenario::test_conversation_scenario_without_optional_fields PASSED [ 72%]
tests/test_scenario_models.py::TestScenarioProgress::test_scenario_progress_with_all_fields PASSED [ 72%]
tests/test_scenario_models.py::TestScenarioProgress::test_scenario_progress_with_none_difficulty_adjustments PASSED [ 72%]
tests/test_scenario_models.py::TestScenarioProgress::test_scenario_progress_without_optional_fields PASSED [ 72%]
tests/test_scenario_models.py::TestUniversalScenarioTemplate::test_universal_scenario_template_with_all_fields PASSED [ 72%]
tests/test_scenario_models.py::TestUniversalScenarioTemplate::test_universal_scenario_template_with_none_optional_fields PASSED [ 72%]
tests/test_scenario_models.py::TestUniversalScenarioTemplate::test_universal_scenario_template_without_optional_fields PASSED [ 72%]
tests/test_scenario_models.py::TestDataclassIntegration::test_complete_scenario_creation_flow PASSED [ 73%]
tests/test_scenario_models.py::TestDataclassIntegration::test_template_based_scenario_creation PASSED [ 73%]
tests/test_scenario_templates.py::TestScenarioTemplatesGetters::test_get_tier1_templates_returns_list PASSED [ 73%]
tests/test_scenario_templates.py::TestScenarioTemplatesGetters::test_get_tier1_templates_all_tier1 PASSED [ 73%]
tests/test_scenario_templates.py::TestScenarioTemplatesGetters::test_get_tier2_templates_returns_list PASSED [ 73%]
tests/test_scenario_templates.py::TestScenarioTemplatesGetters::test_get_tier2_templates_all_tier2 PASSED [ 73%]
tests/test_scenario_templates.py::TestGreetingsTemplate::test_greetings_template_basic_structure PASSED [ 73%]
tests/test_scenario_templates.py::TestGreetingsTemplate::test_greetings_template_has_vocabulary PASSED [ 73%]
tests/test_scenario_templates.py::TestGreetingsTemplate::test_greetings_template_has_essential_phrases PASSED [ 73%]
tests/test_scenario_templates.py::TestGreetingsTemplate::test_greetings_template_has_cultural_context PASSED [ 73%]
tests/test_scenario_templates.py::TestGreetingsTemplate::test_greetings_template_has_learning_objectives PASSED [ 73%]
tests/test_scenario_templates.py::TestGreetingsTemplate::test_greetings_template_has_conversation_starters PASSED [ 73%]
tests/test_scenario_templates.py::TestGreetingsTemplate::test_greetings_template_has_scenario_variations PASSED [ 73%]
tests/test_scenario_templates.py::TestGreetingsTemplate::test_greetings_template_has_difficulty_modifiers PASSED [ 73%]
tests/test_scenario_templates.py::TestGreetingsTemplate::test_greetings_template_has_success_metrics PASSED [ 73%]
tests/test_scenario_templates.py::TestDailyRoutineTemplate::test_daily_routine_template_basic_structure PASSED [ 73%]
tests/test_scenario_templates.py::TestDailyRoutineTemplate::test_daily_routine_template_has_required_fields PASSED [ 73%]
tests/test_scenario_templates.py::TestBasicConversationsTemplate::test_basic_conversations_template_basic_structure PASSED [ 73%]
tests/test_scenario_templates.py::TestBasicConversationsTemplate::test_basic_conversations_template_has_required_fields PASSED [ 73%]
tests/test_scenario_templates.py::TestFamilyTemplate::test_family_template_basic_structure PASSED [ 73%]
tests/test_scenario_templates.py::TestFamilyTemplate::test_family_template_has_required_fields PASSED [ 73%]
tests/test_scenario_templates.py::TestRestaurantTemplate::test_restaurant_template_basic_structure PASSED [ 73%]
tests/test_scenario_templates.py::TestRestaurantTemplate::test_restaurant_template_has_required_fields PASSED [ 73%]
tests/test_scenario_templates.py::TestTransportationTemplate::test_transportation_template_basic_structure PASSED [ 73%]
tests/test_scenario_templates.py::TestTransportationTemplate::test_transportation_template_has_required_fields PASSED [ 73%]
tests/test_scenario_templates.py::TestHomeNeighborhoodTemplate::test_home_neighborhood_template_basic_structure PASSED [ 73%]
tests/test_scenario_templates.py::TestHomeNeighborhoodTemplate::test_home_neighborhood_template_has_required_fields PASSED [ 73%]
tests/test_scenario_templates.py::TestDataQuality::test_all_templates_have_unique_ids PASSED [ 73%]
tests/test_scenario_templates.py::TestDataQuality::test_all_templates_have_valid_categories PASSED [ 73%]
tests/test_scenario_templates.py::TestDataQuality::test_all_templates_have_three_difficulty_levels PASSED [ 73%]
tests/test_scenario_templates.py::TestDataQuality::test_all_templates_have_non_empty_vocabulary PASSED [ 73%]
tests/test_scenario_templates.py::TestDataQuality::test_all_templates_have_learning_objectives PASSED [ 73%]
tests/test_scenario_templates.py::TestDataQuality::test_all_templates_have_conversation_starters PASSED [ 73%]
tests/test_scenario_templates.py::TestDataQuality::test_all_templates_have_scenario_variations PASSED [ 73%]
tests/test_scenario_templates.py::TestDataQuality::test_all_templates_have_success_metrics PASSED [ 73%]
tests/test_scenario_templates.py::TestDataQuality::test_all_templates_have_cultural_context PASSED [ 73%]
tests/test_scenario_templates.py::TestDataQuality::test_scenario_variations_have_required_fields PASSED [ 73%]
tests/test_scenario_templates.py::TestDataQuality::test_difficulty_modifiers_have_duration PASSED [ 73%]
tests/test_scenario_templates_extended.py::TestTierGetters::test_get_tier2_templates PASSED [ 73%]
tests/test_scenario_templates_extended.py::TestTierGetters::test_get_tier3_templates PASSED [ 73%]
tests/test_scenario_templates_extended.py::TestTierGetters::test_get_tier4_templates PASSED [ 73%]
tests/test_scenario_templates_extended.py::TestTierGetters::test_get_all_extended_templates PASSED [ 73%]
tests/test_scenario_templates_extended.py::TestTierGetters::test_all_templates_aggregate_consistency PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier2Templates::test_create_daily_routine_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier2Templates::test_create_basic_conversations_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier2Templates::test_create_job_work_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier2Templates::test_create_weather_climate_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier2Templates::test_create_clothing_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier2Templates::test_create_shopping_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier2Templates::test_create_plans_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier2Templates::test_create_common_topics_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier2Templates::test_create_numbers_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier2Templates::test_create_celebrations_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier3Templates::test_create_sports_activities_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier3Templates::test_create_grocery_shopping_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier3Templates::test_create_education_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier3Templates::test_create_office_work_life_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier3Templates::test_create_permissions_etiquette_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier3Templates::test_create_physical_health_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier3Templates::test_create_trip_places_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier3Templates::test_create_public_places_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier3Templates::test_create_describing_someone_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier3Templates::test_create_feelings_emotions_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier4Templates::test_create_difficulties_solutions_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier4Templates::test_create_health_wellbeing_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier4Templates::test_create_making_plans_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier4Templates::test_create_getting_house_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier4Templates::test_create_music_performing_arts_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier4Templates::test_create_past_activities_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTier4Templates::test_create_money_finances_template PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTemplateDataQuality::test_all_templates_have_required_fields PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTemplateDataQuality::test_all_template_ids_unique PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTemplateDataQuality::test_all_template_names_unique PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTemplateDataQuality::test_essential_phrases_structure PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTemplateDataQuality::test_scenario_variations_structure PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTemplateDataQuality::test_difficulty_modifiers_structure PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTemplateDataQuality::test_categories_distribution PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTemplateDataQuality::test_vocabulary_lists_not_empty PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTemplateDataQuality::test_learning_objectives_not_empty PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTemplateDataQuality::test_conversation_starters_not_empty PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestTemplateDataQuality::test_success_metrics_not_empty PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestEdgeCases::test_empty_tier_results_in_empty_list PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestEdgeCases::test_template_immutability PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestEdgeCases::test_no_tier_overlap PASSED [ 74%]
tests/test_scenario_templates_extended.py::TestEdgeCases::test_all_extended_contains_all_tiers PASSED [ 75%]
tests/test_schemas.py::TestEnums::test_user_role_enum_values PASSED      [ 75%]
tests/test_schemas.py::TestEnums::test_language_enum_values PASSED       [ 75%]
tests/test_schemas.py::TestEnums::test_conversation_role_enum_values PASSED [ 75%]
tests/test_schemas.py::TestEnums::test_document_type_enum_values PASSED  [ 75%]
tests/test_schemas.py::TestEnums::test_learning_status_enum_values PASSED [ 75%]
tests/test_schemas.py::TestBaseSchema::test_base_schema_config PASSED    [ 75%]
tests/test_schemas.py::TestUserSchemas::test_user_base_creation PASSED   [ 75%]
tests/test_schemas.py::TestUserSchemas::test_user_base_minimal PASSED    [ 75%]
tests/test_schemas.py::TestUserSchemas::test_user_create_valid PASSED    [ 75%]
tests/test_schemas.py::TestUserSchemas::test_user_create_user_id_validator_valid_characters PASSED [ 75%]
tests/test_schemas.py::TestUserSchemas::test_user_create_user_id_validator_lowercase_conversion PASSED [ 75%]
tests/test_schemas.py::TestUserSchemas::test_user_create_user_id_validator_invalid_characters PASSED [ 75%]
tests/test_schemas.py::TestUserSchemas::test_user_create_with_defaults PASSED [ 75%]
tests/test_schemas.py::TestUserSchemas::test_user_update_partial PASSED  [ 75%]
tests/test_schemas.py::TestUserSchemas::test_user_update_all_none PASSED [ 75%]
tests/test_schemas.py::TestUserSchemas::test_user_response_complete PASSED [ 75%]
tests/test_schemas.py::TestUserSchemas::test_user_profile_extended PASSED [ 75%]
tests/test_schemas.py::TestLanguageSchemas::test_language_base_creation PASSED [ 75%]
tests/test_schemas.py::TestLanguageSchemas::test_language_create_with_config PASSED [ 75%]
tests/test_schemas.py::TestLanguageSchemas::test_language_create_default_config PASSED [ 75%]
tests/test_schemas.py::TestLanguageSchemas::test_language_response_complete PASSED [ 75%]
tests/test_schemas.py::TestConversationSchemas::test_conversation_base_creation PASSED [ 75%]
tests/test_schemas.py::TestConversationSchemas::test_conversation_create_with_context PASSED [ 75%]
tests/test_schemas.py::TestConversationSchemas::test_conversation_create_default_context PASSED [ 75%]
tests/test_schemas.py::TestConversationSchemas::test_conversation_update_partial PASSED [ 75%]
tests/test_schemas.py::TestConversationSchemas::test_conversation_response_complete PASSED [ 75%]
tests/test_schemas.py::TestConversationSchemas::test_conversation_with_messages PASSED [ 75%]
tests/test_schemas.py::TestMessageSchemas::test_message_base_creation PASSED [ 75%]
tests/test_schemas.py::TestMessageSchemas::test_message_create_with_feedback PASSED [ 75%]
tests/test_schemas.py::TestMessageSchemas::test_message_create_default_feedback PASSED [ 75%]
tests/test_schemas.py::TestMessageSchemas::test_message_response_complete PASSED [ 75%]
tests/test_schemas.py::TestDocumentSchemas::test_document_base_creation PASSED [ 75%]
tests/test_schemas.py::TestDocumentSchemas::test_document_create_complete PASSED [ 75%]
tests/test_schemas.py::TestDocumentSchemas::test_document_update_partial PASSED [ 75%]
tests/test_schemas.py::TestDocumentSchemas::test_document_response_complete PASSED [ 75%]
tests/test_schemas.py::TestDocumentSchemas::test_document_with_content PASSED [ 75%]
tests/test_schemas.py::TestLearningProgressSchemas::test_learning_progress_base_creation PASSED [ 75%]
tests/test_schemas.py::TestLearningProgressSchemas::test_learning_progress_base_default_target PASSED [ 75%]
tests/test_schemas.py::TestLearningProgressSchemas::test_learning_progress_create_with_goals PASSED [ 75%]
tests/test_schemas.py::TestLearningProgressSchemas::test_learning_progress_create_defaults PASSED [ 75%]
tests/test_schemas.py::TestLearningProgressSchemas::test_learning_progress_update_partial PASSED [ 75%]
tests/test_schemas.py::TestLearningProgressSchemas::test_learning_progress_response_complete PASSED [ 75%]
tests/test_schemas.py::TestVocabularySchemas::test_vocabulary_base_creation PASSED [ 76%]
tests/test_schemas.py::TestVocabularySchemas::test_vocabulary_create_complete PASSED [ 76%]
tests/test_schemas.py::TestVocabularySchemas::test_vocabulary_create_defaults PASSED [ 76%]
tests/test_schemas.py::TestVocabularySchemas::test_vocabulary_update_partial PASSED [ 76%]
tests/test_schemas.py::TestVocabularySchemas::test_vocabulary_response_complete PASSED [ 76%]
tests/test_schemas.py::TestAPIUsageSchemas::test_api_usage_base_creation PASSED [ 76%]
tests/test_schemas.py::TestAPIUsageSchemas::test_api_usage_create_complete PASSED [ 76%]
tests/test_schemas.py::TestAPIUsageSchemas::test_api_usage_create_defaults PASSED [ 76%]
tests/test_schemas.py::TestAPIUsageSchemas::test_api_usage_response_complete PASSED [ 76%]
tests/test_schemas.py::TestUtilitySchemas::test_user_language_association PASSED [ 76%]
tests/test_schemas.py::TestUtilitySchemas::test_bulk_operation_request PASSED [ 76%]
tests/test_schemas.py::TestUtilitySchemas::test_bulk_operation_response PASSED [ 76%]
tests/test_schemas.py::TestUtilitySchemas::test_search_request_with_filters PASSED [ 76%]
tests/test_schemas.py::TestUtilitySchemas::test_search_request_defaults PASSED [ 76%]
tests/test_schemas.py::TestUtilitySchemas::test_search_response PASSED   [ 76%]
tests/test_schemas.py::TestUtilitySchemas::test_error_response PASSED    [ 76%]
tests/test_schemas.py::TestUtilitySchemas::test_error_response_default_timestamp PASSED [ 76%]
tests/test_schemas.py::TestUtilitySchemas::test_success_response_with_data PASSED [ 76%]
tests/test_schemas.py::TestUtilitySchemas::test_success_response_defaults PASSED [ 76%]
tests/test_schemas.py::TestFieldValidation::test_username_min_length_validation PASSED [ 76%]
tests/test_schemas.py::TestFieldValidation::test_username_max_length_validation PASSED [ 76%]
tests/test_schemas.py::TestFieldValidation::test_password_min_length_validation PASSED [ 76%]
tests/test_schemas.py::TestFieldValidation::test_learning_progress_level_ge_validation PASSED [ 76%]
tests/test_schemas.py::TestFieldValidation::test_learning_progress_level_le_validation PASSED [ 76%]
tests/test_schemas.py::TestFieldValidation::test_search_limit_ge_validation PASSED [ 76%]
tests/test_schemas.py::TestFieldValidation::test_search_limit_le_validation PASSED [ 76%]
tests/test_schemas.py::TestFieldValidation::test_search_offset_ge_validation PASSED [ 76%]
tests/test_schemas.py::TestFieldValidation::test_message_content_min_length_validation PASSED [ 76%]
tests/test_schemas.py::TestFieldValidation::test_query_min_length_validation PASSED [ 76%]
tests/test_schemas.py::TestFieldValidation::test_query_max_length_validation PASSED [ 76%]
tests/test_schemas.py::TestSchemaDefaults::test_user_create_preferences_default_factory PASSED [ 76%]
tests/test_schemas.py::TestSchemaDefaults::test_conversation_create_context_default_factory PASSED [ 76%]
tests/test_schemas.py::TestSchemaDefaults::test_message_create_feedback_default_factory PASSED [ 76%]
tests/test_schemas.py::TestSchemaDefaults::test_document_response_default_factories PASSED [ 76%]
tests/test_schemas.py::TestSchemaDefaults::test_learning_progress_response_default_factories PASSED [ 76%]
tests/test_schemas.py::TestSchemaDefaults::test_vocabulary_create_default_factories PASSED [ 76%]
tests/test_schemas.py::TestSchemaDefaults::test_bulk_operation_default_factory PASSED [ 76%]
tests/test_schemas.py::TestSchemaDefaults::test_bulk_operation_response_default_factories PASSED [ 76%]
tests/test_schemas.py::TestSchemaDefaults::test_search_request_filters_default_factory PASSED [ 76%]
tests/test_schemas.py::TestSchemaDefaults::test_error_response_details_default_factory PASSED [ 76%]
tests/test_security.py::TestJWTTokens::test_create_access_token_with_default_expiry PASSED [ 76%]
tests/test_security.py::TestJWTTokens::test_create_access_token_with_custom_expiry PASSED [ 76%]
tests/test_security.py::TestJWTTokens::test_verify_token_valid PASSED    [ 77%]
tests/test_security.py::TestJWTTokens::test_verify_token_invalid PASSED  [ 77%]
tests/test_security.py::TestJWTTokens::test_verify_token_expired PASSED  [ 77%]
tests/test_security.py::TestPasswordHashing::test_get_password_hash PASSED [ 77%]
tests/test_security.py::TestPasswordHashing::test_verify_password_correct PASSED [ 77%]
tests/test_security.py::TestPasswordHashing::test_verify_password_incorrect PASSED [ 77%]
tests/test_security.py::TestPasswordHashing::test_verify_password_exception_handling PASSED [ 77%]
tests/test_security.py::TestUserAuthentication::test_authenticate_user_success PASSED [ 77%]
tests/test_security.py::TestUserAuthentication::test_authenticate_user_not_found PASSED [ 77%]
tests/test_security.py::TestUserAuthentication::test_authenticate_user_no_password_hash PASSED [ 77%]
tests/test_security.py::TestUserAuthentication::test_authenticate_user_wrong_password PASSED [ 77%]
tests/test_security.py::TestGetCurrentUser::test_get_current_user_no_credentials PASSED [ 77%]
tests/test_security.py::TestGetCurrentUser::test_get_current_user_invalid_token PASSED [ 77%]
tests/test_security.py::TestGetCurrentUser::test_get_current_user_no_user_id_in_payload PASSED [ 77%]
tests/test_security.py::TestGetCurrentUser::test_get_current_user_user_not_found PASSED [ 77%]
tests/test_security.py::TestGetCurrentUser::test_get_current_user_success PASSED [ 77%]
tests/test_security.py::TestRequireAuth::test_require_auth_no_user PASSED [ 77%]
tests/test_security.py::TestRequireAuth::test_require_auth_invalid_token PASSED [ 77%]
tests/test_security.py::TestRequireAuth::test_require_auth_success PASSED [ 77%]
tests/test_simple_user_models.py::TestUserRoleEnum::test_user_role_values PASSED [ 77%]
tests/test_simple_user_models.py::TestUserRoleEnum::test_user_role_count PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserModel::test_create_simple_user_minimal PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserModel::test_create_simple_user_all_fields PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserModel::test_create_admin_user PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserModel::test_user_id_uniqueness PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserModel::test_email_uniqueness PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserToDict::test_to_dict_default_not_sensitive PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserToDict::test_to_dict_include_sensitive_true PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserToDict::test_to_dict_include_sensitive_false_explicit PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserToDict::test_to_dict_role_none PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserToDict::test_to_dict_last_login_none PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserToDict::test_to_dict_last_login_present PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserToDict::test_to_dict_created_at_none PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserToDict::test_to_dict_updated_at_none PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserToDict::test_to_dict_all_timestamps_present PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserToDict::test_to_dict_all_roles PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserEdgeCases::test_nullable_fields PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserEdgeCases::test_default_values PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserEdgeCases::test_inactive_user PASSED [ 77%]
tests/test_simple_user_models.py::TestSimpleUserEdgeCases::test_verified_user PASSED [ 77%]
tests/test_spaced_repetition_manager.py::TestSpacedRepetitionManagerInit::test_init_creates_all_submodules PASSED [ 77%]
tests/test_spaced_repetition_manager.py::TestSpacedRepetitionManagerInit::test_init_with_default_db_path PASSED [ 77%]
tests/test_spaced_repetition_manager.py::TestCalculateNextReview::test_calculate_next_review_delegates_to_algorithm PASSED [ 77%]
tests/test_spaced_repetition_manager.py::TestAddLearningItem::test_add_learning_item_delegates_to_algorithm PASSED [ 78%]
tests/test_spaced_repetition_manager.py::TestReviewItem::test_review_item_success_with_achievement_check PASSED [ 78%]
tests/test_spaced_repetition_manager.py::TestReviewItem::test_review_item_not_found_returns_false PASSED [ 78%]
tests/test_spaced_repetition_manager.py::TestReviewItem::test_review_item_algorithm_failure_skips_achievement_check PASSED [ 78%]
tests/test_spaced_repetition_manager.py::TestGetDueItems::test_get_due_items_delegates_to_algorithm PASSED [ 78%]
tests/test_spaced_repetition_manager.py::TestUpdateAlgorithmConfig::test_update_algorithm_config_success_updates_facade_config PASSED [ 78%]
tests/test_spaced_repetition_manager.py::TestUpdateAlgorithmConfig::test_update_algorithm_config_failure_keeps_old_config PASSED [ 78%]
tests/test_spaced_repetition_manager.py::TestSessionMethods::test_start_learning_session_delegates_to_session_manager PASSED [ 78%]
tests/test_spaced_repetition_manager.py::TestSessionMethods::test_end_learning_session_delegates_to_session_manager PASSED [ 78%]
tests/test_spaced_repetition_manager.py::TestAnalyticsMethods::test_get_user_analytics_delegates_to_analytics_engine PASSED [ 78%]
tests/test_spaced_repetition_manager.py::TestAnalyticsMethods::test_get_system_analytics_delegates_to_analytics_engine PASSED [ 78%]
tests/test_spaced_repetition_manager.py::TestDatabaseConnection::test_get_connection_returns_db_manager_connection PASSED [ 78%]
tests/test_spaced_repetition_manager.py::TestSingletonPattern::test_get_spaced_repetition_manager_returns_singleton PASSED [ 78%]
tests/test_spaced_repetition_manager.py::TestSingletonPattern::test_get_spaced_repetition_manager_new_instance_for_different_db PASSED [ 78%]
tests/test_spaced_repetition_manager.py::TestSingletonPattern::test_get_spaced_repetition_manager_uses_default_path PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestSpacedRepetitionManagerInit::test_init_creates_all_submodules PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestSpacedRepetitionManagerInit::test_init_with_default_db_path PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestCalculateNextReview::test_calculate_next_review_delegates_to_algorithm PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestAddLearningItem::test_add_learning_item_delegates_to_algorithm PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestReviewItem::test_review_item_success_with_achievement_check PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestReviewItem::test_review_item_not_found_returns_false PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestReviewItem::test_review_item_algorithm_failure_skips_achievement_check PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestGetDueItems::test_get_due_items_delegates_to_algorithm PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestUpdateAlgorithmConfig::test_update_algorithm_config_success_updates_facade_config PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestUpdateAlgorithmConfig::test_update_algorithm_config_failure_keeps_old_config PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestSessionMethods::test_start_learning_session_delegates_to_session_manager PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestSessionMethods::test_end_learning_session_delegates_to_session_manager PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestAnalyticsMethods::test_get_user_analytics_delegates_to_analytics_engine PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestAnalyticsMethods::test_get_system_analytics_delegates_to_analytics_engine PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestDatabaseConnection::test_get_connection_returns_db_manager_connection PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestSingletonPattern::test_get_spaced_repetition_manager_returns_singleton PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestSingletonPattern::test_get_spaced_repetition_manager_new_instance_for_different_db PASSED [ 78%]
tests/test_spaced_repetition_manager_refactored.py::TestSingletonPattern::test_get_spaced_repetition_manager_uses_default_path PASSED [ 78%]
tests/test_speech_processor.py::TestSpeechProcessorInitialization::test_init_basic_attributes PASSED [ 78%]
tests/test_speech_processor.py::TestSpeechProcessorInitialization::test_init_watson_deprecated PASSED [ 78%]
tests/test_speech_processor.py::TestSpeechProcessorInitialization::test_init_pronunciation_models_loaded PASSED [ 78%]
tests/test_speech_processor.py::TestSpeechProcessorInitialization::test_init_pronunciation_model_structure PASSED [ 78%]
tests/test_speech_processor.py::TestSpeechProcessorInitialization::test_init_mistral_stt_success PASSED [ 78%]
tests/test_speech_processor.py::TestSpeechProcessorInitialization::test_init_mistral_stt_unavailable PASSED [ 78%]
tests/test_speech_processor.py::TestSpeechProcessorInitialization::test_init_mistral_stt_error PASSED [ 78%]
tests/test_speech_processor.py::TestSpeechProcessorInitialization::test_init_piper_tts_success PASSED [ 78%]
tests/test_speech_processor.py::TestSpeechProcessorInitialization::test_init_piper_tts_no_voices PASSED [ 78%]
tests/test_speech_processor.py::TestSpeechProcessorInitialization::test_init_piper_tts_error PASSED [ 79%]
tests/test_speech_processor.py::TestVoiceActivityDetection::test_detect_voice_no_libs PASSED [ 79%]
tests/test_speech_processor.py::TestVoiceActivityDetection::test_detect_voice_empty_audio PASSED [ 79%]
tests/test_speech_processor.py::TestVoiceActivityDetection::test_detect_voice_insufficient_data PASSED [ 79%]
tests/test_speech_processor.py::TestVoiceActivityDetection::test_detect_voice_invalid_format PASSED [ 79%]
tests/test_speech_processor.py::TestVoiceActivityDetection::test_detect_voice_silence PASSED [ 79%]
tests/test_speech_processor.py::TestVoiceActivityDetection::test_detect_voice_with_activity PASSED [ 79%]
tests/test_speech_processor.py::TestVoiceActivityDetection::test_detect_voice_error_handling PASSED [ 79%]
tests/test_speech_processor.py::TestVoiceActivityDetection::test_remove_silence_no_libs PASSED [ 79%]
tests/test_speech_processor.py::TestVoiceActivityDetection::test_remove_silence_with_voice PASSED [ 79%]
tests/test_speech_processor.py::TestVoiceActivityDetection::test_remove_silence_all_silence PASSED [ 79%]
tests/test_speech_processor.py::TestVoiceActivityDetection::test_remove_silence_error_handling PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_analyze_audio_quality_basic PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_analyze_audio_quality_silence PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_analyze_audio_quality_with_signal PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_analyze_audio_quality_error_handling PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_enhance_audio_no_libs PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_enhance_audio_with_libs PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_enhance_audio_error_handling PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_apply_speech_enhancement_no_libs PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_apply_speech_enhancement_empty_audio PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_apply_speech_enhancement_with_audio PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_apply_speech_enhancement_error PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_reduce_noise_no_libs PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_reduce_noise_empty_audio PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_reduce_noise_with_audio PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_reduce_noise_error PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_normalize_audio_no_libs PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_normalize_audio_empty_audio PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_normalize_audio_with_audio PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_normalize_audio_error PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_pad_audio_no_padding_needed PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_pad_audio_padding_needed PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_ensure_proper_wav_format_already_wav PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_ensure_proper_wav_format_no_libs PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_ensure_proper_wav_format_conversion PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_ensure_proper_wav_format_error PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_preprocess_audio_small_data PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_preprocess_audio_normal PASSED [ 79%]
tests/test_speech_processor.py::TestAudioProcessing::test_preprocess_audio_error PASSED [ 79%]
tests/test_speech_processor.py::TestSpeechToText::test_process_speech_to_text_basic PASSED [ 79%]
tests/test_speech_processor.py::TestSpeechToText::test_process_speech_to_text_low_quality PASSED [ 79%]
tests/test_speech_processor.py::TestSpeechToText::test_process_speech_to_text_with_pronunciation PASSED [ 80%]
tests/test_speech_processor.py::TestSpeechToText::test_process_speech_to_text_low_confidence_no_pronunciation PASSED [ 80%]
tests/test_speech_processor.py::TestSpeechToText::test_process_speech_to_text_error PASSED [ 80%]
tests/test_speech_processor.py::TestSpeechToText::test_select_stt_provider_watson_error PASSED [ 80%]
tests/test_speech_processor.py::TestSpeechToText::test_select_stt_provider_mistral_explicit PASSED [ 80%]
tests/test_speech_processor.py::TestSpeechToText::test_select_stt_provider_mistral_unavailable PASSED [ 80%]
tests/test_speech_processor.py::TestSpeechToText::test_select_stt_provider_auto PASSED [ 80%]
tests/test_speech_processor.py::TestSpeechToText::test_select_stt_provider_unknown PASSED [ 80%]
tests/test_speech_processor.py::TestSpeechToText::test_speech_to_text_mistral_success PASSED [ 80%]
tests/test_speech_processor.py::TestSpeechToText::test_speech_to_text_mistral_unavailable PASSED [ 80%]
tests/test_speech_processor.py::TestSpeechToText::test_speech_to_text_mistral_error PASSED [ 80%]
tests/test_speech_processor.py::TestTextToSpeech::test_process_text_to_speech_basic PASSED [ 80%]
tests/test_speech_processor.py::TestTextToSpeech::test_process_text_to_speech_with_emphasis PASSED [ 80%]
tests/test_speech_processor.py::TestTextToSpeech::test_process_text_to_speech_error PASSED [ 80%]
tests/test_speech_processor.py::TestTextToSpeech::test_select_tts_provider_auto PASSED [ 80%]
tests/test_speech_processor.py::TestTextToSpeech::test_select_tts_provider_piper_explicit PASSED [ 80%]
tests/test_speech_processor.py::TestTextToSpeech::test_select_tts_provider_piper_unavailable PASSED [ 80%]
tests/test_speech_processor.py::TestTextToSpeech::test_select_tts_provider_watson_error PASSED [ 80%]
tests/test_speech_processor.py::TestTextToSpeech::test_select_tts_provider_unknown PASSED [ 80%]
tests/test_speech_processor.py::TestTextToSpeech::test_text_to_speech_piper_success PASSED [ 80%]
tests/test_speech_processor.py::TestTextToSpeech::test_text_to_speech_piper_unavailable PASSED [ 80%]
tests/test_speech_processor.py::TestTextToSpeech::test_text_to_speech_piper_error PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_prepare_text_basic PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_prepare_text_with_emphasis PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_prepare_text_with_rate PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_apply_speaking_rate_default PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_apply_speaking_rate_slower PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_apply_speaking_rate_faster PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_apply_word_emphasis_none PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_apply_word_emphasis_with_words PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_apply_word_emphasis_case_insensitive PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_apply_language_specific_enhancements_english PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_apply_language_specific_enhancements_chinese PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_apply_language_specific_enhancements_french PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_apply_language_specific_enhancements_spanish PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_apply_language_specific_enhancements_unknown PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_enhance_chinese_text_with_chars PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_enhance_chinese_text_no_chars PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_enhance_french_text PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_enhance_spanish_text PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_enhance_english_text PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_add_comprehension_pauses_periods PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_add_comprehension_pauses_commas PASSED [ 80%]
tests/test_speech_processor.py::TestTextPreparation::test_add_comprehension_pauses_no_punctuation PASSED [ 81%]
tests/test_speech_processor.py::TestTextPreparation::test_wrap_in_ssml_if_needed_with_markup PASSED [ 81%]
tests/test_speech_processor.py::TestTextPreparation::test_wrap_in_ssml_if_needed_no_markup PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_analyze_pronunciation_basic PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_analyze_pronunciation_score_calculation PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_analyze_pronunciation_levels PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_analyze_pronunciation_error PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_analyze_pronunciation_quality_success PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_analyze_pronunciation_quality_error PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_compare_pronunciation_basic PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_compare_pronunciation_mismatch PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_calculate_pronunciation_scores PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_determine_pronunciation_level_excellent PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_determine_pronunciation_level_good PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_determine_pronunciation_level_fair PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_determine_pronunciation_level_needs_improvement PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_determine_pronunciation_level_unclear PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_generate_word_scores PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_generate_improvement_suggestions PASSED [ 81%]
tests/test_speech_processor.py::TestPronunciationAnalysis::test_detect_language_issues PASSED [ 81%]
tests/test_speech_processor.py::TestPipelineStatus::test_get_speech_pipeline_status PASSED [ 81%]
tests/test_speech_processor.py::TestPipelineStatus::test_get_speech_pipeline_status_formats PASSED [ 81%]
tests/test_speech_processor.py::TestPipelineStatus::test_get_speech_pipeline_status_languages PASSED [ 81%]
tests/test_speech_processor.py::TestHelperMethods::test_get_settings_safely_success PASSED [ 81%]
tests/test_speech_processor.py::TestHelperMethods::test_get_settings_safely_error PASSED [ 81%]
tests/test_speech_processor.py::TestHelperMethods::test_get_overall_status_operational PASSED [ 81%]
tests/test_speech_processor.py::TestHelperMethods::test_get_overall_status_limited PASSED [ 81%]
tests/test_speech_processor.py::TestHelperMethods::test_build_watson_stt_status PASSED [ 81%]
tests/test_speech_processor.py::TestHelperMethods::test_build_watson_tts_status PASSED [ 81%]
tests/test_speech_processor.py::TestHelperMethods::test_build_features_status PASSED [ 81%]
tests/test_speech_processor.py::TestHelperMethods::test_build_configuration_dict PASSED [ 81%]
tests/test_speech_processor.py::TestHelperMethods::test_build_api_models_dict PASSED [ 81%]
tests/test_speech_processor.py::TestHelperMethods::test_build_chinese_support_dict PASSED [ 81%]
tests/test_speech_processor.py::TestHelperMethods::test_build_spanish_support_dict PASSED [ 81%]
tests/test_speech_processor.py::TestHelperMethods::test_validate_provider_not_watson_valid PASSED [ 81%]
tests/test_speech_processor.py::TestHelperMethods::test_validate_provider_not_watson_invalid PASSED [ 81%]
tests/test_speech_processor.py::TestHelperMethods::test_is_result_acceptable_good PASSED [ 81%]
tests/test_speech_processor.py::TestHelperMethods::test_is_result_acceptable_low_confidence PASSED [ 81%]
tests/test_speech_processor.py::TestHelperMethods::test_is_result_acceptable_empty_transcript PASSED [ 81%]
tests/test_speech_processor.py::TestGlobalInstanceAndConvenience::test_global_instance_exists PASSED [ 81%]
tests/test_speech_processor.py::TestGlobalInstanceAndConvenience::test_global_instance_attributes PASSED [ 81%]
tests/test_speech_processor.py::TestGlobalInstanceAndConvenience::test_speech_to_text_convenience PASSED [ 81%]
tests/test_speech_processor.py::TestGlobalInstanceAndConvenience::test_text_to_speech_convenience PASSED [ 82%]
tests/test_speech_processor.py::TestGlobalInstanceAndConvenience::test_analyze_pronunciation_convenience PASSED [ 82%]
tests/test_speech_processor.py::TestGlobalInstanceAndConvenience::test_get_speech_status_convenience PASSED [ 82%]
tests/test_speech_processor.py::TestAdditionalCoverage::test_try_mistral_stt_success PASSED [ 82%]
tests/test_speech_processor.py::TestAdditionalCoverage::test_try_mistral_stt_low_quality PASSED [ 82%]
tests/test_speech_processor.py::TestAdditionalCoverage::test_process_auto_provider_tts_unavailable PASSED [ 82%]
tests/test_speech_processor.py::TestAdditionalCoverage::test_process_piper_fallback_both_unavailable PASSED [ 82%]
tests/test_speech_processor.py::TestImportErrorHandlers::test_import_numpy_unavailable PASSED [ 82%]
tests/test_speech_processor.py::TestImportErrorHandlers::test_mistral_stt_import_unavailable PASSED [ 82%]
tests/test_speech_processor.py::TestImportErrorHandlers::test_piper_tts_import_unavailable PASSED [ 82%]
tests/test_speech_processor.py::TestExceptionHandlers::test_vad_exception_handler PASSED [ 82%]
tests/test_speech_processor.py::TestExceptionHandlers::test_mistral_init_exception PASSED [ 82%]
tests/test_speech_processor.py::TestExceptionHandlers::test_piper_init_exception PASSED [ 82%]
tests/test_speech_processor.py::TestExceptionHandlers::test_tts_watson_provider_error PASSED [ 82%]
tests/test_speech_processor.py::TestExceptionHandlers::test_process_auto_provider_piper_failure PASSED [ 82%]
tests/test_speech_processor.py::TestExceptionHandlers::test_process_piper_fallback_exception PASSED [ 82%]
tests/test_speech_processor.py::TestExceptionHandlers::test_enhance_audio_exception PASSED [ 82%]
tests/test_speech_processor.py::TestExceptionHandlers::test_speech_enhancement_exception PASSED [ 82%]
tests/test_speech_processor.py::TestExceptionHandlers::test_analyze_audio_quality_exception PASSED [ 82%]
tests/test_speech_processor.py::TestAdditionalExceptionPaths::test_vad_with_empty_array_exception PASSED [ 82%]
tests/test_speech_processor.py::TestAdditionalExceptionPaths::test_mistral_init_import_exception PASSED [ 82%]
tests/test_speech_processor.py::TestAdditionalExceptionPaths::test_piper_init_import_exception PASSED [ 82%]
tests/test_speech_processor.py::TestAdditionalExceptionPaths::test_process_piper_fallback_success_path PASSED [ 82%]
tests/test_speech_processor.py::TestAdditionalExceptionPaths::test_enhance_audio_with_exception_in_reduction PASSED [ 82%]
tests/test_speech_processor.py::TestAdditionalExceptionPaths::test_speech_enhancement_with_exception PASSED [ 82%]
tests/test_speech_processor.py::TestEnumsAndDataClasses::test_audio_format_enum PASSED [ 82%]
tests/test_speech_processor.py::TestEnumsAndDataClasses::test_pronunciation_level_enum PASSED [ 82%]
tests/test_speech_processor.py::TestEnumsAndDataClasses::test_audio_metadata_creation PASSED [ 82%]
tests/test_speech_processor.py::TestEnumsAndDataClasses::test_speech_recognition_result_creation PASSED [ 82%]
tests/test_speech_processor.py::TestEnumsAndDataClasses::test_pronunciation_analysis_creation PASSED [ 82%]
tests/test_speech_processor.py::TestEnumsAndDataClasses::test_speech_synthesis_result_creation PASSED [ 82%]
tests/test_speech_processor.py::TestFinalCoverageGaps::test_vad_empty_array PASSED [ 82%]
tests/test_speech_processor.py::TestFinalCoverageGaps::test_mistral_init_unavailable PASSED [ 82%]
tests/test_speech_processor.py::TestFinalCoverageGaps::test_piper_init_unavailable PASSED [ 82%]
tests/test_speech_processor.py::TestFinalCoverageGaps::test_piper_fallback_provider PASSED [ 82%]
tests/test_speech_processor.py::TestFinalCoverageGaps::test_auto_low_quality_acceptance PASSED [ 82%]
tests/test_speech_processor.py::TestFinalCoverageGaps::test_mistral_unavailable_exception PASSED [ 82%]
tests/test_speech_processor.py::TestBranchCoverageGaps::test_analyze_audio_quality_without_numpy PASSED [ 82%]
tests/test_speech_processor.py::TestBranchCoverageGaps::test_analyze_audio_quality_zero_signal_power PASSED [ 82%]
tests/test_speech_processor.py::TestBranchCoverageGaps::test_speech_enhancement_silent_audio PASSED [ 82%]
tests/test_speech_processor.py::TestBranchCoverageGaps::test_reduce_noise_silent_audio PASSED [ 82%]
tests/test_speech_processor.py::TestBranchCoverageGaps::test_normalize_audio_silent_non_empty PASSED [ 82%]
tests/test_speech_processor.py::TestBranchCoverageGaps::test_speech_enhancement_single_sample PASSED [ 82%]
tests/test_speech_processor.py::TestBranchCoverageGaps::test_speech_enhancement_empty_audio PASSED [ 83%]
tests/test_speech_processor.py::TestBranchCoverageGaps::test_normalize_audio_empty PASSED [ 83%]
tests/test_speech_processor.py::TestBranchCoverageGaps::test_preprocess_audio_without_libraries PASSED [ 83%]
tests/test_speech_processor.py::TestBranchCoverageGaps::test_preprocess_audio_non_wav_formats PASSED [ 83%]
tests/test_speech_processor.py::TestBranchCoverageGaps::test_apply_word_emphasis_no_matches PASSED [ 83%]
tests/test_speech_processor.py::TestBranchCoverageGaps::test_enhance_chinese_text_existing_prosody PASSED [ 83%]
tests/test_speech_processor.py::TestRemainingBranchGaps::test_analyze_audio_quality_edge_case_noise_floor PASSED [ 83%]
tests/test_speech_processor.py::TestRemainingBranchGaps::test_speech_enhancement_with_modified_array PASSED [ 83%]
tests/test_speech_processor.py::TestRemainingBranchGaps::test_normalize_audio_with_edge_case_array PASSED [ 83%]
tests/test_speech_processor.py::TestUnreachableBranches::test_speech_enhancement_force_empty_after_copy PASSED [ 83%]
tests/test_speech_processor.py::TestUnreachableBranches::test_normalize_audio_force_empty_after_copy PASSED [ 83%]
tests/test_speech_processor_import_errors.py::TestModuleLevelImportErrors::test_numpy_import_error_handler PASSED [ 83%]
tests/test_speech_processor_import_errors.py::TestModuleLevelImportErrors::test_mistral_stt_import_error_handler PASSED [ 83%]
tests/test_speech_processor_import_errors.py::TestModuleLevelImportErrors::test_piper_tts_import_error_handler PASSED [ 83%]
tests/test_speech_processor_import_errors.py::TestImportErrorsWithSourceModification::test_force_mistral_import_error PASSED [ 83%]
tests/test_speech_processor_import_errors.py::TestImportErrorsWithSourceModification::test_force_piper_import_error PASSED [ 83%]
tests/test_speech_processor_integration.py::TestSpeechToTextIntegration::test_stt_with_speech_like_audio_real_preprocessing PASSED [ 83%]
tests/test_speech_processor_integration.py::TestSpeechToTextIntegration::test_stt_with_silence_audio_real_vad PASSED [ 83%]
tests/test_speech_processor_integration.py::TestSpeechToTextIntegration::test_stt_with_white_noise_real_audio PASSED [ 83%]
tests/test_speech_processor_integration.py::TestSpeechToTextIntegration::test_stt_with_stereo_audio_real_conversion PASSED [ 83%]
tests/test_speech_processor_integration.py::TestSpeechToTextIntegration::test_stt_multi_language_real_audio PASSED [ 83%]
tests/test_speech_processor_integration.py::TestSpeechToTextIntegration::test_stt_with_pronunciation_analysis_real_audio PASSED [ 83%]
tests/test_speech_processor_integration.py::TestSpeechToTextIntegration::test_stt_api_error_handling_real_audio PASSED [ 83%]
tests/test_speech_processor_integration.py::TestSpeechToTextIntegration::test_stt_short_audio_real_beep PASSED [ 83%]
tests/test_speech_processor_integration.py::TestSpeechToTextIntegration::test_stt_audio_quality_analysis_real_signals PASSED [ 83%]
tests/test_speech_processor_integration.py::TestTextToSpeechIntegration::test_tts_with_basic_text_real_preprocessing PASSED [ 83%]
tests/test_speech_processor_integration.py::TestTextToSpeechIntegration::test_tts_with_emphasis_words_real_processing PASSED [ 83%]
tests/test_speech_processor_integration.py::TestTextToSpeechIntegration::test_tts_with_speaking_rate_real_processing PASSED [ 83%]
tests/test_speech_processor_integration.py::TestTextToSpeechIntegration::test_tts_multi_language_real_processing PASSED [ 83%]
tests/test_speech_processor_integration.py::TestTextToSpeechIntegration::test_tts_with_long_text_real_processing PASSED [ 83%]
tests/test_speech_processor_integration.py::TestTextToSpeechIntegration::test_tts_error_handling PASSED [ 83%]
tests/test_speech_processor_integration.py::TestEndToEndAudioProcessing::test_audio_enhancement_pipeline_real_audio PASSED [ 83%]
tests/test_speech_processor_integration.py::TestEndToEndAudioProcessing::test_audio_format_conversion_real_audio PASSED [ 83%]
tests/test_speech_processor_integration.py::TestEndToEndAudioProcessing::test_preprocessing_pipeline_real_audio PASSED [ 83%]
tests/test_speech_processor_integration.py::TestEndToEndAudioProcessing::test_vad_with_different_audio_types PASSED [ 83%]
tests/test_speech_processor_integration.py::TestEndToEndAudioProcessing::test_silence_removal_real_audio PASSED [ 83%]
tests/test_speech_processor_integration.py::TestEndToEndAudioProcessing::test_noise_reduction_real_audio PASSED [ 83%]
tests/test_speech_processor_integration.py::TestEndToEndAudioProcessing::test_audio_normalization_real_audio PASSED [ 83%]
tests/test_speech_processor_integration.py::TestEndToEndAudioProcessing::test_complete_pipeline_status PASSED [ 83%]
tests/test_sr_algorithm.py::TestSM2AlgorithmInitialization::test_initialization_with_db_manager PASSED [ 83%]
tests/test_sr_algorithm.py::TestSM2AlgorithmInitialization::test_initialization_loads_config PASSED [ 83%]
tests/test_sr_algorithm.py::TestLoadAlgorithmConfig::test_load_config_with_no_database_config PASSED [ 83%]
tests/test_sr_algorithm.py::TestLoadAlgorithmConfig::test_load_config_with_database_config PASSED [ 84%]
tests/test_sr_algorithm.py::TestLoadAlgorithmConfig::test_load_config_handles_database_error PASSED [ 84%]
tests/test_sr_algorithm.py::TestCalculateNextReview::test_calculate_next_review_again_result PASSED [ 84%]
tests/test_sr_algorithm.py::TestCalculateNextReview::test_calculate_next_review_hard_result PASSED [ 84%]
tests/test_sr_algorithm.py::TestCalculateNextReview::test_calculate_next_review_good_result_first_repetition PASSED [ 84%]
tests/test_sr_algorithm.py::TestCalculateNextReview::test_calculate_next_review_good_result_second_repetition PASSED [ 84%]
tests/test_sr_algorithm.py::TestCalculateNextReview::test_calculate_next_review_good_result_later_repetitions PASSED [ 84%]
tests/test_sr_algorithm.py::TestCalculateNextReview::test_calculate_next_review_easy_result_first_repetition PASSED [ 84%]
tests/test_sr_algorithm.py::TestCalculateNextReview::test_calculate_next_review_easy_result_later_repetitions PASSED [ 84%]
tests/test_sr_algorithm.py::TestCalculateNextReview::test_calculate_next_review_respects_maximum_interval PASSED [ 84%]
tests/test_sr_algorithm.py::TestCalculateNextReview::test_calculate_next_review_respects_minimum_ease_factor PASSED [ 84%]
tests/test_sr_algorithm.py::TestCalculateNextReview::test_calculate_next_review_respects_maximum_ease_factor PASSED [ 84%]
tests/test_sr_algorithm.py::TestCalculateNextReview::test_calculate_next_review_date_accuracy PASSED [ 84%]
tests/test_sr_algorithm.py::TestCalculateNextReview::test_calculate_next_review_with_response_time PASSED [ 84%]
tests/test_sr_algorithm.py::TestCalculateNextReview::test_calculate_next_review_with_invalid_review_result PASSED [ 84%]
tests/test_sr_algorithm.py::TestAddLearningItem::test_add_learning_item_basic PASSED [ 84%]
tests/test_sr_algorithm.py::TestAddLearningItem::test_add_learning_item_with_all_fields PASSED [ 84%]
tests/test_sr_algorithm.py::TestAddLearningItem::test_add_learning_item_duplicate_returns_existing_id PASSED [ 84%]
tests/test_sr_algorithm.py::TestAddLearningItem::test_add_learning_item_different_users_allowed PASSED [ 84%]
tests/test_sr_algorithm.py::TestAddLearningItem::test_add_learning_item_sets_initial_values PASSED [ 84%]
tests/test_sr_algorithm.py::TestAddLearningItem::test_add_learning_item_handles_empty_optional_fields PASSED [ 84%]
tests/test_sr_algorithm.py::TestAddLearningItem::test_add_learning_item_database_error_raises PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_success PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_not_found_returns_false PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_updates_total_reviews PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_good_updates_correct_reviews PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_easy_updates_correct_reviews PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_hard_updates_correct_reviews PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_again_updates_incorrect_reviews PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_correct_increments_streak PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_again_resets_streak PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_updates_mastery_level PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_updates_response_time_first_time PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_updates_response_time_running_average PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_updates_confidence_score PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_updates_timestamps PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_updates_sm2_parameters PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_calculates_retention_rate_after_5_reviews PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_does_not_calculate_retention_below_5_reviews PASSED [ 84%]
tests/test_sr_algorithm.py::TestReviewItem::test_review_item_handles_database_error PASSED [ 84%]
tests/test_sr_algorithm.py::TestGetDueItems::test_get_due_items_empty_database PASSED [ 84%]
tests/test_sr_algorithm.py::TestGetDueItems::test_get_due_items_returns_new_items PASSED [ 84%]
tests/test_sr_algorithm.py::TestGetDueItems::test_get_due_items_returns_overdue_items PASSED [ 85%]
tests/test_sr_algorithm.py::TestGetDueItems::test_get_due_items_excludes_future_items PASSED [ 85%]
tests/test_sr_algorithm.py::TestGetDueItems::test_get_due_items_filters_by_user PASSED [ 85%]
tests/test_sr_algorithm.py::TestGetDueItems::test_get_due_items_filters_by_language PASSED [ 85%]
tests/test_sr_algorithm.py::TestGetDueItems::test_get_due_items_excludes_inactive_items PASSED [ 85%]
tests/test_sr_algorithm.py::TestGetDueItems::test_get_due_items_respects_limit PASSED [ 85%]
tests/test_sr_algorithm.py::TestGetDueItems::test_get_due_items_default_limit_20 PASSED [ 85%]
tests/test_sr_algorithm.py::TestGetDueItems::test_get_due_items_prioritizes_new_items_first PASSED [ 85%]
tests/test_sr_algorithm.py::TestGetDueItems::test_get_due_items_sorts_overdue_by_date PASSED [ 85%]
tests/test_sr_algorithm.py::TestGetDueItems::test_get_due_items_sorts_by_mastery_level PASSED [ 85%]
tests/test_sr_algorithm.py::TestGetDueItems::test_get_due_items_deserializes_json_fields PASSED [ 85%]
tests/test_sr_algorithm.py::TestGetDueItems::test_get_due_items_handles_empty_json_fields PASSED [ 85%]
tests/test_sr_algorithm.py::TestGetDueItems::test_get_due_items_handles_database_error PASSED [ 85%]
tests/test_sr_algorithm.py::TestUpdateAlgorithmConfig::test_update_algorithm_config_success PASSED [ 85%]
tests/test_sr_algorithm.py::TestUpdateAlgorithmConfig::test_update_algorithm_config_single_value PASSED [ 85%]
tests/test_sr_algorithm.py::TestUpdateAlgorithmConfig::test_update_algorithm_config_multiple_values PASSED [ 85%]
tests/test_sr_algorithm.py::TestUpdateAlgorithmConfig::test_update_algorithm_config_reloads_config PASSED [ 85%]
tests/test_sr_algorithm.py::TestUpdateAlgorithmConfig::test_update_algorithm_config_verifies_updates PASSED [ 85%]
tests/test_sr_algorithm.py::TestUpdateAlgorithmConfig::test_update_algorithm_config_handles_verification_failure PASSED [ 85%]
tests/test_sr_algorithm.py::TestUpdateAlgorithmConfig::test_update_algorithm_config_handles_database_error PASSED [ 85%]
tests/test_sr_algorithm.py::TestUpdateAlgorithmConfig::test_update_algorithm_config_no_config_in_db PASSED [ 85%]
tests/test_sr_algorithm.py::TestIntegrationScenarios::test_complete_learning_workflow PASSED [ 85%]
tests/test_sr_algorithm.py::TestIntegrationScenarios::test_learning_with_failure_recovery PASSED [ 85%]
tests/test_sr_algorithm.py::TestIntegrationScenarios::test_multiple_users_independent_progress PASSED [ 85%]
tests/test_sr_analytics.py::test_analytics_engine_initialization PASSED  [ 85%]
tests/test_sr_analytics.py::test_analytics_engine_default_mastery_threshold PASSED [ 85%]
tests/test_sr_analytics.py::test_set_mastery_threshold PASSED            [ 85%]
tests/test_sr_analytics.py::test_set_mastery_threshold_updates_correctly PASSED [ 85%]
tests/test_sr_analytics.py::test_get_user_analytics_basic_stats_success PASSED [ 85%]
tests/test_sr_analytics.py::test_get_user_analytics_basic_stats_multiple_sessions PASSED [ 85%]
tests/test_sr_analytics.py::test_get_user_analytics_no_sessions PASSED   [ 85%]
tests/test_sr_analytics.py::test_get_user_analytics_partial_data PASSED  [ 85%]
tests/test_sr_analytics.py::test_get_user_analytics_zero_values PASSED   [ 85%]
tests/test_sr_analytics.py::test_get_user_analytics_database_error PASSED [ 85%]
tests/test_sr_analytics.py::test_get_user_analytics_sr_stats_success PASSED [ 85%]
tests/test_sr_analytics.py::test_get_user_analytics_sr_stats_uses_mastery_threshold PASSED [ 85%]
tests/test_sr_analytics.py::test_get_user_analytics_sr_stats_custom_threshold PASSED [ 85%]
tests/test_sr_analytics.py::test_get_user_analytics_sr_stats_due_items PASSED [ 85%]
tests/test_sr_analytics.py::test_get_user_analytics_sr_stats_no_items PASSED [ 85%]
tests/test_sr_analytics.py::test_get_user_analytics_sr_stats_all_mastered PASSED [ 85%]
tests/test_sr_analytics.py::test_get_user_analytics_sr_stats_none_mastered PASSED [ 85%]
tests/test_sr_analytics.py::test_get_user_analytics_streaks_active PASSED [ 85%]
tests/test_sr_analytics.py::test_get_user_analytics_streaks_no_streak PASSED [ 85%]
tests/test_sr_analytics.py::test_get_user_analytics_streaks_zero_values PASSED [ 86%]
tests/test_sr_analytics.py::test_get_user_analytics_streaks_longest_gt_current PASSED [ 86%]
tests/test_sr_analytics.py::test_get_user_analytics_streaks_default_dict PASSED [ 86%]
tests/test_sr_analytics.py::test_get_user_analytics_achievements_multiple PASSED [ 86%]
tests/test_sr_analytics.py::test_get_user_analytics_achievements_limit_five PASSED [ 86%]
tests/test_sr_analytics.py::test_get_user_analytics_achievements_ordered_desc PASSED [ 86%]
tests/test_sr_analytics.py::test_get_user_analytics_achievements_empty PASSED [ 86%]
tests/test_sr_analytics.py::test_get_user_analytics_goals_active_only PASSED [ 86%]
tests/test_sr_analytics.py::test_get_user_analytics_goals_multiple PASSED [ 86%]
tests/test_sr_analytics.py::test_get_user_analytics_goals_progress_values PASSED [ 86%]
tests/test_sr_analytics.py::test_get_user_analytics_goals_empty PASSED   [ 86%]
tests/test_sr_analytics.py::test_get_user_analytics_complete_data PASSED [ 86%]
tests/test_sr_analytics.py::test_get_user_analytics_different_languages PASSED [ 86%]
tests/test_sr_analytics.py::test_get_user_analytics_different_users PASSED [ 86%]
tests/test_sr_analytics.py::test_get_user_analytics_period_parameter PASSED [ 86%]
tests/test_sr_analytics.py::test_recommendations_due_items_present PASSED [ 86%]
tests/test_sr_analytics.py::test_recommendations_due_items_count PASSED  [ 86%]
tests/test_sr_analytics.py::test_recommendations_due_items_none PASSED   [ 86%]
tests/test_sr_analytics.py::test_recommendations_due_items_multiple PASSED [ 86%]
tests/test_sr_analytics.py::test_recommendations_streak_maintain_one_day_ago PASSED [ 86%]
tests/test_sr_analytics.py::test_recommendations_streak_new_streak_two_days_ago PASSED [ 86%]
tests/test_sr_analytics.py::test_recommendations_streak_new_streak_multiple_days PASSED [ 86%]
tests/test_sr_analytics.py::test_recommendations_streak_no_record PASSED [ 86%]
tests/test_sr_analytics.py::test_recommendations_streak_today_already PASSED [ 86%]
tests/test_sr_analytics.py::test_recommendations_streak_null_last_activity PASSED [ 86%]
tests/test_sr_analytics.py::test_recommendations_low_mastery_below_50 PASSED [ 86%]
tests/test_sr_analytics.py::test_recommendations_high_mastery_above_80 PASSED [ 86%]
tests/test_sr_analytics.py::test_recommendations_medium_mastery_50_to_80 PASSED [ 86%]
tests/test_sr_analytics.py::test_recommendations_no_items PASSED         [ 86%]
tests/test_sr_analytics.py::test_recommendations_null_mastery PASSED     [ 86%]
tests/test_sr_analytics.py::test_get_learning_recommendations_multiple PASSED [ 86%]
tests/test_sr_analytics.py::test_get_learning_recommendations_empty PASSED [ 86%]
tests/test_sr_analytics.py::test_get_learning_recommendations_database_error PASSED [ 86%]
tests/test_sr_analytics.py::test_get_learning_recommendations_called_by_user_analytics PASSED [ 86%]
tests/test_sr_analytics.py::test_get_system_analytics_success PASSED     [ 86%]
tests/test_sr_analytics.py::test_get_system_analytics_30_day_filter PASSED [ 86%]
tests/test_sr_analytics.py::test_get_system_analytics_multiple_users PASSED [ 86%]
tests/test_sr_analytics.py::test_get_system_analytics_no_data PASSED     [ 86%]
tests/test_sr_analytics.py::test_get_system_analytics_distinct_users PASSED [ 86%]
tests/test_sr_analytics.py::test_get_system_analytics_generated_at PASSED [ 86%]
tests/test_sr_analytics.py::test_get_system_analytics_items_active_only PASSED [ 86%]
tests/test_sr_analytics.py::test_get_system_analytics_items_mastery PASSED [ 86%]
tests/test_sr_analytics.py::test_get_system_analytics_items_mastered_count PASSED [ 87%]
tests/test_sr_analytics.py::test_get_system_analytics_items_no_items PASSED [ 87%]
tests/test_sr_analytics.py::test_get_system_analytics_language_distribution PASSED [ 87%]
tests/test_sr_analytics.py::test_get_system_analytics_language_distribution_ordered PASSED [ 87%]
tests/test_sr_analytics.py::test_get_system_analytics_language_distribution_30_days PASSED [ 87%]
tests/test_sr_analytics.py::test_get_system_analytics_language_distribution_empty PASSED [ 87%]
tests/test_sr_analytics.py::test_get_system_analytics_database_error PASSED [ 87%]
tests/test_sr_analytics.py::test_get_system_analytics_connection_error PASSED [ 87%]
tests/test_sr_database.py::test_database_manager_init_default_path PASSED [ 87%]
tests/test_sr_database.py::test_database_manager_init_custom_path PASSED [ 87%]
tests/test_sr_database.py::test_get_connection_success PASSED            [ 87%]
tests/test_sr_database.py::test_get_connection_row_factory PASSED        [ 87%]
tests/test_sr_database.py::test_get_connection_multiple_calls PASSED     [ 87%]
tests/test_sr_database.py::test_row_to_dict_valid_row PASSED             [ 87%]
tests/test_sr_database.py::test_row_to_dict_none_row PASSED              [ 87%]
tests/test_sr_database.py::test_row_to_dict_empty_row PASSED             [ 87%]
tests/test_sr_database.py::test_serialize_json_dict PASSED               [ 87%]
tests/test_sr_database.py::test_serialize_json_list PASSED               [ 87%]
tests/test_sr_database.py::test_serialize_json_none PASSED               [ 87%]
tests/test_sr_database.py::test_serialize_json_string_passthrough PASSED [ 87%]
tests/test_sr_database.py::test_serialize_json_complex_types PASSED      [ 87%]
tests/test_sr_database.py::test_deserialize_json_valid_dict PASSED       [ 87%]
tests/test_sr_database.py::test_deserialize_json_valid_list PASSED       [ 87%]
tests/test_sr_database.py::test_deserialize_json_empty_string PASSED     [ 87%]
tests/test_sr_database.py::test_deserialize_json_empty_object PASSED     [ 87%]
tests/test_sr_database.py::test_deserialize_json_invalid PASSED          [ 87%]
tests/test_sr_database.py::test_deserialize_json_none_type PASSED        [ 87%]
tests/test_sr_database.py::test_serialize_datetime_valid PASSED          [ 87%]
tests/test_sr_database.py::test_serialize_datetime_none PASSED           [ 87%]
tests/test_sr_database.py::test_serialize_datetime_string_passthrough PASSED [ 87%]
tests/test_sr_database.py::test_serialize_datetime_with_microseconds PASSED [ 87%]
tests/test_sr_database.py::test_deserialize_datetime_valid_iso PASSED    [ 87%]
tests/test_sr_database.py::test_deserialize_datetime_with_microseconds PASSED [ 87%]
tests/test_sr_database.py::test_deserialize_datetime_none PASSED         [ 87%]
tests/test_sr_database.py::test_deserialize_datetime_empty_string PASSED [ 87%]
tests/test_sr_database.py::test_deserialize_datetime_invalid_format PASSED [ 87%]
tests/test_sr_database.py::test_deserialize_datetime_none_type PASSED    [ 87%]
tests/test_sr_database.py::test_safe_mean_normal_values PASSED           [ 87%]
tests/test_sr_database.py::test_safe_mean_empty_list PASSED              [ 87%]
tests/test_sr_database.py::test_safe_mean_single_value PASSED            [ 87%]
tests/test_sr_database.py::test_safe_mean_mixed_values PASSED            [ 87%]
tests/test_sr_database.py::test_safe_percentage_normal_calculation PASSED [ 87%]
tests/test_sr_database.py::test_safe_percentage_zero_denominator PASSED  [ 87%]
tests/test_sr_database.py::test_safe_percentage_100_percent PASSED       [ 88%]
tests/test_sr_database.py::test_safe_percentage_fractional PASSED        [ 88%]
tests/test_sr_database.py::test_execute_query_fetch_one_success PASSED   [ 88%]
tests/test_sr_database.py::test_execute_query_fetch_all_success PASSED   [ 88%]
tests/test_sr_database.py::test_execute_query_fetch_one_no_results PASSED [ 88%]
tests/test_sr_database.py::test_execute_query_fetch_all_empty_results PASSED [ 88%]
tests/test_sr_database.py::test_execute_query_with_no_params PASSED      [ 88%]
tests/test_sr_database.py::test_execute_query_error_handling PASSED      [ 88%]
tests/test_sr_database.py::test_execute_query_error_handling_fetch_one PASSED [ 88%]
tests/test_sr_database.py::test_execute_insert_success PASSED            [ 88%]
tests/test_sr_database.py::test_execute_insert_multiple_inserts PASSED   [ 88%]
tests/test_sr_database.py::test_execute_insert_error_handling PASSED     [ 88%]
tests/test_sr_database.py::test_execute_insert_constraint_violation PASSED [ 88%]
tests/test_sr_database.py::test_execute_update_success PASSED            [ 88%]
tests/test_sr_database.py::test_execute_update_delete_success PASSED     [ 88%]
tests/test_sr_database.py::test_execute_update_no_rows_affected PASSED   [ 88%]
tests/test_sr_database.py::test_execute_update_error_handling PASSED     [ 88%]
tests/test_sr_database.py::test_execute_update_multiple_rows PASSED      [ 88%]
tests/test_sr_database.py::test_get_db_manager_returns_instance PASSED   [ 88%]
tests/test_sr_database.py::test_get_db_manager_singleton_same_instance PASSED [ 88%]
tests/test_sr_database.py::test_get_db_manager_different_path_creates_new_instance PASSED [ 88%]
tests/test_sr_database.py::test_get_db_manager_default_path PASSED       [ 88%]
tests/test_sr_gamification.py::test_init_with_default_config PASSED      [ 88%]
tests/test_sr_gamification.py::test_init_with_custom_config PASSED       [ 88%]
tests/test_sr_gamification.py::test_get_default_config PASSED            [ 88%]
tests/test_sr_gamification.py::test_config_parameter_access PASSED       [ 88%]
tests/test_sr_gamification.py::test_multiple_instances_different_configs PASSED [ 88%]
tests/test_sr_gamification.py::test_get_connection_success PASSED        [ 88%]
tests/test_sr_gamification.py::test_connection_context_manager_lifecycle PASSED [ 88%]
tests/test_sr_gamification.py::test_connection_properly_closed PASSED    [ 88%]
tests/test_sr_gamification.py::test_connection_error_handling PASSED     [ 88%]
tests/test_sr_gamification.py::test_check_achievements_no_streak_below_5 PASSED [ 88%]
tests/test_sr_gamification.py::test_check_achievements_vocab_streak_5 PASSED [ 88%]
tests/test_sr_gamification.py::test_check_achievements_no_duplicate_at_6_to_9 PASSED [ 88%]
tests/test_sr_gamification.py::test_check_achievements_vocab_streak_10 PASSED [ 88%]
tests/test_sr_gamification.py::test_check_achievements_only_vocabulary_triggers_vocab PASSED [ 88%]
tests/test_sr_gamification.py::test_check_achievements_non_vocabulary_no_vocab_achievement PASSED [ 88%]
tests/test_sr_gamification.py::test_check_achievements_all_review_results_processed PASSED [ 88%]
tests/test_sr_gamification.py::test_check_achievements_multiple_in_single_review PASSED [ 88%]
tests/test_sr_gamification.py::test_check_achievements_no_mastery_below_threshold PASSED [ 88%]
tests/test_sr_gamification.py::test_check_achievements_mastery_at_threshold PASSED [ 88%]
tests/test_sr_gamification.py::test_check_achievements_mastery_above_threshold PASSED [ 88%]
tests/test_sr_gamification.py::test_check_achievements_mastery_all_item_types PASSED [ 89%]
tests/test_sr_gamification.py::test_check_achievements_custom_mastery_threshold PASSED [ 89%]
tests/test_sr_gamification.py::test_check_achievements_streak_plus_mastery PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_all_defaults PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_all_custom_parameters PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_all_types PASSED   [ 89%]
tests/test_sr_gamification.py::test_award_achievement_uuid_generation PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_json_serialization PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_multiple_same_user PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_different_users PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_different_languages PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_duplicate_within_24h_blocked PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_duplicate_after_24h_allowed PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_different_types_allowed PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_different_users_same_achievement PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_different_languages_same_achievement PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_different_titles_allowed PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_database_error PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_invalid_user_id PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_logging_on_error PASSED [ 89%]
tests/test_sr_gamification.py::test_award_achievement_logging_on_duplicate PASSED [ 89%]
tests/test_sr_gamification.py::test_integration_complete_review_workflow PASSED [ 89%]
tests/test_sr_gamification.py::test_integration_multiple_items_sequence PASSED [ 89%]
tests/test_sr_gamification.py::test_integration_streak_progression PASSED [ 89%]
tests/test_sr_gamification.py::test_integration_mastery_progression PASSED [ 89%]
tests/test_sr_gamification.py::test_integration_mixed_achievement_types PASSED [ 89%]
tests/test_sr_gamification.py::test_integration_database_state_verification PASSED [ 89%]
tests/test_sr_gamification.py::test_integration_achievement_retrieval PASSED [ 89%]
tests/test_sr_gamification.py::test_integration_new_user_no_prior_achievements PASSED [ 89%]
tests/test_sr_models.py::TestSREnums::test_item_type_enum PASSED         [ 89%]
tests/test_sr_models.py::TestSREnums::test_session_type_enum PASSED      [ 89%]
tests/test_sr_models.py::TestSREnums::test_review_result_enum PASSED     [ 89%]
tests/test_sr_models.py::TestSREnums::test_achievement_type_enum PASSED  [ 89%]
tests/test_sr_models.py::TestSpacedRepetitionItem::test_spaced_repetition_item_with_all_fields PASSED [ 89%]
tests/test_sr_models.py::TestSpacedRepetitionItem::test_spaced_repetition_item_with_none_optional_fields PASSED [ 89%]
tests/test_sr_models.py::TestSpacedRepetitionItem::test_spaced_repetition_item_without_optional_fields PASSED [ 89%]
tests/test_sr_models.py::TestSpacedRepetitionItem::test_spaced_repetition_item_sm2_algorithm_fields PASSED [ 89%]
tests/test_sr_models.py::TestLearningSession::test_learning_session_with_all_fields PASSED [ 89%]
tests/test_sr_models.py::TestLearningSession::test_learning_session_with_none_optional_fields PASSED [ 89%]
tests/test_sr_models.py::TestLearningSession::test_learning_session_without_optional_fields PASSED [ 89%]
tests/test_sr_models.py::TestLearningSession::test_learning_session_accuracy_calculation PASSED [ 89%]
tests/test_sr_models.py::TestLearningGoal::test_learning_goal_with_all_fields PASSED [ 89%]
tests/test_sr_models.py::TestLearningGoal::test_learning_goal_with_none_optional_fields PASSED [ 90%]
tests/test_sr_models.py::TestLearningGoal::test_learning_goal_without_optional_fields PASSED [ 90%]
tests/test_sr_models.py::TestLearningGoal::test_learning_goal_daily_type PASSED [ 90%]
tests/test_sr_models.py::TestLearningGoal::test_learning_goal_progress_tracking PASSED [ 90%]
tests/test_sr_models.py::TestDataclassIntegration::test_complete_learning_flow PASSED [ 90%]
tests/test_sr_models.py::TestDataclassIntegration::test_sm2_algorithm_workflow PASSED [ 90%]
tests/test_sr_models.py::TestDataclassIntegration::test_goal_with_multiple_sessions PASSED [ 90%]
tests/test_sr_sessions.py::TestSessionManagerInitialization::test_initialization_with_db_manager PASSED [ 90%]
tests/test_sr_sessions.py::TestStartLearningSession::test_start_basic_session PASSED [ 90%]
tests/test_sr_sessions.py::TestStartLearningSession::test_start_session_with_all_fields PASSED [ 90%]
tests/test_sr_sessions.py::TestStartLearningSession::test_start_session_with_enum_value PASSED [ 90%]
tests/test_sr_sessions.py::TestStartLearningSession::test_start_session_with_string_value PASSED [ 90%]
tests/test_sr_sessions.py::TestStartLearningSession::test_start_session_with_empty_mode_data PASSED [ 90%]
tests/test_sr_sessions.py::TestStartLearningSession::test_start_session_records_timestamp PASSED [ 90%]
tests/test_sr_sessions.py::TestStartLearningSession::test_start_session_database_error_raises PASSED [ 90%]
tests/test_sr_sessions.py::TestEndLearningSession::test_end_session_success PASSED [ 90%]
tests/test_sr_sessions.py::TestEndLearningSession::test_end_session_not_found_returns_false PASSED [ 90%]
tests/test_sr_sessions.py::TestEndLearningSession::test_end_session_calculates_duration PASSED [ 90%]
tests/test_sr_sessions.py::TestEndLearningSession::test_end_session_calculates_accuracy PASSED [ 90%]
tests/test_sr_sessions.py::TestEndLearningSession::test_end_session_accuracy_zero_when_no_items PASSED [ 90%]
tests/test_sr_sessions.py::TestEndLearningSession::test_end_session_updates_all_metrics PASSED [ 90%]
tests/test_sr_sessions.py::TestEndLearningSession::test_end_session_triggers_streak_update PASSED [ 90%]
tests/test_sr_sessions.py::TestEndLearningSession::test_end_session_handles_database_error PASSED [ 90%]
tests/test_sr_sessions.py::TestEndLearningSession::test_end_session_missing_session_info_skips_streak_update PASSED [ 90%]
tests/test_sr_sessions.py::TestUpdateLearningStreaks::test_update_streaks_creates_new_streak PASSED [ 90%]
tests/test_sr_sessions.py::TestUpdateLearningStreaks::test_update_streaks_same_day_no_change PASSED [ 90%]
tests/test_sr_sessions.py::TestUpdateLearningStreaks::test_update_streaks_consecutive_day_increments PASSED [ 90%]
tests/test_sr_sessions.py::TestUpdateLearningStreaks::test_update_streaks_broken_streak_resets PASSED [ 90%]
tests/test_sr_sessions.py::TestUpdateLearningStreaks::test_update_streaks_updates_longest_streak PASSED [ 90%]
tests/test_sr_sessions.py::TestUpdateLearningStreaks::test_update_streaks_triggers_achievement_check PASSED [ 90%]
tests/test_sr_sessions.py::TestUpdateLearningStreaks::test_update_streaks_handles_empty_session_info PASSED [ 90%]
tests/test_sr_sessions.py::TestUpdateLearningStreaks::test_update_streaks_handles_database_error PASSED [ 90%]
tests/test_sr_sessions.py::TestUpdateLearningStreaks::test_update_streaks_null_last_activity_date PASSED [ 90%]
tests/test_sr_sessions.py::TestCheckStreakAchievements::test_check_achievements_7_day_milestone PASSED [ 90%]
tests/test_sr_sessions.py::TestCheckStreakAchievements::test_check_achievements_14_day_milestone PASSED [ 90%]
tests/test_sr_sessions.py::TestCheckStreakAchievements::test_check_achievements_30_day_milestone PASSED [ 90%]
tests/test_sr_sessions.py::TestCheckStreakAchievements::test_check_achievements_60_day_milestone PASSED [ 90%]
tests/test_sr_sessions.py::TestCheckStreakAchievements::test_check_achievements_100_day_milestone PASSED [ 90%]
tests/test_sr_sessions.py::TestCheckStreakAchievements::test_check_achievements_365_day_milestone PASSED [ 90%]
tests/test_sr_sessions.py::TestCheckStreakAchievements::test_check_achievements_non_milestone_no_award PASSED [ 90%]
tests/test_sr_sessions.py::TestAwardStreakAchievement::test_award_achievement_creates_record PASSED [ 90%]
tests/test_sr_sessions.py::TestAwardStreakAchievement::test_award_achievement_rare_for_30_plus_days PASSED [ 90%]
tests/test_sr_sessions.py::TestAwardStreakAchievement::test_award_achievement_prevents_duplicates_within_24_hours PASSED [ 90%]
tests/test_sr_sessions.py::TestAwardStreakAchievement::test_award_achievement_stores_criteria_as_json PASSED [ 91%]
tests/test_sr_sessions.py::TestAwardStreakAchievement::test_award_achievement_handles_database_error PASSED [ 91%]
tests/test_sr_sessions.py::TestIntegrationScenarios::test_complete_session_workflow PASSED [ 91%]
tests/test_sr_sessions.py::TestIntegrationScenarios::test_streak_milestone_workflow PASSED [ 91%]
tests/test_sr_sessions.py::TestIntegrationScenarios::test_multiple_users_independent_streaks PASSED [ 91%]
tests/test_sr_sessions.py::TestIntegrationScenarios::test_multiple_sessions_same_day_single_streak_increment PASSED [ 91%]
tests/test_sync.py::TestSyncEnums::test_sync_direction_values PASSED     [ 91%]
tests/test_sync.py::TestSyncEnums::test_sync_status_values PASSED        [ 91%]
tests/test_sync.py::TestSyncEnums::test_conflict_resolution_values PASSED [ 91%]
tests/test_sync.py::TestSyncDataclasses::test_sync_item_creation PASSED  [ 91%]
tests/test_sync.py::TestSyncDataclasses::test_sync_item_default_priority PASSED [ 91%]
tests/test_sync.py::TestSyncDataclasses::test_sync_result_creation PASSED [ 91%]
tests/test_sync.py::TestDataSyncServiceInitialization::test_service_initialization PASSED [ 91%]
tests/test_sync.py::TestSyncUserData::test_sync_user_data_success_all_tasks PASSED [ 91%]
tests/test_sync.py::TestSyncUserData::test_sync_user_data_with_task_failure PASSED [ 91%]
tests/test_sync.py::TestSyncUserData::test_sync_user_data_complete_failure PASSED [ 91%]
tests/test_sync.py::TestSyncUserData::test_sync_user_data_sets_is_syncing_flag PASSED [ 91%]
tests/test_sync.py::TestSyncUserData::test_sync_user_data_different_directions PASSED [ 91%]
tests/test_sync.py::TestSyncUserData::test_sync_user_data_outer_exception_handler PASSED [ 91%]
tests/test_sync.py::TestSyncUserProfiles::test_sync_user_profiles_down_with_user PASSED [ 91%]
tests/test_sync.py::TestSyncUserProfiles::test_sync_user_profiles_down_no_user PASSED [ 91%]
tests/test_sync.py::TestSyncUserProfiles::test_sync_user_profiles_down_save_failure PASSED [ 91%]
tests/test_sync.py::TestSyncUserProfiles::test_sync_user_profiles_up_local_newer PASSED [ 91%]
tests/test_sync.py::TestSyncUserProfiles::test_sync_user_profiles_up_server_newer PASSED [ 91%]
tests/test_sync.py::TestSyncUserProfiles::test_sync_user_profiles_up_no_local_profile PASSED [ 91%]
tests/test_sync.py::TestSyncUserProfiles::test_sync_user_profiles_bidirectional PASSED [ 91%]
tests/test_sync.py::TestSyncUserProfiles::test_sync_user_profiles_exception PASSED [ 91%]
tests/test_sync.py::TestSyncUserProfiles::test_sync_user_profiles_up_no_server_user PASSED [ 91%]
tests/test_sync.py::TestSyncUserProfiles::test_sync_user_profiles_up_equal_timestamps PASSED [ 91%]
tests/test_sync.py::TestSyncConversations::test_sync_conversations_down PASSED [ 91%]
tests/test_sync.py::TestSyncConversations::test_sync_conversations_up PASSED [ 91%]
tests/test_sync.py::TestSyncConversations::test_sync_conversations_bidirectional PASSED [ 91%]
tests/test_sync.py::TestSyncConversations::test_sync_conversations_exception PASSED [ 91%]
tests/test_sync.py::TestConversationSyncHelpers::test_get_last_sync_time_exists PASSED [ 91%]
tests/test_sync.py::TestConversationSyncHelpers::test_get_last_sync_time_not_exists PASSED [ 91%]
tests/test_sync.py::TestConversationSyncHelpers::test_download_conversations_from_server PASSED [ 91%]
tests/test_sync.py::TestConversationSyncHelpers::test_fetch_server_conversations PASSED [ 91%]
tests/test_sync.py::TestConversationSyncHelpers::test_fetch_conversation_messages PASSED [ 91%]
tests/test_sync.py::TestConversationSyncHelpers::test_save_messages_locally_success PASSED [ 91%]
tests/test_sync.py::TestConversationSyncHelpers::test_save_messages_locally_failure PASSED [ 91%]
tests/test_sync.py::TestConversationSyncHelpers::test_upload_conversations_to_server_no_user PASSED [ 91%]
tests/test_sync.py::TestConversationSyncHelpers::test_upload_conversations_to_server_with_user PASSED [ 91%]
tests/test_sync.py::TestConversationSyncHelpers::test_group_messages_by_conversation PASSED [ 92%]
tests/test_sync.py::TestConversationSyncHelpers::test_sync_conversations_to_server PASSED [ 92%]
tests/test_sync.py::TestConversationSyncHelpers::test_get_or_create_server_conversation_exists PASSED [ 92%]
tests/test_sync.py::TestConversationSyncHelpers::test_get_or_create_server_conversation_create_new PASSED [ 92%]
tests/test_sync.py::TestConversationSyncHelpers::test_sync_messages_to_server_new_message PASSED [ 92%]
tests/test_sync.py::TestConversationSyncHelpers::test_sync_messages_to_server_existing_message PASSED [ 92%]
tests/test_sync.py::TestConversationSyncHelpers::test_message_exists_on_server_true PASSED [ 92%]
tests/test_sync.py::TestConversationSyncHelpers::test_message_exists_on_server_false PASSED [ 92%]
tests/test_sync.py::TestSyncLearningProgress::test_sync_learning_progress_up_with_user PASSED [ 92%]
tests/test_sync.py::TestSyncLearningProgress::test_sync_learning_progress_up_no_user PASSED [ 92%]
tests/test_sync.py::TestSyncLearningProgress::test_sync_learning_progress_bidirectional PASSED [ 92%]
tests/test_sync.py::TestSyncLearningProgress::test_sync_learning_progress_down PASSED [ 92%]
tests/test_sync.py::TestSyncLearningProgress::test_sync_learning_progress_exception PASSED [ 92%]
tests/test_sync.py::TestSyncVocabulary::test_sync_vocabulary_all_directions PASSED [ 92%]
tests/test_sync.py::TestSyncDocuments::test_sync_documents_down_with_documents PASSED [ 92%]
tests/test_sync.py::TestSyncDocuments::test_sync_documents_down_no_user PASSED [ 92%]
tests/test_sync.py::TestSyncDocuments::test_sync_documents_down_unprocessed_document PASSED [ 92%]
tests/test_sync.py::TestSyncDocuments::test_sync_documents_down_no_processed_content PASSED [ 92%]
tests/test_sync.py::TestSyncDocuments::test_sync_documents_embedding_failure PASSED [ 92%]
tests/test_sync.py::TestSyncDocuments::test_sync_documents_up PASSED     [ 92%]
tests/test_sync.py::TestSyncDocuments::test_sync_documents_exception PASSED [ 92%]
tests/test_sync.py::TestConflictResolution::test_resolve_conflict_server_wins PASSED [ 92%]
tests/test_sync.py::TestConflictResolution::test_resolve_conflict_local_wins PASSED [ 92%]
tests/test_sync.py::TestConflictResolution::test_resolve_conflict_latest_timestamp_server_newer PASSED [ 92%]
tests/test_sync.py::TestConflictResolution::test_resolve_conflict_latest_timestamp_local_newer PASSED [ 92%]
tests/test_sync.py::TestConflictResolution::test_resolve_conflict_manual_review PASSED [ 92%]
tests/test_sync.py::TestBackgroundSync::test_start_background_sync_single_iteration PASSED [ 92%]
tests/test_sync.py::TestBackgroundSync::test_start_background_sync_skips_when_already_syncing PASSED [ 92%]
tests/test_sync.py::TestBackgroundSync::test_start_background_sync_handles_exception PASSED [ 92%]
tests/test_sync.py::TestSyncStatusMonitoring::test_get_sync_status_with_last_sync PASSED [ 92%]
tests/test_sync.py::TestSyncStatusMonitoring::test_get_sync_status_without_last_sync PASSED [ 92%]
tests/test_sync.py::TestSyncStatusMonitoring::test_get_sync_status_while_syncing PASSED [ 92%]
tests/test_sync.py::TestSyncStatusMonitoring::test_get_sync_status_with_pending_items PASSED [ 92%]
tests/test_sync.py::TestSyncStatusMonitoring::test_check_connectivity_healthy PASSED [ 92%]
tests/test_sync.py::TestSyncStatusMonitoring::test_check_connectivity_unhealthy PASSED [ 92%]
tests/test_sync.py::TestSyncStatusMonitoring::test_check_connectivity_exception PASSED [ 92%]
tests/test_sync.py::TestSyncStatusMonitoring::test_get_sync_statistics PASSED [ 92%]
tests/test_sync.py::TestSyncStatusMonitoring::test_get_sync_statistics_different_days PASSED [ 92%]
tests/test_sync.py::TestGlobalInstanceAndConvenience::test_global_sync_service_exists PASSED [ 92%]
tests/test_sync.py::TestGlobalInstanceAndConvenience::test_convenience_sync_user_data PASSED [ 92%]
tests/test_sync.py::TestGlobalInstanceAndConvenience::test_convenience_get_sync_status PASSED [ 92%]
tests/test_sync.py::TestGlobalInstanceAndConvenience::test_convenience_start_background_sync PASSED [ 92%]
tests/test_tts_stt_integration.py::TestTTStoSTTRoundTrip::test_english_tts_to_stt PASSED [ 92%]
tests/test_tts_stt_integration.py::TestTTStoSTTRoundTrip::test_german_tts_to_stt PASSED [ 93%]
tests/test_tts_stt_integration.py::TestTTStoSTTRoundTrip::test_spanish_tts_to_stt PASSED [ 93%]
tests/test_tts_stt_integration.py::TestTTStoSTTRoundTrip::test_french_tts_to_stt PASSED [ 93%]
tests/test_tts_stt_integration.py::TestTTStoSTTRoundTrip::test_italian_tts_to_stt PASSED [ 93%]
tests/test_tts_stt_integration.py::TestTTStoSTTRoundTrip::test_portuguese_tts_to_stt PASSED [ 93%]
tests/test_tts_stt_integration.py::TestTTStoSTTRoundTrip::test_chinese_tts_to_stt PASSED [ 93%]
tests/test_tts_stt_integration.py::TestFullValidationLoop::test_complete_language_loop PASSED [ 93%]
tests/test_tts_stt_integration.py::TestCrossLanguageValidation::test_sequential_language_switching PASSED [ 93%]
tests/test_tts_stt_integration.py::TestCrossLanguageValidation::test_voice_quality_consistency PASSED [ 93%]
tests/test_tts_stt_integration.py::TestAudioQualityInRoundTrip::test_clear_speech_vs_complex_speech PASSED [ 93%]
tests/test_tts_stt_integration.py::TestAudioQualityInRoundTrip::test_multiple_voices_same_language PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestEnums::test_tutor_mode_enum_values PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestEnums::test_tutor_mode_category_enum_values PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestEnums::test_difficulty_level_enum_values PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestEnums::test_enum_membership PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestEnums::test_enum_iteration PASSED  [ 93%]
tests/test_tutor_mode_manager.py::TestTutorModeConfig::test_tutor_mode_config_creation PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestTutorModeConfig::test_tutor_mode_config_with_optional_fields PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestTutorModeConfig::test_tutor_mode_config_all_correction_approaches PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestTutorSession::test_tutor_session_creation_minimal PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestTutorSession::test_tutor_session_post_init_defaults PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestTutorSession::test_tutor_session_with_topic PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestTutorSession::test_tutor_session_with_custom_timestamps PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestTutorSession::test_tutor_session_with_custom_metrics PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestTutorSession::test_tutor_session_post_init_preserves_existing_values PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestTutorSession::test_tutor_session_all_difficulty_levels PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestTutorSession::test_tutor_session_all_modes PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestTutorModeManagerInit::test_manager_initialization PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestTutorModeManagerInit::test_manager_initializes_all_modes PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestTutorModeManagerInit::test_global_manager_instance PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_chit_chat_mode_configuration PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_chit_chat_difficulty_adjustments PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_interview_simulation_mode_configuration PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_interview_simulation_difficulty_adjustments PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_deadline_negotiations_mode_configuration PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_deadline_negotiations_difficulty_adjustments PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_teacher_mode_configuration PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_teacher_mode_difficulty_adjustments PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_vocabulary_builder_mode_configuration PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_vocabulary_builder_difficulty_adjustments PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_open_session_mode_configuration PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_open_session_difficulty_adjustments PASSED [ 93%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_all_modes_have_required_fields PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_all_modes_have_example_interactions PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_modes_by_category_casual PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_modes_by_category_professional PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_modes_by_category_educational PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_topic_required_modes PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestInitializeTutorModes::test_all_modes_multilanguage_support PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGetAvailableModes::test_get_available_modes_returns_list PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGetAvailableModes::test_get_available_modes_structure PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGetAvailableModes::test_get_available_modes_contains_all_modes PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestStartTutorSession::test_start_session_basic PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestStartTutorSession::test_start_session_with_difficulty PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestStartTutorSession::test_start_session_with_topic PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestStartTutorSession::test_start_session_topic_required_validation_success PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestStartTutorSession::test_start_session_topic_required_validation_failure PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestStartTutorSession::test_start_session_all_difficulty_levels PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestStartTutorSession::test_start_session_all_modes_without_topic_requirement PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestStartTutorSession::test_start_session_all_modes_with_topic_requirement PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestStartTutorSession::test_start_multiple_sessions PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGetSessionSystemPrompt::test_get_system_prompt_basic PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGetSessionSystemPrompt::test_get_system_prompt_with_topic PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGetSessionSystemPrompt::test_get_system_prompt_without_topic_uses_default PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGetSessionSystemPrompt::test_get_system_prompt_session_not_found PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGetSessionSystemPrompt::test_get_system_prompt_all_modes PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGetConversationStarter::test_get_conversation_starter_basic PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGetConversationStarter::test_get_conversation_starter_with_topic_formatting PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGetConversationStarter::test_get_conversation_starter_without_topic_placeholder PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGetConversationStarter::test_get_conversation_starter_session_not_found PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGetConversationStarter::test_get_conversation_starter_all_modes PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGenerateTutorResponse::test_generate_response_basic PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGenerateTutorResponse::test_generate_response_with_context PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGenerateTutorResponse::test_generate_response_updates_session_metrics PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGenerateTutorResponse::test_generate_response_session_not_found PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGenerateTutorResponse::test_generate_response_ai_error_handling PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGenerateTutorResponse::test_generate_response_passes_language_to_ai PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGenerateTutorResponse::test_generate_response_context_type PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestEndTutorSession::test_end_session_basic PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestEndTutorSession::test_end_session_removes_from_active PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestEndTutorSession::test_end_session_with_topic PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestEndTutorSession::test_end_session_not_found PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestEndTutorSession::test_end_session_duration_calculation PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestEndTutorSession::test_end_session_zero_interactions PASSED [ 94%]
tests/test_tutor_mode_manager.py::TestGetSessionInfo::test_get_session_info_basic PASSED [ 95%]
tests/test_tutor_mode_manager.py::TestGetSessionInfo::test_get_session_info_with_topic PASSED [ 95%]
tests/test_tutor_mode_manager.py::TestGetSessionInfo::test_get_session_info_not_found PASSED [ 95%]
tests/test_tutor_mode_manager.py::TestGetSessionInfo::test_get_session_info_with_progress_metrics PASSED [ 95%]
tests/test_tutor_mode_manager.py::TestGetModeAnalytics::test_get_mode_analytics_no_sessions PASSED [ 95%]
tests/test_tutor_mode_manager.py::TestGetModeAnalytics::test_get_mode_analytics_modes_by_category PASSED [ 95%]
tests/test_tutor_mode_manager.py::TestGetModeAnalytics::test_get_mode_analytics_with_active_sessions PASSED [ 95%]
tests/test_tutor_mode_manager.py::TestGetModeAnalytics::test_get_mode_analytics_session_distribution PASSED [ 95%]
tests/test_user_management_service.py::TestUserProfileServiceInit::test_user_profile_service_initialization PASSED [ 95%]
tests/test_user_management_service.py::TestUserProfileServiceInit::test_service_can_be_instantiated PASSED [ 95%]
tests/test_user_management_service.py::TestGetSession::test_get_session_returns_session PASSED [ 95%]
tests/test_user_management_service.py::TestCreateUser::test_create_user_checks_existing_user_id PASSED [ 95%]
tests/test_user_management_service.py::TestCreateUser::test_create_user_checks_existing_email PASSED [ 95%]
tests/test_user_management_service.py::TestCreateUser::test_create_user_with_password PASSED [ 95%]
tests/test_user_management_service.py::TestUpdateUser::test_update_user_not_found PASSED [ 95%]
tests/test_user_management_service.py::TestUpdateUser::test_update_user_success PASSED [ 95%]
tests/test_user_management_service.py::TestDeleteUser::test_delete_user_not_found PASSED [ 95%]
tests/test_user_management_service.py::TestListUsers::test_list_users_with_role_filter PASSED [ 95%]
tests/test_user_management_service.py::TestGetLearningProgress::test_get_learning_progress_user_not_found PASSED [ 95%]
tests/test_user_management_service.py::TestGetLearningProgress::test_get_learning_progress_returns_list PASSED [ 95%]
tests/test_user_management_service.py::TestGetUserProfile::test_get_user_profile_not_found PASSED [ 95%]
tests/test_user_management_service.py::TestGetUserProfile::test_get_user_profile_success PASSED [ 95%]
tests/test_user_management_service.py::TestGetUserLanguages::test_get_user_languages_user_not_found PASSED [ 95%]
tests/test_user_management_service.py::TestGetUserLanguages::test_get_user_languages_returns_list PASSED [ 95%]
tests/test_user_management_service.py::TestGetUserPreferences::test_get_user_preferences_not_found PASSED [ 95%]
tests/test_user_management_service.py::TestGetUserPreferences::test_get_user_preferences_returns_dict PASSED [ 95%]
tests/test_user_management_service.py::TestUpdateUserPreferences::test_update_user_preferences_not_found PASSED [ 95%]
tests/test_user_management_service.py::TestUpdateUserPreferences::test_update_user_preferences_success PASSED [ 95%]
tests/test_user_management_service.py::TestGetFamilyMembers::test_get_family_members_user_not_found PASSED [ 95%]
tests/test_user_management_service.py::TestGetFamilyMembers::test_get_family_members_returns_list PASSED [ 95%]
tests/test_user_management_service.py::TestCreateUserWithPIN::test_create_child_user_generates_pin PASSED [ 95%]
tests/test_user_management_service.py::TestCreateUserExceptionHandling::test_create_user_integrity_error PASSED [ 95%]
tests/test_user_management_service.py::TestCreateUserExceptionHandling::test_create_user_general_exception PASSED [ 95%]
tests/test_user_management_service.py::TestGetUserByIdWithResponse::test_get_user_by_id_returns_response PASSED [ 95%]
tests/test_user_management_service.py::TestListUsersVariousFilters::test_list_users_no_filters PASSED [ 95%]
tests/test_user_management_service.py::TestListUsersVariousFilters::test_add_user_language_already_exists PASSED [ 95%]
tests/test_user_management_service.py::TestUpdateUserExceptionHandling::test_update_user_handles_exceptions PASSED [ 95%]
tests/test_user_management_service.py::TestGetLearningProgressWithLanguage::test_get_learning_progress_filters_by_language PASSED [ 95%]
tests/test_user_management_service.py::TestGetUserProfileComplete::test_get_user_profile_with_languages_and_progress PASSED [ 95%]
tests/test_user_management_service.py::TestCreateUserCompleteFlow::test_create_user_success_with_local_db PASSED [ 95%]
tests/test_user_management_service.py::TestDeleteUserComplete::test_delete_user_complete_success PASSED [ 95%]
tests/test_user_management_service.py::TestAddUserLanguageComplete::test_add_user_language_complete_flow PASSED [ 95%]
tests/test_user_management_service.py::TestRemoveUserLanguageComplete::test_remove_user_language_complete_flow PASSED [ 95%]
tests/test_user_management_service.py::TestGetUserStatisticsComplete::test_get_user_statistics_with_data PASSED [ 96%]
tests/test_user_management_service.py::TestUpdateUserComplete::test_update_user_with_local_db_sync PASSED [ 96%]
tests/test_user_management_service.py::TestGetUserStatisticsDetailed::test_get_user_statistics_complete_data PASSED [ 96%]
tests/test_user_management_service.py::TestUpdateLearningProgressWithFields::test_update_learning_progress_updates_fields PASSED [ 96%]
tests/test_user_management_service.py::TestGetFamilyMembersAsParent::test_get_family_members_parent_user PASSED [ 96%]
tests/test_user_management_service.py::TestAddUserLanguageEdgeCases2::test_add_user_language_exception_handling PASSED [ 96%]
tests/test_user_management_service.py::TestRemoveUserLanguageEdgeCases::test_remove_user_language_exception_handling PASSED [ 96%]
tests/test_user_management_service.py::TestCreateLearningProgressSuccess::test_create_learning_progress_new_success PASSED [ 96%]
tests/test_user_management_service.py::TestUpdateLearningProgressSuccess::test_update_learning_progress_not_found_returns_none PASSED [ 96%]
tests/test_user_management_service.py::TestDeleteUserWithLocalDB::test_delete_user_with_local_db_cleanup PASSED [ 96%]
tests/test_user_management_service.py::TestCreateUserRollback::test_create_user_rollback_on_exception PASSED [ 96%]
tests/test_user_management_service.py::TestUpdateUserRollback::test_update_user_rollback_on_error PASSED [ 96%]
tests/test_user_management_service.py::TestUpdateUserWithLocalDB::test_update_user_syncs_preferences_to_local_db PASSED [ 96%]
tests/test_user_management_service.py::TestCreateUserSuccessPath::test_create_user_complete_success_with_password PASSED [ 96%]
tests/test_user_management_service.py::TestCreateLearningProgressDuplicateError::test_create_learning_progress_duplicate_raises_error PASSED [ 96%]
tests/test_user_management_service.py::TestCreateUserCompleteSuccess::test_create_user_complete_success_with_logging PASSED [ 96%]
tests/test_user_management_service.py::TestUpdateUserCompleteSuccess::test_update_user_complete_success_with_logging PASSED [ 96%]
tests/test_user_management_service.py::TestGetUserByIdReturnsNone::test_get_user_by_id_user_not_found_returns_none PASSED [ 96%]
tests/test_user_management_service.py::TestAddUserLanguageInsertPath::test_add_user_language_insert_new_language PASSED [ 96%]
tests/test_user_management_service.py::TestUpdateLearningProgressCompleteSuccess::test_update_learning_progress_complete_success_with_field_updates PASSED [ 96%]
tests/test_user_management_service.py::TestGetUserStatisticsCompleteSuccess::test_get_user_statistics_complete_success_returns_dict PASSED [ 96%]
tests/test_user_management_service.py::TestDeleteUserHardDelete::test_delete_user_hard_delete_success PASSED [ 96%]
tests/test_user_management_service.py::TestDeleteUserHardDelete::test_delete_user_exception_handling PASSED [ 96%]
tests/test_user_management_service.py::TestListUsersWithFilters::test_list_users_with_is_active_filter PASSED [ 96%]
tests/test_user_management_service.py::TestAddRemoveUserLanguage::test_add_user_language_user_not_found_returns_false PASSED [ 96%]
tests/test_user_management_service.py::TestAddRemoveUserLanguage::test_remove_user_language_user_not_found PASSED [ 96%]
tests/test_user_management_service.py::TestLearningProgressEdgeCases::test_create_learning_progress_user_not_found_returns_none PASSED [ 96%]
tests/test_user_management_service.py::TestLearningProgressEdgeCases::test_update_learning_progress_user_not_found_returns_none PASSED [ 96%]
tests/test_user_management_service.py::TestUpdateUserPreferencesExceptionHandling::test_update_user_preferences_exception_handling PASSED [ 96%]
tests/test_user_management_service.py::TestGetUserPreferencesExceptionHandling::test_get_user_preferences_exception_handling PASSED [ 96%]
tests/test_user_management_service.py::TestGetUserStatisticsEdgeCases::test_get_user_statistics_user_not_found PASSED [ 96%]
tests/test_user_management_service.py::TestModuleLevelConvenienceFunctions::test_module_level_create_user PASSED [ 96%]
tests/test_user_management_service.py::TestModuleLevelConvenienceFunctions::test_module_level_get_user_by_id PASSED [ 96%]
tests/test_user_management_service.py::TestModuleLevelConvenienceFunctions::test_module_level_get_user_profile PASSED [ 96%]
tests/test_user_management_service.py::TestModuleLevelConvenienceFunctions::test_module_level_update_user PASSED [ 96%]
tests/test_user_management_service.py::TestMissingBranchCoverage::test_update_user_with_none_values_skips_field_update PASSED [ 96%]
tests/test_user_management_service.py::TestMissingBranchCoverage::test_update_learning_progress_with_none_values_skips_field_update PASSED [ 96%]
tests/test_user_management_service.py::TestMissingBranchCoverage::test_get_learning_progress_without_language_filter PASSED [ 96%]
tests/test_user_management_service.py::TestMissingBranchCoverage::test_get_user_statistics_recent_conversations_query_executes PASSED [ 96%]
tests/test_user_management_service.py::TestMissingBranchCoverage::test_get_user_statistics_query_exception_at_line_852 PASSED [ 96%]
tests/test_user_management_service.py::TestMissingBranchCoverage::test_get_user_statistics_scalar_returns_none PASSED [ 96%]
tests/test_user_management_service.py::TestMissingBranchCoverage::test_get_user_statistics_no_conversations_any_false PASSED [ 96%]
tests/test_user_management_system.py::TestDatabaseConnections::test_database_manager_initialization PASSED [ 97%]
tests/test_user_management_system.py::TestDatabaseConnections::test_sqlite_connection_properties PASSED [ 97%]
tests/test_user_management_system.py::TestDatabaseConnections::test_sqlite_engine_creation PASSED [ 97%]
tests/test_user_management_system.py::TestDatabaseConnections::test_session_creation PASSED [ 97%]
tests/test_user_management_system.py::TestDatabaseConnections::test_local_database_initialization PASSED [ 97%]
tests/test_user_management_system.py::TestDatabaseConnections::test_chromadb_initialization PASSED [ 97%]
tests/test_user_management_system.py::TestDatabaseConnections::test_connection_health_checks PASSED [ 97%]
tests/test_user_management_system.py::TestDatabaseConnections::test_connection_stats PASSED [ 97%]
tests/test_user_management_system.py::TestUserAuthentication::test_password_hashing PASSED [ 97%]
tests/test_user_management_system.py::TestUserAuthentication::test_pin_management PASSED [ 97%]
tests/test_user_management_system.py::TestUserAuthentication::test_jwt_token_management PASSED [ 97%]
tests/test_user_management_system.py::TestUserAuthentication::test_refresh_token_management PASSED [ 97%]
tests/test_user_management_system.py::TestUserAuthentication::test_session_management PASSED [ 97%]
tests/test_user_management_system.py::TestUserAuthentication::test_rate_limiting PASSED [ 97%]
tests/test_user_management_system.py::TestUserProfileManagement::test_user_creation_validation PASSED [ 97%]
tests/test_user_management_system.py::TestUserProfileManagement::test_user_id_validation PASSED [ 97%]
tests/test_user_management_system.py::TestUserProfileManagement::test_email_validation PASSED [ 97%]
tests/test_user_management_system.py::TestUserProfileManagement::test_user_preferences_management PASSED [ 97%]
tests/test_user_management_system.py::TestUserProfileManagement::test_learning_progress_tracking PASSED [ 97%]
tests/test_user_management_system.py::TestDataSynchronization::test_sync_direction_handling PASSED [ 97%]
tests/test_user_management_system.py::TestDataSynchronization::test_conflict_resolution_strategies PASSED [ 97%]
tests/test_user_management_system.py::TestDataSynchronization::test_sync_status_tracking PASSED [ 97%]
tests/test_user_management_system.py::TestDataSynchronization::test_connectivity_check PASSED [ 97%]
tests/test_user_management_system.py::TestMigrationSystem::test_alembic_initialization PASSED [ 97%]
tests/test_user_management_system.py::TestMigrationSystem::test_database_integrity_check PASSED [ 97%]
tests/test_user_management_system.py::TestMigrationSystem::test_migration_history PASSED [ 97%]
tests/test_user_management_system.py::TestUIComponents::test_login_form_structure PASSED [ 97%]
tests/test_user_management_system.py::TestUIComponents::test_registration_form_structure PASSED [ 97%]
tests/test_user_management_system.py::TestUIComponents::test_user_profile_page_structure PASSED [ 97%]
tests/test_user_management_system.py::TestUIComponents::test_error_message_component PASSED [ 97%]
tests/test_user_management_system.py::TestIntegrationScenarios::test_user_registration_flow PASSED [ 97%]
tests/test_user_management_system.py::TestIntegrationScenarios::test_authentication_flow PASSED [ 97%]
tests/test_user_management_system.py::TestIntegrationScenarios::test_data_flow_integrity PASSED [ 97%]
tests/test_user_management_system.py::TestIntegrationScenarios::test_system_health_monitoring PASSED [ 97%]
tests/test_user_management_system.py::TestPerformanceAndReliability::test_connection_pool_behavior PASSED [ 97%]
tests/test_user_management_system.py::TestPerformanceAndReliability::test_error_handling_robustness PASSED [ 97%]
tests/test_user_management_system.py::TestPerformanceAndReliability::test_session_cleanup PASSED [ 97%]
tests/test_user_management_system.py::TestPerformanceBenchmarks::test_password_hashing_performance PASSED [ 97%]
tests/test_user_management_system.py::TestPerformanceBenchmarks::test_token_creation_performance PASSED [ 97%]
tests/test_visual_learning_service.py::TestVisualizationTypeEnum::test_visualization_type_values PASSED [ 97%]
tests/test_visual_learning_service.py::TestVisualizationTypeEnum::test_visualization_type_count PASSED [ 97%]
tests/test_visual_learning_service.py::TestGrammarConceptTypeEnum::test_grammar_concept_type_values PASSED [ 97%]
tests/test_visual_learning_service.py::TestGrammarConceptTypeEnum::test_grammar_concept_type_count PASSED [ 97%]
tests/test_visual_learning_service.py::TestVocabularyVisualizationTypeEnum::test_vocabulary_visualization_type_values PASSED [ 98%]
tests/test_visual_learning_service.py::TestVocabularyVisualizationTypeEnum::test_vocabulary_visualization_type_count PASSED [ 98%]
tests/test_visual_learning_service.py::TestFlowchartNode::test_flowchart_node_creation_all_fields PASSED [ 98%]
tests/test_visual_learning_service.py::TestFlowchartNode::test_flowchart_node_creation_minimal_fields PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchart::test_grammar_flowchart_creation_all_fields PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchart::test_grammar_flowchart_creation_minimal_fields PASSED [ 98%]
tests/test_visual_learning_service.py::TestProgressVisualization::test_progress_visualization_creation_all_fields PASSED [ 98%]
tests/test_visual_learning_service.py::TestProgressVisualization::test_progress_visualization_creation_minimal_fields PASSED [ 98%]
tests/test_visual_learning_service.py::TestVocabularyVisual::test_vocabulary_visual_creation_all_fields PASSED [ 98%]
tests/test_visual_learning_service.py::TestVocabularyVisual::test_vocabulary_visual_creation_minimal_fields PASSED [ 98%]
tests/test_visual_learning_service.py::TestPronunciationGuide::test_pronunciation_guide_creation_all_fields PASSED [ 98%]
tests/test_visual_learning_service.py::TestPronunciationGuide::test_pronunciation_guide_creation_minimal_fields PASSED [ 98%]
tests/test_visual_learning_service.py::TestVisualLearningServiceInitialization::test_service_initialization_with_custom_directory PASSED [ 98%]
tests/test_visual_learning_service.py::TestVisualLearningServiceInitialization::test_service_initialization_without_directory PASSED [ 98%]
tests/test_visual_learning_service.py::TestVisualLearningServiceInitialization::test_service_creates_subdirectories PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_create_grammar_flowchart_with_all_parameters PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_create_grammar_flowchart_without_learning_outcomes PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_add_flowchart_node_success PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_add_flowchart_node_without_examples PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_add_flowchart_node_to_nonexistent_flowchart PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_connect_flowchart_nodes_success PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_connect_flowchart_nodes_duplicate_connection PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_connect_flowchart_nodes_nonexistent_flowchart PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_connect_flowchart_nodes_from_node_not_found PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_connect_flowchart_nodes_loop_continues PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_connect_flowchart_nodes_next_node_already_exists PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_get_flowchart_success PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_get_flowchart_nonexistent PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_get_flowchart_with_json_error PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_list_flowcharts_no_filters PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_list_flowcharts_filter_by_language PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_list_flowcharts_filter_by_concept PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_list_flowcharts_filter_by_language_and_concept PASSED [ 98%]
tests/test_visual_learning_service.py::TestGrammarFlowchartOperations::test_list_flowcharts_with_json_error PASSED [ 98%]
tests/test_visual_learning_service.py::TestProgressVisualizationOperations::test_create_progress_visualization_with_all_parameters PASSED [ 98%]
tests/test_visual_learning_service.py::TestProgressVisualizationOperations::test_create_progress_visualization_without_color_scheme PASSED [ 98%]
tests/test_visual_learning_service.py::TestProgressVisualizationOperations::test_get_user_progress_visualizations_no_filter PASSED [ 98%]
tests/test_visual_learning_service.py::TestProgressVisualizationOperations::test_get_user_progress_visualizations_with_type_filter PASSED [ 98%]
tests/test_visual_learning_service.py::TestProgressVisualizationOperations::test_get_user_progress_visualizations_with_json_error PASSED [ 98%]
tests/test_visual_learning_service.py::TestVocabularyVisualOperations::test_create_vocabulary_visual_with_all_parameters PASSED [ 98%]
tests/test_visual_learning_service.py::TestVocabularyVisualOperations::test_create_vocabulary_visual_without_optional_parameters PASSED [ 98%]
tests/test_visual_learning_service.py::TestVocabularyVisualOperations::test_get_vocabulary_visuals_no_filters PASSED [ 98%]
tests/test_visual_learning_service.py::TestVocabularyVisualOperations::test_get_vocabulary_visuals_filter_by_language PASSED [ 99%]
tests/test_visual_learning_service.py::TestVocabularyVisualOperations::test_get_vocabulary_visuals_filter_by_visualization_type PASSED [ 99%]
tests/test_visual_learning_service.py::TestVocabularyVisualOperations::test_get_vocabulary_visuals_filter_by_language_and_type PASSED [ 99%]
tests/test_visual_learning_service.py::TestVocabularyVisualOperations::test_get_vocabulary_visuals_with_json_error PASSED [ 99%]
tests/test_visual_learning_service.py::TestPronunciationGuideOperations::test_create_pronunciation_guide_with_all_parameters PASSED [ 99%]
tests/test_visual_learning_service.py::TestPronunciationGuideOperations::test_create_pronunciation_guide_without_optional_parameters PASSED [ 99%]
tests/test_visual_learning_service.py::TestPronunciationGuideOperations::test_get_pronunciation_guides_no_filters PASSED [ 99%]
tests/test_visual_learning_service.py::TestPronunciationGuideOperations::test_get_pronunciation_guides_filter_by_language PASSED [ 99%]
tests/test_visual_learning_service.py::TestPronunciationGuideOperations::test_get_pronunciation_guides_filter_by_difficulty PASSED [ 99%]
tests/test_visual_learning_service.py::TestPronunciationGuideOperations::test_get_pronunciation_guides_filter_by_language_and_difficulty PASSED [ 99%]
tests/test_visual_learning_service.py::TestPronunciationGuideOperations::test_get_pronunciation_guides_with_json_error PASSED [ 99%]
tests/test_visual_learning_service.py::TestGlobalInstance::test_get_visual_learning_service_creates_instance PASSED [ 99%]
tests/test_visual_learning_service.py::TestGlobalInstance::test_get_visual_learning_service_returns_same_instance PASSED [ 99%]
tests/test_voice_validation.py::TestVoiceInstallation::test_voices_directory_exists PASSED [ 99%]
tests/test_voice_validation.py::TestVoiceInstallation::test_all_voice_models_present PASSED [ 99%]
tests/test_voice_validation.py::TestVoiceInstallation::test_all_voice_configs_present PASSED [ 99%]
tests/test_voice_validation.py::TestVoiceInstallation::test_voice_model_sizes PASSED [ 99%]
tests/test_voice_validation.py::TestServiceVoiceLoading::test_service_loads_voices PASSED [ 99%]
tests/test_voice_validation.py::TestServiceVoiceLoading::test_service_voice_info_complete PASSED [ 99%]
tests/test_voice_validation.py::TestServiceVoiceLoading::test_service_language_mappings PASSED [ 99%]
tests/test_voice_validation.py::TestEnglishVoices::test_en_US_lessac_medium PASSED [ 99%]
tests/test_voice_validation.py::TestGermanVoices::test_de_DE_thorsten_medium PASSED [ 99%]
tests/test_voice_validation.py::TestSpanishVoices::test_es_AR_daniela_high PASSED [ 99%]
tests/test_voice_validation.py::TestSpanishVoices::test_es_ES_davefx_medium PASSED [ 99%]
tests/test_voice_validation.py::TestSpanishVoices::test_es_MX_ald_medium PASSED [ 99%]
tests/test_voice_validation.py::TestSpanishVoices::test_es_MX_claude_high PASSED [ 99%]
tests/test_voice_validation.py::TestFrenchVoices::test_fr_FR_siwis_medium PASSED [ 99%]
tests/test_voice_validation.py::TestItalianVoices::test_it_IT_paola_medium PASSED [ 99%]
tests/test_voice_validation.py::TestItalianVoices::test_it_IT_riccardo_x_low PASSED [ 99%]
tests/test_voice_validation.py::TestPortugueseVoices::test_pt_BR_faber_medium PASSED [ 99%]
tests/test_voice_validation.py::TestChineseVoices::test_zh_CN_huayan_medium PASSED [ 99%]
tests/test_voice_validation.py::TestLanguageVoiceSelection::test_english_language_selection PASSED [ 99%]
tests/test_voice_validation.py::TestLanguageVoiceSelection::test_spanish_language_selection PASSED [ 99%]
tests/test_voice_validation.py::TestLanguageVoiceSelection::test_german_language_selection PASSED [ 99%]
tests/test_voice_validation.py::TestLanguageVoiceSelection::test_french_language_selection PASSED [ 99%]
tests/test_voice_validation.py::TestLanguageVoiceSelection::test_italian_language_selection PASSED [ 99%]
tests/test_voice_validation.py::TestLanguageVoiceSelection::test_portuguese_language_selection PASSED [ 99%]
tests/test_voice_validation.py::TestLanguageVoiceSelection::test_chinese_language_selection PASSED [ 99%]
tests/test_voice_validation.py::TestAudioQuality::test_audio_format_consistency PASSED [ 99%]
tests/test_voice_validation.py::TestAudioQuality::test_audio_length_correlation PASSED [ 99%]
tests/test_voice_validation.py::TestAudioQuality::test_audio_minimum_size PASSED [ 99%]
tests/test_voice_validation.py::TestServiceInformation::test_service_info_complete PASSED [ 99%]
tests/test_voice_validation.py::TestServiceInformation::test_service_features_listed PASSED [100%]

=================================== FAILURES ===================================
_______________ TestAIRouterE2E.test_router_real_multi_language ________________

self = <tests.e2e.test_ai_e2e.TestAIRouterE2E object at 0x1122ba7e0>

    @pytest.mark.asyncio
    async def test_router_real_multi_language(self):
        """Test router handles multiple languages with real APIs"""
        from unittest.mock import Mock, patch
    
        from app.services.ai_router import EnhancedAIRouter
        from app.services.budget_manager import BudgetAlert
    
        # Mock budget manager to allow cloud provider selection
        class MockBudgetStatus:
            total_budget = 100.0
            used_budget = 0.0
            remaining_budget = 100.0
            percentage_used = 0.0
            alert_level = BudgetAlert.GREEN
            is_over_budget = False
            days_remaining = 30
            projected_monthly_cost = 0.0
    
        mock_budget = Mock()
        mock_budget.get_current_budget_status.return_value = MockBudgetStatus()
        mock_budget.get_status.return_value = MockBudgetStatus()
        mock_budget.get_remaining_budget.return_value = 100.0
    
        with patch("app.services.ai_router.budget_manager", mock_budget):
            router = EnhancedAIRouter()
    
            languages_tested = []
    
            # Test English
            if os.getenv("ANTHROPIC_API_KEY"):
                try:
                    selection_en = await router.select_provider(
                        language="en", use_case="conversation"
                    )
                    if selection_en.service:
                        response = await selection_en.service.generate_response(
                            messages=[{"role": "user", "content": "Hi"}],
                            message="Hi",
                            language="en",
                        )
                        assert response.content is not None
                        languages_tested.append("en")
                except Exception as e:
                    # May fail if budget exceeded or Ollama unavailable - acceptable for E2E
                    print(f"English test skipped: {e}")
    
            # Test French
            if os.getenv("MISTRAL_API_KEY"):
                try:
                    selection_fr = await router.select_provider(
                        language="fr", use_case="conversation"
                    )
                    if selection_fr.service:
                        response = await selection_fr.service.generate_response(
                            messages=[{"role": "user", "content": "Bonjour"}],
                            message="Bonjour",
                            language="fr",
                        )
                        assert response.content is not None
                        languages_tested.append("fr")
                except Exception as e:
                    # May fail if budget exceeded or Ollama unavailable - acceptable for E2E
                    print(f"French test skipped: {e}")
    
            # Test Chinese
            if os.getenv("DASHSCOPE_API_KEY"):
                try:
                    selection_zh = await router.select_provider(
                        language="zh", use_case="conversation"
                    )
                    if selection_zh.service:
                        response = await selection_zh.service.generate_response(
                            messages=[{"role": "user", "content": ""}],
                            message="",
                            language="zh",
                        )
                        assert response.content is not None
                        languages_tested.append("zh")
                except Exception as e:
                    # May fail if budget exceeded or Ollama unavailable - acceptable for E2E
                    print(f"Chinese test skipped: {e}")
    
>           assert len(languages_tested) > 0, "No languages could be tested"
E           AssertionError: No languages could be tested
E           assert 0 > 0
E            +  where 0 = len([])

tests/e2e/test_ai_e2e.py:267: AssertionError
----------------------------- Captured stdout call -----------------------------
English test skipped: No AI providers available. Cloud providers unavailable and Ollama not running. Please start Ollama or check your internet connection.
French test skipped: No AI providers available. Cloud providers unavailable and Ollama not running. Please start Ollama or check your internet connection.
______ TestAIRouterIntegration.test_provider_selection_based_on_language _______

self = <tests.integration.test_ai_integration.TestAIRouterIntegration object at 0x16a2787a0>

    @pytest.mark.asyncio
    async def test_provider_selection_based_on_language(self):
        """Test that router selects appropriate provider for language"""
        router = EnhancedAIRouter()
    
        # Mock the actual service generate methods to avoid external calls
        with (
            patch(
                "app.services.claude_service.ClaudeService.generate_response",
                new_callable=AsyncMock,
            ) as mock_claude,
            patch(
                "app.services.mistral_service.MistralService.generate_response",
                new_callable=AsyncMock,
            ) as mock_mistral,
            patch(
                "app.services.qwen_service.QwenService.generate_response",
                new_callable=AsyncMock,
            ) as mock_qwen,
        ):
            # Configure mocks
            mock_claude.return_value = Mock(content="Claude response", cost=0.01)
            mock_mistral.return_value = Mock(content="Mistral response", cost=0.01)
            mock_qwen.return_value = Mock(content="Qwen response", cost=0.01)
    
            # Test English - should select Claude or available provider
>           selection = await router.select_provider(
                language="en", use_case="conversation"
            )

tests/integration/test_ai_integration.py:56: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
app/services/ai_router.py:260: in select_provider
    return await self._select_local_provider(language, "budget_exceeded")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <app.services.ai_router.EnhancedAIRouter object at 0x3328be090>
language = 'en', reason = 'budget_exceeded'

    async def _select_local_provider(
        self, language: str, reason: str
    ) -> ProviderSelection:
        """Select local Ollama provider as fallback"""
    
        # Check if Ollama is available
        if "ollama" not in self.providers:
            self.register_provider("ollama", ollama_service)
    
        ollama_available = await ollama_service.check_availability()
    
        if not ollama_available:
>           raise Exception(
                "No AI providers available. Cloud providers unavailable and Ollama not running. "
                "Please start Ollama or check your internet connection."
            )
E           Exception: No AI providers available. Cloud providers unavailable and Ollama not running. Please start Ollama or check your internet connection.

app/services/ai_router.py:293: Exception
----------------------------- Captured stdout call -----------------------------
2025-12-06 22:10:52,788 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-06 22:10:52,797 INFO sqlalchemy.engine.Engine SELECT sum(api_usage.estimated_cost) AS sum_1 
FROM api_usage 
WHERE api_usage.created_at >= ?
2025-12-06 22:10:52,797 INFO sqlalchemy.engine.Engine [generated in 0.00034s] ('2025-12-01 00:00:00.000000',)
2025-12-06 22:10:52,800 INFO sqlalchemy.engine.Engine ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT sum(api_usage.estimated_cost) AS sum_1 
FROM api_usage 
WHERE api_usage.created_at >= ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00034s] ('2025-12-01 00:00:00.000000',)
INFO     sqlalchemy.engine.Engine:base.py:2692 ROLLBACK
_______ TestAIRouterIntegration.test_router_failover_when_primary_fails ________

self = <tests.integration.test_ai_integration.TestAIRouterIntegration object at 0x16d30b6e0>

    @pytest.mark.asyncio
    async def test_router_failover_when_primary_fails(self):
        """Test that router falls back to secondary provider on failure"""
        router = EnhancedAIRouter()
    
        # Simulate first provider failing, second succeeding
        with (
            patch(
                "app.services.claude_service.ClaudeService.generate_response",
                new_callable=AsyncMock,
            ) as mock_claude,
            patch(
                "app.services.mistral_service.MistralService.generate_response",
                new_callable=AsyncMock,
            ) as mock_mistral,
        ):
            # First provider fails
            mock_claude.side_effect = Exception("Claude API unavailable")
    
            # Second provider succeeds
            mock_mistral.return_value = Mock(content="Mistral fallback", cost=0.01)
    
            # Router should handle failover gracefully
>           selection = await router.select_provider(
                language="en", use_case="conversation"
            )

tests/integration/test_ai_integration.py:92: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
app/services/ai_router.py:260: in select_provider
    return await self._select_local_provider(language, "budget_exceeded")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <app.services.ai_router.EnhancedAIRouter object at 0x16b6eeed0>
language = 'en', reason = 'budget_exceeded'

    async def _select_local_provider(
        self, language: str, reason: str
    ) -> ProviderSelection:
        """Select local Ollama provider as fallback"""
    
        # Check if Ollama is available
        if "ollama" not in self.providers:
            self.register_provider("ollama", ollama_service)
    
        ollama_available = await ollama_service.check_availability()
    
        if not ollama_available:
>           raise Exception(
                "No AI providers available. Cloud providers unavailable and Ollama not running. "
                "Please start Ollama or check your internet connection."
            )
E           Exception: No AI providers available. Cloud providers unavailable and Ollama not running. Please start Ollama or check your internet connection.

app/services/ai_router.py:293: Exception
----------------------------- Captured stdout call -----------------------------
2025-12-06 22:10:52,813 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-06 22:10:52,813 INFO sqlalchemy.engine.Engine SELECT sum(api_usage.estimated_cost) AS sum_1 
FROM api_usage 
WHERE api_usage.created_at >= ?
2025-12-06 22:10:52,813 INFO sqlalchemy.engine.Engine [cached since 0.01653s ago] ('2025-12-01 00:00:00.000000',)
2025-12-06 22:10:52,813 INFO sqlalchemy.engine.Engine ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT sum(api_usage.estimated_cost) AS sum_1 
FROM api_usage 
WHERE api_usage.created_at >= ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.01653s ago] ('2025-12-01 00:00:00.000000',)
INFO     sqlalchemy.engine.Engine:base.py:2692 ROLLBACK
______ TestConversationAIIntegration.test_chat_with_ai_router_integration ______

self = <tests.integration.test_ai_integration.TestConversationAIIntegration object at 0x16d30b890>

    @pytest.mark.asyncio
    async def test_chat_with_ai_router_integration(self):
        """Test chat endpoint integrates correctly with AI router"""
        from fastapi.testclient import TestClient
    
        from app.core.security import require_auth
        from app.database.config import get_primary_db_session
        from app.main import app
        from app.models.simple_user import SimpleUser
    
        # Create test user
        test_user = SimpleUser(
            id=1,
            user_id="testuser",
            username="testuser",
            email="test@example.com",
            role="parent",
        )
    
        # Mock dependencies
        mock_db = Mock()
        app.dependency_overrides[require_auth] = lambda: test_user
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
    
        # Mock AI services but NOT the router (test real routing logic)
        with patch(
            "app.services.claude_service.ClaudeService.generate_response",
            new_callable=AsyncMock,
        ) as mock_claude:
            mock_claude.return_value = Mock(
                content="Hello! I'm your AI tutor.", cost=0.02
            )
    
            client = TestClient(app)
            response = client.post(
                "/api/v1/conversations/chat",
                json={"message": "Hello", "language": "en-claude", "use_speech": False},
            )
    
            assert response.status_code == 200
            data = response.json()
    
            # Verify AI service was actually called through router
>           assert mock_claude.called
E           AssertionError: assert False
E            +  where False = <AsyncMock name='generate_response' id='6098189632'>.called

tests/integration/test_ai_integration.py:146: AssertionError
----------------------------- Captured stdout call -----------------------------
2025-12-06 22:10:52,826 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-06 22:10:52,827 INFO sqlalchemy.engine.Engine SELECT sum(api_usage.estimated_cost) AS sum_1 
FROM api_usage 
WHERE api_usage.created_at >= ?
2025-12-06 22:10:52,827 INFO sqlalchemy.engine.Engine [cached since 0.03012s ago] ('2025-12-01 00:00:00.000000',)
2025-12-06 22:10:52,827 INFO sqlalchemy.engine.Engine ROLLBACK
AI Service Error: No AI providers available. Cloud providers unavailable and Ollama not running. Please start Ollama or check your internet connection.
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT sum(api_usage.estimated_cost) AS sum_1 
FROM api_usage 
WHERE api_usage.created_at >= ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.03012s ago] ('2025-12-01 00:00:00.000000',)
INFO     sqlalchemy.engine.Engine:base.py:2692 ROLLBACK
________ TestSpeechProcessingIntegration.test_chat_with_tts_integration ________

self = <tests.integration.test_ai_integration.TestSpeechProcessingIntegration object at 0x16d30bcb0>

    @pytest.mark.asyncio
    async def test_chat_with_tts_integration(self):
        """Test chat integrates correctly with TTS service"""
        from fastapi.testclient import TestClient
    
        from app.core.security import require_auth
        from app.database.config import get_primary_db_session
        from app.main import app
        from app.models.simple_user import SimpleUser
    
        test_user = SimpleUser(
            id=1,
            user_id="testuser",
            username="testuser",
            email="test@example.com",
            role="parent",
        )
    
        mock_db = Mock()
        app.dependency_overrides[require_auth] = lambda: test_user
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
    
        # Mock AI service and TTS
        with (
            patch(
                "app.services.claude_service.ClaudeService.generate_response",
                new_callable=AsyncMock,
            ) as mock_claude,
            patch(
                "app.services.speech_processor.speech_processor.process_text_to_speech",
                new_callable=AsyncMock,
            ) as mock_tts,
        ):
            mock_claude.return_value = Mock(content="Hello! How are you?", cost=0.02)
    
            mock_tts_result = Mock()
            mock_tts_result.audio_data = b"fake_audio"
            mock_tts.return_value = mock_tts_result
    
            client = TestClient(app)
            response = client.post(
                "/api/v1/conversations/chat",
                json={
                    "message": "Hi",
                    "language": "en-claude",
                    "use_speech": True,  # Request TTS
                },
            )
    
            assert response.status_code == 200
            data = response.json()
    
            # Verify both AI and TTS were called
>           assert mock_claude.called
E           AssertionError: assert False
E            +  where False = <AsyncMock name='generate_response' id='6098448176'>.called

tests/integration/test_ai_integration.py:274: AssertionError
----------------------------- Captured stdout call -----------------------------
2025-12-06 22:10:52,839 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-06 22:10:52,839 INFO sqlalchemy.engine.Engine SELECT sum(api_usage.estimated_cost) AS sum_1 
FROM api_usage 
WHERE api_usage.created_at >= ?
2025-12-06 22:10:52,839 INFO sqlalchemy.engine.Engine [cached since 0.0429s ago] ('2025-12-01 00:00:00.000000',)
2025-12-06 22:10:52,840 INFO sqlalchemy.engine.Engine ROLLBACK
AI Service Error: No AI providers available. Cloud providers unavailable and Ollama not running. Please start Ollama or check your internet connection.
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT sum(api_usage.estimated_cost) AS sum_1 
FROM api_usage 
WHERE api_usage.created_at >= ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.0429s ago] ('2025-12-01 00:00:00.000000',)
INFO     sqlalchemy.engine.Engine:base.py:2692 ROLLBACK
_________________ TestRunAllTests.test_run_all_tests_all_pass __________________

self = <tests.test_ai_test_suite.TestRunAllTests object at 0x16d7220c0>
capsys = <_pytest.capture.CaptureFixture object at 0x16b8ea930>

    @pytest.mark.asyncio
    async def test_run_all_tests_all_pass(self, capsys):
        """Test run_all_tests when all tests pass"""
        suite = AIServicesTestSuite()
    
        # Mock all test methods to succeed
        async def mock_test():
            pass
    
        for i, (test_name, _) in enumerate(
            [
                ("AI Service Base", None),
                ("Budget Manager", None),
                ("Ollama Service", None),
                ("Conversation Manager", None),
                ("Speech Processor", None),
                ("AI Router Integration", None),
                ("Conversation Flow", None),
                ("Multi-Language Support", None),
                ("Performance Test", None),
                ("End-to-End Learning", None),
                ("Budget Fallback", None),
                ("Cost Estimation", None),
            ]
        ):
            method_name = (
                f"test_{test_name.lower().replace(' ', '_').replace('-', '_')}"
            )
            setattr(suite, method_name, mock_test)
    
        result = await suite.run_all_tests()
    
        assert result["total_tests"] == 12
>       assert result["passed"] == 12
E       assert 11 == 12

tests/test_ai_test_suite.py:216: AssertionError
----------------------------- Captured stdout call -----------------------------
2025-12-06 22:10:55,214 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-06 22:10:55,215 INFO sqlalchemy.engine.Engine SELECT conversations.id AS conversations_id, conversations.conversation_id AS conversations_conversation_id, conversations.user_id AS conversations_user_id, conversations.title AS conversations_title, conversations.language AS conversations_language, conversations.ai_model AS conversations_ai_model, conversations.context_data AS conversations_context_data, conversations.is_active AS conversations_is_active, conversations.message_count AS conversations_message_count, conversations.total_tokens AS conversations_total_tokens, conversations.estimated_cost AS conversations_estimated_cost, conversations.started_at AS conversations_started_at, conversations.last_message_at AS conversations_last_message_at, conversations.ended_at AS conversations_ended_at 
FROM conversations 
WHERE conversations.conversation_id = ?
 LIMIT ? OFFSET ?
2025-12-06 22:10:55,215 INFO sqlalchemy.engine.Engine [generated in 0.00012s] ('abf2f313-1bed-4f0a-93ee-3e7cd77a3e80', 1, 0)
2025-12-06 22:10:55,217 INFO sqlalchemy.engine.Engine INSERT INTO conversations (conversation_id, user_id, title, language, ai_model, context_data, is_active, message_count, total_tokens, estimated_cost, started_at, last_message_at, ended_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-06 22:10:55,217 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('abf2f313-1bed-4f0a-93ee-3e7cd77a3e80', 1, 'Travel', 'fr', None, '{"learning_focus": "vocabulary", "current_topic": "Travel", "vocabulary_level": "intermediate", "learning_goals": [], "is_scenario_based": false, "scenario_id": null, "scenario_progress_id": null, "scenario_phase": null}', 1, 0, 0, 0.0, '2025-12-06 22:10:55.213523', '2025-12-06 22:10:55.213530', None)
2025-12-06 22:10:55,218 INFO sqlalchemy.engine.Engine COMMIT
2025-12-06 22:10:55,218 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-06 22:10:55,218 INFO sqlalchemy.engine.Engine SELECT conversations.id AS conversations_id, conversations.conversation_id AS conversations_conversation_id, conversations.user_id AS conversations_user_id, conversations.title AS conversations_title, conversations.language AS conversations_language, conversations.ai_model AS conversations_ai_model, conversations.context_data AS conversations_context_data, conversations.is_active AS conversations_is_active, conversations.message_count AS conversations_message_count, conversations.total_tokens AS conversations_total_tokens, conversations.estimated_cost AS conversations_estimated_cost, conversations.started_at AS conversations_started_at, conversations.last_message_at AS conversations_last_message_at, conversations.ended_at AS conversations_ended_at 
FROM conversations 
WHERE conversations.conversation_id = ?
 LIMIT ? OFFSET ?
2025-12-06 22:10:55,218 INFO sqlalchemy.engine.Engine [cached since 0.003397s ago] ('abf2f313-1bed-4f0a-93ee-3e7cd77a3e80', 1, 0)
2025-12-06 22:10:55,219 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=? WHERE conversations.id = ?
2025-12-06 22:10:55,219 INFO sqlalchemy.engine.Engine [generated in 0.00007s] ('2025-12-06 22:10:55.218946', 807)
2025-12-06 22:10:55,220 INFO sqlalchemy.engine.Engine COMMIT
2025-12-06 22:10:55,220 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-06 22:10:55,220 INFO sqlalchemy.engine.Engine SELECT conversations.id AS conversations_id, conversations.conversation_id AS conversations_conversation_id, conversations.user_id AS conversations_user_id, conversations.title AS conversations_title, conversations.language AS conversations_language, conversations.ai_model AS conversations_ai_model, conversations.context_data AS conversations_context_data, conversations.is_active AS conversations_is_active, conversations.message_count AS conversations_message_count, conversations.total_tokens AS conversations_total_tokens, conversations.estimated_cost AS conversations_estimated_cost, conversations.started_at AS conversations_started_at, conversations.last_message_at AS conversations_last_message_at, conversations.ended_at AS conversations_ended_at 
FROM conversations 
WHERE conversations.conversation_id = ?
 LIMIT ? OFFSET ?
2025-12-06 22:10:55,220 INFO sqlalchemy.engine.Engine [cached since 0.005267s ago] ('abf2f313-1bed-4f0a-93ee-3e7cd77a3e80', 1, 0)
2025-12-06 22:10:55,223 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT conversation_messages.id AS conversation_messages_id, conversation_messages.conversation_id AS conversation_messages_conversation_id, conversation_messages.role AS conversation_messages_role, conversation_messages.content AS conversation_messages_content, conversation_messages.language AS conversation_messages_language, conversation_messages.token_count AS conversation_messages_token_count, conversation_messages.estimated_cost AS conversation_messages_estimated_cost, conversation_messages.processing_time_ms AS conversation_messages_processing_time_ms, conversation_messages.audio_url AS conversation_messages_audio_url, conversation_messages.pronunciation_score AS conversation_messages_pronunciation_score, conversation_messages.pronunciation_feedback AS conversation_messages_pronunciation_feedback, conversation_messages.sentiment_score AS conversation_messages_sentiment_score, conversation_messages.complexity_score AS conversation_messages_complexity_score, conversation_messages.vocabulary_level AS conversation_messages_vocabulary_level, conversation_messages.created_at AS conversation_messages_created_at 
FROM conversation_messages 
WHERE conversation_messages.conversation_id = ?) AS anon_1
2025-12-06 22:10:55,223 INFO sqlalchemy.engine.Engine [generated in 0.00022s] (807,)
2025-12-06 22:10:55,224 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT conversation_messages.id AS conversation_messages_id, conversation_messages.conversation_id AS conversation_messages_conversation_id, conversation_messages.role AS conversation_messages_role, conversation_messages.content AS conversation_messages_content, conversation_messages.language AS conversation_messages_language, conversation_messages.token_count AS conversation_messages_token_count, conversation_messages.estimated_cost AS conversation_messages_estimated_cost, conversation_messages.processing_time_ms AS conversation_messages_processing_time_ms, conversation_messages.audio_url AS conversation_messages_audio_url, conversation_messages.pronunciation_score AS conversation_messages_pronunciation_score, conversation_messages.pronunciation_feedback AS conversation_messages_pronunciation_feedback, conversation_messages.sentiment_score AS conversation_messages_sentiment_score, conversation_messages.complexity_score AS conversation_messages_complexity_score, conversation_messages.vocabulary_level AS conversation_messages_vocabulary_level, conversation_messages.created_at AS conversation_messages_created_at 
FROM conversation_messages 
WHERE conversation_messages.conversation_id = ?) AS anon_1
2025-12-06 22:10:55,224 INFO sqlalchemy.engine.Engine [cached since 0.001103s ago] (807,)
2025-12-06 22:10:55,225 INFO sqlalchemy.engine.Engine INSERT INTO conversation_messages (conversation_id, role, content, language, token_count, estimated_cost, processing_time_ms, audio_url, pronunciation_score, pronunciation_feedback, sentiment_score, complexity_score, vocabulary_level, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-06 22:10:55,225 INFO sqlalchemy.engine.Engine [generated in 0.00016s] (807, 'SYSTEM', "You are a helpful French language tutor. Introduce new vocabulary and reinforce word usage.\n\nLearning Context:\n- Student's level: intermediate\n-  ... (318 characters truncated) ... ntain engagement\n6. Adapt your language complexity to the student's level\n\nRemember: Be patient, encouraging, and focus on practical language use.", 'fr', 0, 0.0, 0, None, None, '{}', None, None, None, '2025-12-06 22:10:55.213569')
2025-12-06 22:10:55,226 INFO sqlalchemy.engine.Engine COMMIT
 AI Services Testing Suite
==================================================
 AI Service Base
    PASSED (0.00s)
 Budget Manager
    PASSED (0.00s)
 Ollama Service
    PASSED (0.00s)
 Conversation Manager
    PASSED (0.00s)
 Speech Processor
    PASSED (0.00s)
 AI Router Integration
    PASSED (0.00s)
 Conversation Flow
    PASSED (0.00s)
 Multi-Language Support
    PASSED (0.00s)
 Performance Test
    ERROR: No AI providers available. Cloud providers unavailable and Ollama not running. Please start Ollama or check your internet connection.
 End-to-End Learning
    PASSED (0.01s)
 Budget Fallback
    PASSED (0.00s)
 Cost Estimation
    PASSED (0.00s)

==================================================
 TEST SUMMARY
==================================================
 Passed:    11 / 12
 Failed:     0 / 12
  Skipped:    0 / 12
 Errors:     1 / 12
 Success Rate: 91.7%
  Total Time: 0.01s

 TEST SUITE PASSED!
 AI Language Tutor services are ready for production!
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT conversations.id AS conversations_id, conversations.conversation_id AS conversations_conversation_id, conversations.user_id AS conversations_user_id, conversations.title AS conversations_title, conversations.language AS conversations_language, conversations.ai_model AS conversations_ai_model, conversations.context_data AS conversations_context_data, conversations.is_active AS conversations_is_active, conversations.message_count AS conversations_message_count, conversations.total_tokens AS conversations_total_tokens, conversations.estimated_cost AS conversations_estimated_cost, conversations.started_at AS conversations_started_at, conversations.last_message_at AS conversations_last_message_at, conversations.ended_at AS conversations_ended_at 
FROM conversations 
WHERE conversations.conversation_id = ?
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00012s] ('abf2f313-1bed-4f0a-93ee-3e7cd77a3e80', 1, 0)
INFO     sqlalchemy.engine.Engine:base.py:1848 INSERT INTO conversations (conversation_id, user_id, title, language, ai_model, context_data, is_active, message_count, total_tokens, estimated_cost, started_at, last_message_at, ended_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00015s] ('abf2f313-1bed-4f0a-93ee-3e7cd77a3e80', 1, 'Travel', 'fr', None, '{"learning_focus": "vocabulary", "current_topic": "Travel", "vocabulary_level": "intermediate", "learning_goals": [], "is_scenario_based": false, "scenario_id": null, "scenario_progress_id": null, "scenario_phase": null}', 1, 0, 0, 0.0, '2025-12-06 22:10:55.213523', '2025-12-06 22:10:55.213530', None)
INFO     sqlalchemy.engine.Engine:base.py:2695 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT conversations.id AS conversations_id, conversations.conversation_id AS conversations_conversation_id, conversations.user_id AS conversations_user_id, conversations.title AS conversations_title, conversations.language AS conversations_language, conversations.ai_model AS conversations_ai_model, conversations.context_data AS conversations_context_data, conversations.is_active AS conversations_is_active, conversations.message_count AS conversations_message_count, conversations.total_tokens AS conversations_total_tokens, conversations.estimated_cost AS conversations_estimated_cost, conversations.started_at AS conversations_started_at, conversations.last_message_at AS conversations_last_message_at, conversations.ended_at AS conversations_ended_at 
FROM conversations 
WHERE conversations.conversation_id = ?
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.003397s ago] ('abf2f313-1bed-4f0a-93ee-3e7cd77a3e80', 1, 0)
INFO     sqlalchemy.engine.Engine:base.py:1848 UPDATE conversations SET last_message_at=? WHERE conversations.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00007s] ('2025-12-06 22:10:55.218946', 807)
INFO     sqlalchemy.engine.Engine:base.py:2695 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT conversations.id AS conversations_id, conversations.conversation_id AS conversations_conversation_id, conversations.user_id AS conversations_user_id, conversations.title AS conversations_title, conversations.language AS conversations_language, conversations.ai_model AS conversations_ai_model, conversations.context_data AS conversations_context_data, conversations.is_active AS conversations_is_active, conversations.message_count AS conversations_message_count, conversations.total_tokens AS conversations_total_tokens, conversations.estimated_cost AS conversations_estimated_cost, conversations.started_at AS conversations_started_at, conversations.last_message_at AS conversations_last_message_at, conversations.ended_at AS conversations_ended_at 
FROM conversations 
WHERE conversations.conversation_id = ?
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.005267s ago] ('abf2f313-1bed-4f0a-93ee-3e7cd77a3e80', 1, 0)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT count(*) AS count_1 
FROM (SELECT conversation_messages.id AS conversation_messages_id, conversation_messages.conversation_id AS conversation_messages_conversation_id, conversation_messages.role AS conversation_messages_role, conversation_messages.content AS conversation_messages_content, conversation_messages.language AS conversation_messages_language, conversation_messages.token_count AS conversation_messages_token_count, conversation_messages.estimated_cost AS conversation_messages_estimated_cost, conversation_messages.processing_time_ms AS conversation_messages_processing_time_ms, conversation_messages.audio_url AS conversation_messages_audio_url, conversation_messages.pronunciation_score AS conversation_messages_pronunciation_score, conversation_messages.pronunciation_feedback AS conversation_messages_pronunciation_feedback, conversation_messages.sentiment_score AS conversation_messages_sentiment_score, conversation_messages.complexity_score AS conversation_messages_complexity_score, conversation_messages.vocabulary_level AS conversation_messages_vocabulary_level, conversation_messages.created_at AS conversation_messages_created_at 
FROM conversation_messages 
WHERE conversation_messages.conversation_id = ?) AS anon_1
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00022s] (807,)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT count(*) AS count_1 
FROM (SELECT conversation_messages.id AS conversation_messages_id, conversation_messages.conversation_id AS conversation_messages_conversation_id, conversation_messages.role AS conversation_messages_role, conversation_messages.content AS conversation_messages_content, conversation_messages.language AS conversation_messages_language, conversation_messages.token_count AS conversation_messages_token_count, conversation_messages.estimated_cost AS conversation_messages_estimated_cost, conversation_messages.processing_time_ms AS conversation_messages_processing_time_ms, conversation_messages.audio_url AS conversation_messages_audio_url, conversation_messages.pronunciation_score AS conversation_messages_pronunciation_score, conversation_messages.pronunciation_feedback AS conversation_messages_pronunciation_feedback, conversation_messages.sentiment_score AS conversation_messages_sentiment_score, conversation_messages.complexity_score AS conversation_messages_complexity_score, conversation_messages.vocabulary_level AS conversation_messages_vocabulary_level, conversation_messages.created_at AS conversation_messages_created_at 
FROM conversation_messages 
WHERE conversation_messages.conversation_id = ?) AS anon_1
INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.001103s ago] (807,)
INFO     sqlalchemy.engine.Engine:base.py:1848 INSERT INTO conversation_messages (conversation_id, role, content, language, token_count, estimated_cost, processing_time_ms, audio_url, pronunciation_score, pronunciation_feedback, sentiment_score, complexity_score, vocabulary_level, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00016s] (807, 'SYSTEM', "You are a helpful French language tutor. Introduce new vocabulary and reinforce word usage.\n\nLearning Context:\n- Student's level: intermediate\n-  ... (318 characters truncated) ... ntain engagement\n6. Adapt your language complexity to the student's level\n\nRemember: Be patient, encouraging, and focus on practical language use.", 'fr', 0, 0.0, 0, None, None, '{}', None, None, None, '2025-12-06 22:10:55.213569')
INFO     sqlalchemy.engine.Engine:base.py:2695 COMMIT
______________ TestGetScenarioEndpoint.test_get_scenario_success _______________

self = <tests.test_api_scenario_management_integration.TestGetScenarioEndpoint object at 0x30be30b60>
client = <starlette.testclient.TestClient object at 0x3356a6540>
mock_db = <Mock id='13781094608'>
admin_user = <app.models.simple_user.SimpleUser object at 0x3356afd70>
mock_scenario_manager = <AsyncMock id='13781092544'>
sample_scenario = ConversationScenario(scenario_id='test_scenario_1', name='Test Restaurant Scenario', category=<ScenarioCategory.RESTAU..."casual"}', learning_goals=['Order food', 'Ask questions', 'Request the bill'], learning_outcomes=[], prerequisites=[])

    def test_get_scenario_success(
        self, client, mock_db, admin_user, mock_scenario_manager, sample_scenario
    ):
        """Test getting a scenario by ID"""
        mock_scenario_manager.get_scenario.return_value = sample_scenario
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.get(
                "/api/admin/scenario-management/scenarios/test_scenario_1"
            )
    
        app.dependency_overrides.clear()
    
>       assert response.status_code == 200
E       assert 500 == 200
E        +  where 500 = <Response [500 Internal Server Error]>.status_code

tests/test_api_scenario_management_integration.py:355: AssertionError
------------------------------ Captured log call -------------------------------
ERROR    app.api.scenario_management:scenario_management.py:325 Error getting scenario test_scenario_1: 9 validation errors for ScenarioModel
scenario_id
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get...io_id' id='13779569168'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
name
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get....name' id='13781249984'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
category
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get...value' id='13781405184'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
difficulty
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get...value' id='13781412864'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
description
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get...ption' id='13781416704'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
user_role
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get...value' id='13815109952'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
ai_role
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get...value' id='13781091776'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
setting
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get...tting' id='13781101520'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
cultural_context
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get...ntext' id='13781070336'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
_____________ TestGetScenarioEndpoint.test_get_scenario_not_found ______________

self = <tests.test_api_scenario_management_integration.TestGetScenarioEndpoint object at 0x30be30dd0>
client = <starlette.testclient.TestClient object at 0x335402ab0>
mock_db = <Mock id='13779572336'>
admin_user = <app.models.simple_user.SimpleUser object at 0x335538c20>
mock_scenario_manager = <AsyncMock id='13779569456'>

    def test_get_scenario_not_found(
        self, client, mock_db, admin_user, mock_scenario_manager
    ):
        """Test getting a non-existent scenario"""
        mock_scenario_manager.get_scenario.return_value = None
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.get(
                "/api/admin/scenario-management/scenarios/nonexistent"
            )
    
        app.dependency_overrides.clear()
    
>       assert response.status_code == 404
E       assert 500 == 404
E        +  where 500 = <Response [500 Internal Server Error]>.status_code

tests/test_api_scenario_management_integration.py:379: AssertionError
------------------------------ Captured log call -------------------------------
ERROR    app.api.scenario_management:scenario_management.py:325 Error getting scenario nonexistent: 9 validation errors for ScenarioModel
scenario_id
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get...io_id' id='13080854448'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
name
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get....name' id='13779498816'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
category
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get...value' id='13777124672'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
difficulty
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get...value' id='13815116528'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
description
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get...ption' id='13815448112'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
user_role
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get...value' id='13815455792'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
ai_role
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get...value' id='13815463472'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
setting
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get...tting' id='13815418272'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
cultural_context
  Input should be a valid string [type=string_type, input_value=<AsyncMock name='mock.get...ntext' id='13815445024'>, input_type=AsyncMock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
___________ TestCreateScenarioEndpoint.test_create_scenario_success ____________

self = <tests.test_api_scenario_management_integration.TestCreateScenarioEndpoint object at 0x30be310a0>
client = <starlette.testclient.TestClient object at 0x335436600>
mock_db = <Mock id='13779995824'>
admin_user = <app.models.simple_user.SimpleUser object at 0x30bd76720>
mock_scenario_manager = <AsyncMock id='13083569296'>
sample_scenario = ConversationScenario(scenario_id='test_scenario_1', name='Test Restaurant Scenario', category=<ScenarioCategory.RESTAU..."casual"}', learning_goals=['Order food', 'Ask questions', 'Request the bill'], learning_outcomes=[], prerequisites=[])

    def test_create_scenario_success(
        self, client, mock_db, admin_user, mock_scenario_manager, sample_scenario
    ):
        """Test creating a new scenario"""
        mock_scenario_manager.save_scenario.return_value = sample_scenario
    
        create_data = {
            "name": "Test Restaurant Scenario",
            "category": "restaurant",
            "difficulty": "beginner",
            "user_role": "customer",
            "ai_role": "service_provider",
            "context_setting": "A busy Italian restaurant in Rome",
            "learning_objectives": ["Order food", "Ask questions"],
            "success_criteria": ["Complete order"],
            "target_language": "Italian",
            "estimated_duration_minutes": 15,
            "vocabulary_focus": ["menu", "pasta"],
            "cultural_context": "Italian dining customs",
            "phases": [
                {
                    "phase_id": "phase1",
                    "name": "Greeting Phase",
                    "description": "Initial greeting and seating",
                    "expected_duration_minutes": 3,
                    "key_vocabulary": ["hello", "welcome"],
                    "essential_phrases": ["Buongiorno"],
                    "learning_objectives": ["Greet the staff"],
                }
            ],
        }
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.post(
                "/api/admin/scenario-management/scenarios",
                json=create_data,
            )
    
        app.dependency_overrides.clear()
    
>       assert response.status_code == 201
E       assert 401 == 201
E        +  where 401 = <Response [401 Unauthorized]>.status_code

tests/test_api_scenario_management_integration.py:436: AssertionError
_______ TestCreateScenarioEndpoint.test_create_scenario_validation_error _______

self = <tests.test_api_scenario_management_integration.TestCreateScenarioEndpoint object at 0x30be31310>
client = <starlette.testclient.TestClient object at 0x33775d400>
mock_db = <Mock id='13815369216'>
admin_user = <app.models.simple_user.SimpleUser object at 0x33775cb90>
mock_scenario_manager = <AsyncMock id='13815368544'>

    def test_create_scenario_validation_error(
        self, client, mock_db, admin_user, mock_scenario_manager
    ):
        """Test creating a scenario with invalid data"""
        invalid_data = {
            "name": "Test",
            # Missing required fields
        }
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.post(
                "/api/admin/scenario-management/scenarios",
                json=invalid_data,
            )
    
        app.dependency_overrides.clear()
    
>       assert response.status_code == 422  # Validation error
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       assert 401 == 422
E        +  where 401 = <Response [401 Unauthorized]>.status_code

tests/test_api_scenario_management_integration.py:465: AssertionError
___________ TestUpdateScenarioEndpoint.test_update_scenario_success ____________

self = <tests.test_api_scenario_management_integration.TestUpdateScenarioEndpoint object at 0x30be315b0>
client = <starlette.testclient.TestClient object at 0x3377628a0>
mock_db = <Mock id='13815395920'>
admin_user = <app.models.simple_user.SimpleUser object at 0x337763470>
mock_scenario_manager = <AsyncMock id='13815395728'>
sample_scenario = ConversationScenario(scenario_id='test_scenario_1', name='Test Restaurant Scenario', category=<ScenarioCategory.RESTAU..."casual"}', learning_goals=['Order food', 'Ask questions', 'Request the bill'], learning_outcomes=[], prerequisites=[])

    def test_update_scenario_success(
        self, client, mock_db, admin_user, mock_scenario_manager, sample_scenario
    ):
        """Test updating an existing scenario"""
        mock_scenario_manager.get_scenario.return_value = sample_scenario
        mock_scenario_manager.update_scenario.return_value = sample_scenario
    
        update_data = {
            "name": "Updated Restaurant Scenario",
            "difficulty": "intermediate",
        }
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.put(
                "/api/admin/scenario-management/scenarios/test_scenario_1",
                json=update_data,
            )
    
        app.dependency_overrides.clear()
    
>       assert response.status_code == 200
E       assert 401 == 200
E        +  where 401 = <Response [401 Unauthorized]>.status_code

tests/test_api_scenario_management_integration.py:501: AssertionError
__________ TestUpdateScenarioEndpoint.test_update_scenario_not_found ___________

self = <tests.test_api_scenario_management_integration.TestUpdateScenarioEndpoint object at 0x30be31820>
client = <starlette.testclient.TestClient object at 0x337725280>
mock_db = <Mock id='13815150496'>
admin_user = <app.models.simple_user.SimpleUser object at 0x337727620>
mock_scenario_manager = <AsyncMock id='13815145360'>

    def test_update_scenario_not_found(
        self, client, mock_db, admin_user, mock_scenario_manager
    ):
        """Test updating a non-existent scenario"""
        mock_scenario_manager.get_scenario.return_value = None
    
        update_data = {"name": "Updated Name"}
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.put(
                "/api/admin/scenario-management/scenarios/nonexistent",
                json=update_data,
            )
    
        app.dependency_overrides.clear()
    
>       assert response.status_code == 404
E       assert 401 == 404
E        +  where 401 = <Response [401 Unauthorized]>.status_code

tests/test_api_scenario_management_integration.py:525: AssertionError
_________ TestUpdateScenarioEndpoint.test_update_scenario_with_phases __________

self = <tests.test_api_scenario_management_integration.TestUpdateScenarioEndpoint object at 0x30be31a90>
client = <starlette.testclient.TestClient object at 0x33776d670>
mock_db = <Mock id='13815444064'>
admin_user = <app.models.simple_user.SimpleUser object at 0x33776fad0>
mock_scenario_manager = <AsyncMock id='13815439744'>
sample_scenario = ConversationScenario(scenario_id='test_scenario_1', name='Test Restaurant Scenario', category=<ScenarioCategory.RESTAU..."casual"}', learning_goals=['Order food', 'Ask questions', 'Request the bill'], learning_outcomes=[], prerequisites=[])

    def test_update_scenario_with_phases(
        self, client, mock_db, admin_user, mock_scenario_manager, sample_scenario
    ):
        """Test updating scenario phases"""
        mock_scenario_manager.get_scenario.return_value = sample_scenario
        mock_scenario_manager.update_scenario.return_value = sample_scenario
    
        update_data = {
            "phases": [
                {
                    "phase_id": "phase1",
                    "name": "Updated Phase",
                    "description": "Updated greeting phase",
                    "expected_duration_minutes": 5,
                    "key_vocabulary": ["new", "words"],
                    "essential_phrases": ["Ciao"],
                    "learning_objectives": ["New objective"],
                }
            ]
        }
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.put(
                "/api/admin/scenario-management/scenarios/test_scenario_1",
                json=update_data,
            )
    
        app.dependency_overrides.clear()
    
>       assert response.status_code == 200
E       assert 401 == 200
E        +  where 401 = <Response [401 Unauthorized]>.status_code

tests/test_api_scenario_management_integration.py:561: AssertionError
___________ TestDeleteScenarioEndpoint.test_delete_scenario_success ____________

self = <tests.test_api_scenario_management_integration.TestDeleteScenarioEndpoint object at 0x30be31d90>
client = <starlette.testclient.TestClient object at 0x33771faa0>
mock_db = <Mock id='13815115952'>
admin_user = <app.models.simple_user.SimpleUser object at 0x33776e0f0>
mock_scenario_manager = <AsyncMock id='13815437968'>
sample_scenario = ConversationScenario(scenario_id='test_scenario_1', name='Test Restaurant Scenario', category=<ScenarioCategory.RESTAU..."casual"}', learning_goals=['Order food', 'Ask questions', 'Request the bill'], learning_outcomes=[], prerequisites=[])

    def test_delete_scenario_success(
        self, client, mock_db, admin_user, mock_scenario_manager, sample_scenario
    ):
        """Test deleting a scenario"""
        mock_scenario_manager.get_scenario.return_value = sample_scenario
        mock_scenario_manager.delete_scenario.return_value = True
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.delete(
                "/api/admin/scenario-management/scenarios/test_scenario_1"
            )
    
        app.dependency_overrides.clear()
    
>       assert response.status_code == 200
E       assert 401 == 200
E        +  where 401 = <Response [401 Unauthorized]>.status_code

tests/test_api_scenario_management_integration.py:591: AssertionError
__________ TestDeleteScenarioEndpoint.test_delete_scenario_not_found ___________

self = <tests.test_api_scenario_management_integration.TestDeleteScenarioEndpoint object at 0x30be32000>
client = <starlette.testclient.TestClient object at 0x335410e00>
mock_db = <Mock id='13081460864'>
admin_user = <app.models.simple_user.SimpleUser object at 0x30bb76e10>
mock_scenario_manager = <AsyncMock id='13081468688'>

    def test_delete_scenario_not_found(
        self, client, mock_db, admin_user, mock_scenario_manager
    ):
        """Test deleting a non-existent scenario"""
        mock_scenario_manager.get_scenario.return_value = None
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.delete(
                "/api/admin/scenario-management/scenarios/nonexistent"
            )
    
        app.dependency_overrides.clear()
    
>       assert response.status_code == 404
E       assert 401 == 404
E        +  where 401 = <Response [401 Unauthorized]>.status_code

tests/test_api_scenario_management_integration.py:612: AssertionError
______________ TestContentConfigEndpoints.test_get_content_config ______________

self = <tests.test_api_scenario_management_integration.TestContentConfigEndpoints object at 0x30be322d0>
client = <starlette.testclient.TestClient object at 0x335677830>
mock_db = <Mock id='13778517744'>
admin_user = <app.models.simple_user.SimpleUser object at 0x30bbbade0>
mock_scenario_manager = <AsyncMock id='13778362512'>
content_config = {'ai_provider_preference': 'mistral', 'content_quality_threshold': 0.7, 'enable_auto_flashcards': True, 'enable_auto_quizzes': True, ...}

    def test_get_content_config(
        self, client, mock_db, admin_user, mock_scenario_manager, content_config
    ):
        """Test GET /api/admin/scenario-management/content-config"""
        mock_scenario_manager.get_content_processing_config.return_value = (
            content_config
        )
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.get("/api/admin/scenario-management/content-config")
    
        app.dependency_overrides.clear()
    
        assert response.status_code == 200
        data = response.json()
>       assert data["enable_auto_validation"] is True
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       KeyError: 'enable_auto_validation'

tests/test_api_scenario_management_integration.py:643: KeyError
____________ TestContentConfigEndpoints.test_update_content_config _____________

self = <tests.test_api_scenario_management_integration.TestContentConfigEndpoints object at 0x30be32540>
client = <starlette.testclient.TestClient object at 0x3352e1070>
mock_db = <Mock id='13777116464'>
admin_user = <app.models.simple_user.SimpleUser object at 0x3352e0b00>
mock_scenario_manager = <AsyncMock id='13777109456'>
content_config = {'ai_provider_preference': 'mistral', 'content_quality_threshold': 0.7, 'enable_auto_flashcards': True, 'enable_auto_quizzes': True, ...}

    def test_update_content_config(
        self, client, mock_db, admin_user, mock_scenario_manager, content_config
    ):
        """Test PUT /api/admin/scenario-management/content-config"""
        mock_scenario_manager.update_content_processing_config.return_value = (
            content_config
        )
    
        update_data = {
            "enable_auto_validation": False,
            "validation_strictness": "strict",
        }
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.put(
                "/api/admin/scenario-management/content-config",
                json=update_data,
            )
    
        app.dependency_overrides.clear()
    
>       assert response.status_code == 200
E       assert 401 == 200
E        +  where 401 = <Response [401 Unauthorized]>.status_code

tests/test_api_scenario_management_integration.py:672: AssertionError
________________ TestBulkOperationsEndpoint.test_bulk_activate _________________

self = <tests.test_api_scenario_management_integration.TestBulkOperationsEndpoint object at 0x30be327e0>
client = <starlette.testclient.TestClient object at 0x335538800>
mock_db = <Mock id='13779582608'>
admin_user = <app.models.simple_user.SimpleUser object at 0x33553bb60>
mock_scenario_manager = <AsyncMock id='13779573632'>

    def test_bulk_activate(self, client, mock_db, admin_user, mock_scenario_manager):
        """Test bulk activating scenarios"""
        mock_scenario_manager.bulk_update_scenarios.return_value = {
            "updated": 3,
            "failed": 0,
        }
    
        bulk_data = {
            "scenario_ids": ["id1", "id2", "id3"],
            "operation": "activate",
        }
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.post(
                "/api/admin/scenario-management/scenarios/bulk",
                json=bulk_data,
            )
    
        app.dependency_overrides.clear()
    
>       assert response.status_code == 200
E       assert 401 == 200
E        +  where 401 = <Response [401 Unauthorized]>.status_code

tests/test_api_scenario_management_integration.py:708: AssertionError
_______________ TestBulkOperationsEndpoint.test_bulk_deactivate ________________

self = <tests.test_api_scenario_management_integration.TestBulkOperationsEndpoint object at 0x30be32a50>
client = <starlette.testclient.TestClient object at 0x335677050>
mock_db = <Mock id='13780861680'>
admin_user = <app.models.simple_user.SimpleUser object at 0x335675520>
mock_scenario_manager = <AsyncMock id='13780874064'>

    def test_bulk_deactivate(self, client, mock_db, admin_user, mock_scenario_manager):
        """Test bulk deactivating scenarios"""
        mock_scenario_manager.bulk_update_scenarios.return_value = {
            "updated": 2,
            "failed": 1,
        }
    
        bulk_data = {
            "scenario_ids": ["id1", "id2", "id3"],
            "operation": "deactivate",
        }
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.post(
                "/api/admin/scenario-management/scenarios/bulk",
                json=bulk_data,
            )
    
        app.dependency_overrides.clear()
    
>       assert response.status_code == 200
E       assert 401 == 200
E        +  where 401 = <Response [401 Unauthorized]>.status_code

tests/test_api_scenario_management_integration.py:738: AssertionError
_________________ TestBulkOperationsEndpoint.test_bulk_delete __________________

self = <tests.test_api_scenario_management_integration.TestBulkOperationsEndpoint object at 0x30be328d0>
client = <starlette.testclient.TestClient object at 0x335412b70>
mock_db = <Mock id='13779490560'>
admin_user = <app.models.simple_user.SimpleUser object at 0x335525be0>
mock_scenario_manager = <AsyncMock id='13779489312'>

    def test_bulk_delete(self, client, mock_db, admin_user, mock_scenario_manager):
        """Test bulk deleting scenarios"""
        mock_scenario_manager.bulk_delete_scenarios.return_value = {
            "deleted": 2,
            "failed": 0,
        }
    
        bulk_data = {
            "scenario_ids": ["id1", "id2"],
            "operation": "delete",
        }
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.post(
                "/api/admin/scenario-management/scenarios/bulk",
                json=bulk_data,
            )
    
        app.dependency_overrides.clear()
    
>       assert response.status_code == 200
E       assert 401 == 200
E        +  where 401 = <Response [401 Unauthorized]>.status_code

tests/test_api_scenario_management_integration.py:765: AssertionError
_________________ TestBulkOperationsEndpoint.test_bulk_export __________________

self = <tests.test_api_scenario_management_integration.TestBulkOperationsEndpoint object at 0x30be31c40>
client = <starlette.testclient.TestClient object at 0x33776f470>
mock_db = <Mock id='13815440608'>
admin_user = <app.models.simple_user.SimpleUser object at 0x33776d0d0>
mock_scenario_manager = <AsyncMock id='13815447232'>
sample_scenarios_list = [ConversationScenario(scenario_id='test_scenario_1', name='Test Restaurant Scenario', category=<ScenarioCategory.RESTA...h bargaining customs"}', learning_goals=['Buy groceries', 'Negotiate prices'], learning_outcomes=[], prerequisites=[])]

    def test_bulk_export(
        self, client, mock_db, admin_user, mock_scenario_manager, sample_scenarios_list
    ):
        """Test bulk exporting scenarios"""
        mock_scenario_manager.export_scenarios.return_value = sample_scenarios_list
    
        bulk_data = {
            "scenario_ids": ["id1", "id2", "id3"],
            "operation": "export",
        }
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.post(
                "/api/admin/scenario-management/scenarios/bulk",
                json=bulk_data,
            )
    
        app.dependency_overrides.clear()
    
>       assert response.status_code == 200
E       assert 401 == 200
E        +  where 401 = <Response [401 Unauthorized]>.status_code

tests/test_api_scenario_management_integration.py:791: AssertionError
_________________ TestTemplatesEndpoint.test_get_templates_all _________________

self = <tests.test_api_scenario_management_integration.TestTemplatesEndpoint object at 0x30be30b90>
client = <starlette.testclient.TestClient object at 0x33776ddc0>
mock_db = <Mock id='13815147808'>
admin_user = <app.models.simple_user.SimpleUser object at 0x3377243e0>
mock_scenario_manager = <AsyncMock id='13815152032'>
sample_scenarios_list = [ConversationScenario(scenario_id='test_scenario_1', name='Test Restaurant Scenario', category=<ScenarioCategory.RESTA...h bargaining customs"}', learning_goals=['Buy groceries', 'Negotiate prices'], learning_outcomes=[], prerequisites=[])]

    def test_get_templates_all(
        self, client, mock_db, admin_user, mock_scenario_manager, sample_scenarios_list
    ):
        """Test getting all templates"""
        mock_scenario_manager.get_scenario_templates.return_value = (
            sample_scenarios_list
        )
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.get("/api/admin/scenario-management/templates")
    
        app.dependency_overrides.clear()
    
        assert response.status_code == 200
        data = response.json()
>       assert len(data) == 3
E       AssertionError: assert 4 == 3
E        +  where 4 = len({'categories': [{'label': 'Travel', 'value': 'travel'}, {'label': 'Restaurant', 'value': 'restaurant'}, {'label': 'Shopping', 'value': 'shopping'}, {'label': 'Business', 'value': 'business'}, {'label': 'Healthcare', 'value': 'healthcare'}, {'label': 'Social', 'value': 'social'}, ...], 'difficulties': [{'label': 'Beginner', 'value': 'beginner'}, {'label': 'Intermediate', 'value': 'intermediate'}, {'label': 'Advanced', 'value': 'advanced'}, {'label': 'Native', 'value': 'native'}], 'phase_templates': [{'description': 'Initial greeting and context setting', 'expected_duration_minutes': 5, 'learning_objectives': ['Basic greetings', 'Context establishment'], 'name': 'Introduction'}, {'description': 'Core conversation and task completion', 'expected_duration_minutes': 15, 'learning_objectives': ['Task-specific vocabulary', 'Practical communication'], 'name': 'Main Interaction'}, {'description': 'Wrap-up and final exchanges', 'expected_duration_minutes': 5, 'learning_objectives': ['Polite closures', 'Future arrangements'], 'name': 'Conclusion'}], 'roles': [{'label': 'Customer', 'value': 'customer'}, {'label': 'Service Provider', 'value': 'service_provider'}, {'label': 'Friend', 'value': 'friend'}, {'label': 'Colleague', 'value': 'colleague'}, {'label': 'Student', 'value': 'student'}, {'label': 'Teacher', 'value': 'teacher'}, ...]})

tests/test_api_scenario_management_integration.py:824: AssertionError
_____________ TestTemplatesEndpoint.test_get_templates_by_category _____________

self = <tests.test_api_scenario_management_integration.TestTemplatesEndpoint object at 0x30be32b70>
client = <starlette.testclient.TestClient object at 0x3377278c0>
mock_db = <Mock id='13815139744'>
admin_user = <app.models.simple_user.SimpleUser object at 0x337727f50>
mock_scenario_manager = <AsyncMock id='13815152512'>
sample_scenario = ConversationScenario(scenario_id='test_scenario_1', name='Test Restaurant Scenario', category=<ScenarioCategory.RESTAU..."casual"}', learning_goals=['Order food', 'Ask questions', 'Request the bill'], learning_outcomes=[], prerequisites=[])

    def test_get_templates_by_category(
        self, client, mock_db, admin_user, mock_scenario_manager, sample_scenario
    ):
        """Test getting templates filtered by category"""
        mock_scenario_manager.get_scenario_templates.return_value = [sample_scenario]
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.get(
                "/api/admin/scenario-management/templates?category=restaurant"
            )
    
        app.dependency_overrides.clear()
    
        assert response.status_code == 200
        data = response.json()
>       assert len(data) == 1
E       AssertionError: assert 4 == 1
E        +  where 4 = len({'categories': [{'label': 'Travel', 'value': 'travel'}, {'label': 'Restaurant', 'value': 'restaurant'}, {'label': 'Shopping', 'value': 'shopping'}, {'label': 'Business', 'value': 'business'}, {'label': 'Healthcare', 'value': 'healthcare'}, {'label': 'Social', 'value': 'social'}, ...], 'difficulties': [{'label': 'Beginner', 'value': 'beginner'}, {'label': 'Intermediate', 'value': 'intermediate'}, {'label': 'Advanced', 'value': 'advanced'}, {'label': 'Native', 'value': 'native'}], 'phase_templates': [{'description': 'Initial greeting and context setting', 'expected_duration_minutes': 5, 'learning_objectives': ['Basic greetings', 'Context establishment'], 'name': 'Introduction'}, {'description': 'Core conversation and task completion', 'expected_duration_minutes': 15, 'learning_objectives': ['Task-specific vocabulary', 'Practical communication'], 'name': 'Main Interaction'}, {'description': 'Wrap-up and final exchanges', 'expected_duration_minutes': 5, 'learning_objectives': ['Polite closures', 'Future arrangements'], 'name': 'Conclusion'}], 'roles': [{'label': 'Customer', 'value': 'customer'}, {'label': 'Service Provider', 'value': 'service_provider'}, {'label': 'Friend', 'value': 'friend'}, {'label': 'Colleague', 'value': 'colleague'}, {'label': 'Student', 'value': 'student'}, {'label': 'Teacher', 'value': 'teacher'}, ...]})

tests/test_api_scenario_management_integration.py:846: AssertionError
__________________ TestStatisticsEndpoint.test_get_statistics __________________

self = <tests.test_api_scenario_management_integration.TestStatisticsEndpoint object at 0x30be32e40>
client = <starlette.testclient.TestClient object at 0x337761d00>
mock_db = <Mock id='13815386704'>
admin_user = <app.models.simple_user.SimpleUser object at 0x337761280>
mock_scenario_manager = <AsyncMock id='13815398176'>

    def test_get_statistics(self, client, mock_db, admin_user, mock_scenario_manager):
        """Test getting scenario statistics"""
        stats = {
            "total_scenarios": 10,
            "active_scenarios": 8,
            "inactive_scenarios": 2,
            "by_category": {
                "restaurant": 3,
                "hotel": 2,
                "shopping": 5,
            },
            "by_difficulty": {
                "beginner": 4,
                "intermediate": 4,
                "advanced": 2,
            },
        }
        mock_scenario_manager.get_scenario_statistics.return_value = stats
    
        app.dependency_overrides[get_primary_db_session] = lambda: mock_db
        app.dependency_overrides[require_admin_access] = lambda: admin_user
    
        with patch(
            "app.api.scenario_management.scenario_manager", mock_scenario_manager
        ):
            response = client.get("/api/admin/scenario-management/statistics")
    
        app.dependency_overrides.clear()
    
        assert response.status_code == 200
        data = response.json()
>       assert data["total_scenarios"] == 10
E       assert 15 == 10

tests/test_api_scenario_management_integration.py:889: AssertionError
=============================== warnings summary ===============================
tests/test_api_ai_models.py::TestUpdateModel::test_update_model_success
tests/test_api_ai_models.py::TestUpdateModel::test_update_model_invalid_status
tests/test_api_ai_models.py::TestUpdateModel::test_update_model_valid_status
tests/test_api_ai_models.py::TestUpdateModel::test_update_model_update_fails
tests/test_api_ai_models.py::TestUpdateModel::test_update_model_service_error
  /Users/mcampos.cerda/Documents/Programming/ai-language-tutor-app/app/api/ai_models.py:242: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    updates = {k: v for k, v in update_data.dict().items() if v is not None}

tests/test_api_ai_models.py::TestOptimizeModelSelection::test_optimize_success
tests/test_api_ai_models.py::TestOptimizeModelSelection::test_optimize_no_recommendations
tests/test_api_ai_models.py::TestMissingBranchCoverage::test_optimize_model_not_found
  /Users/mcampos.cerda/Documents/Programming/ai-language-tutor-app/app/api/ai_models.py:421: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    "optimization_params": request.dict(),

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
SKIPPED [1] tests/e2e/test_ai_e2e.py:104: DASHSCOPE_API_KEY not found in .env - Skipping E2E test
FAILED tests/e2e/test_ai_e2e.py::TestAIRouterE2E::test_router_real_multi_language
FAILED tests/integration/test_ai_integration.py::TestAIRouterIntegration::test_provider_selection_based_on_language
FAILED tests/integration/test_ai_integration.py::TestAIRouterIntegration::test_router_failover_when_primary_fails
FAILED tests/integration/test_ai_integration.py::TestConversationAIIntegration::test_chat_with_ai_router_integration
FAILED tests/integration/test_ai_integration.py::TestSpeechProcessingIntegration::test_chat_with_tts_integration
FAILED tests/test_ai_test_suite.py::TestRunAllTests::test_run_all_tests_all_pass
FAILED tests/test_api_scenario_management_integration.py::TestGetScenarioEndpoint::test_get_scenario_success
FAILED tests/test_api_scenario_management_integration.py::TestGetScenarioEndpoint::test_get_scenario_not_found
FAILED tests/test_api_scenario_management_integration.py::TestCreateScenarioEndpoint::test_create_scenario_success
FAILED tests/test_api_scenario_management_integration.py::TestCreateScenarioEndpoint::test_create_scenario_validation_error
FAILED tests/test_api_scenario_management_integration.py::TestUpdateScenarioEndpoint::test_update_scenario_success
FAILED tests/test_api_scenario_management_integration.py::TestUpdateScenarioEndpoint::test_update_scenario_not_found
FAILED tests/test_api_scenario_management_integration.py::TestUpdateScenarioEndpoint::test_update_scenario_with_phases
FAILED tests/test_api_scenario_management_integration.py::TestDeleteScenarioEndpoint::test_delete_scenario_success
FAILED tests/test_api_scenario_management_integration.py::TestDeleteScenarioEndpoint::test_delete_scenario_not_found
FAILED tests/test_api_scenario_management_integration.py::TestContentConfigEndpoints::test_get_content_config
FAILED tests/test_api_scenario_management_integration.py::TestContentConfigEndpoints::test_update_content_config
FAILED tests/test_api_scenario_management_integration.py::TestBulkOperationsEndpoint::test_bulk_activate
FAILED tests/test_api_scenario_management_integration.py::TestBulkOperationsEndpoint::test_bulk_deactivate
FAILED tests/test_api_scenario_management_integration.py::TestBulkOperationsEndpoint::test_bulk_delete
FAILED tests/test_api_scenario_management_integration.py::TestBulkOperationsEndpoint::test_bulk_export
FAILED tests/test_api_scenario_management_integration.py::TestTemplatesEndpoint::test_get_templates_all
FAILED tests/test_api_scenario_management_integration.py::TestTemplatesEndpoint::test_get_templates_by_category
FAILED tests/test_api_scenario_management_integration.py::TestStatisticsEndpoint::test_get_statistics
====== 24 failed, 4215 passed, 1 skipped, 8 warnings in 138.02s (0:02:18) ======
